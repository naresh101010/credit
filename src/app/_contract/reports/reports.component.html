<div class="hero-content contractContainer report">
  <div class="row text-left parent">
    <div class="breadcrumb">
      <a routerLink="/contract/credit" target="_self">Dashboard</a><span class="fa fa-caret-right"></span>
      <a routerLink="/contract/credit" target="_self">Contracts</a><span class="fa fa-caret-right"></span>
      <a routerLink="/contract/credit" target="_self">Customer</a><span class="fa fa-caret-right"></span> CREDIT </div>
  </div>
  <div class="msaOperation">
    <h3>Customer Contract Report </h3>
  </div>
  <mat-card>    
    <form #f="ngForm">
      <div class="row">
        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
          <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 label-text report">Search By <span style="color:red">*</span>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 label-text report mg">
            <mat-form-field appearance="outline" style="width: 50%; background: #27ae60;height: 20px; border: none;">
              <mat-select (selectionChange)="runSearchBy();  validateField()" disableOptionCentering
                panelClass="uploadDocument creditSelect" #doctype='ngModel' required name="searchByVal"
                [(ngModel)]="searchByVal" placeholder="Select Option">
                <mat-option *ngFor="let item of searchBy" [value]="item.lookupVal" [matTooltip]="item.lookupVal"
                  matTooltipPosition="above"> {{item.lookupVal}} </mat-option>
              </mat-select>
            </mat-form-field>
            <span
              *ngIf="reqMsgSearchBran && (searchByVal == 'MSA BASE LOCATION' || searchByVal == 'RC BASE LOCATION' || searchByVal == 'BOOKING BRANCH' || searchByVal == 'ALL')"
              style="color:red; font-weight: normal; font-size: 1.4rem;"> Required ! </span>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 mg" id="advanceSerach">
            <!-- advance select search -->
            <mat-form-field appearance="outline" style="width: 100%;"
              *ngIf="searchByVal == 'MSA BASE LOCATION' || searchByVal == 'RC BASE LOCATION' || searchByVal == 'BOOKING BRANCH' || searchByVal == 'ALL'">
              <mat-select [disabled]="!finalObj.searchBy" (selectionChange)="manualSel($event); validateField()"
                disableOptionCentering panelClass="creditNgxSelect advanceSearch" #doctype='ngModel' required
                name="searchArrValue" [(ngModel)]="searchArrValue" placeholder="SEARCH {{finalObj.searchBy}} ">
                <ngx-mat-select-search (change)="manualSel($event); validateField()" (keyup)="manualSearch($event); validateField()" [(ngModel)]="searchVal"
                  [placeholderLabel]="'Search...'" [noEntriesFoundLabel]="'Not found'" name="search">
                  <mat-icon class="aa mat-select-search-custom-header-content mat_ngx_select_search">search</mat-icon>
                </ngx-mat-select-search>
                <mat-option [value]="" style="display: none;">Select Option</mat-option>
                <mat-option *ngFor="let item of (searchArr | stringFilter:searchVal:'branchName')"
                  [value]="item.branchId" [matTooltip]="item.branchName" matTooltipPosition="above"> {{item.branchName}}
                </mat-option>
              </mat-select>
            </mat-form-field>
            <!-- enter min character -->
            <span style="color: red;text-align: right;font-size: 1.3rem;"
              *ngIf="threeChar && searchByVal != 'ALL'  &&  this.searchVal.length <= 2  && (searchByVal == 'MSA BASE LOCATION' || searchByVal == 'RC BASE LOCATION' || searchByVal == 'BOOKING BRANCH' || searchByVal == 'ALL')">Enter
              min. 3 character !</span>
            <!-- no record found -->
            <span style="color: red;text-align: right;font-size: 1.3rem;"
              *ngIf="!threeChar && noRecordFound && ( searchByVal == 'MSA BASE LOCATION' || searchByVal == 'RC BASE LOCATION' || searchByVal == 'BOOKING BRANCH' || searchByVal == 'ALL')">
              No record found</span>
            <!-- normal select -->
            <mat-form-field appearance="outline" style="width: 50%;"
              *ngIf="searchByVal == 'AREA' || searchByVal == 'REGION'">
              <mat-select [disabled]="!finalObj.searchBy" (selectionChange)="runBranchSearch(); validateField()"
                disableOptionCentering panelClass="uploadDocument reportSelect"
                placeholder="SELECT {{finalObj.searchBy}}" required name="branchSearchId" [(ngModel)]="branchSearchId">
                <ngx-mat-select-search [(ngModel)]="search_branch" [placeholderLabel]="'Search...'"
                  style="position: fixed;  top: 45px;    height: 16px;   border: 0;" [noEntriesFoundLabel]="'Not found'"
                  name="search">
                  <mat-icon class="mat-select-search-custom-header-content mat_ngx_select_search">search</mat-icon>
                </ngx-mat-select-search>
                <mat-option
                  *ngFor="let item of  (branchArr | stringFilter:search_branch:'branchName') | sortBy:'asc':'branchName' "
                  [value]="item.branchId" [matTooltip]="item.branchName" matTooltipPosition="above"> {{item.branchName}}
                </mat-option>
              </mat-select>
            </mat-form-field>
            <span *ngIf="!finalObj.branchName && branchFlg" style="color:red"> Required ! </span>
          </div>
        </div>
        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
          <!-- Business Type -->
          <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 label-text report">Business Type <span
              style="color:red">*</span></div>
          <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
            <mat-form-field appearance="outline" style="width: 100%;">
              <mat-select (selectionChange)="bussinessType(); validateField()" disableOptionCentering
                panelClass="uploadDocument reportSelect" #businesType_='ngModel' required name="business_typeVal"
                [(ngModel)]="business_typeVal" placeholder="Select Option">
                <ngx-mat-select-search [(ngModel)]="search_businessType" [placeholderLabel]="'Search...'"
                  style="position: fixed;  top: 45px;    height: 16px;   border: 0;" [noEntriesFoundLabel]="'Not found'"
                  name="search">
                  <mat-icon class="mat-select-search-custom-header-content mat_ngx_select_search">search</mat-icon>
                </ngx-mat-select-search>
                <mat-option
                  *ngFor="let item of  (business_type | stringFilter:search_businessType:'lookupVal') | sortBy:'asc':'lookupVal'"
                  [value]="item.id" [matTooltip]="item.lookupVal" matTooltipPosition="above"> {{item.lookupVal}}
                </mat-option>
              </mat-select>
            </mat-form-field>
            <span *ngIf="!businesType_.valid && businesType_.touched" style="color:red"> Required ! </span>
          </div>
        </div>
        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
          <!-- Service Line -->
          <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 label-text report">Service Line <span
              style="color:red">*</span></div>
          <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
            <mat-form-field appearance="outline" style="width: 100%;">
              <mat-select (selectionChange)="serviceLine(); validateField()" disableOptionCentering
                panelClass="uploadDocument reportSelect" #serviceLine_='ngModel' required name="service_lineVal"
                [(ngModel)]="service_lineVal" placeholder="Select Option">
                <ngx-mat-select-search [(ngModel)]="search_serviceType" [placeholderLabel]="'Search...'"
                  style="position: fixed;  top: 45px;    height: 16px;   border: 0;" [noEntriesFoundLabel]="'Not found'"
                  name="search">
                  <mat-icon class="mat-select-search-custom-header-content mat_ngx_select_search">search</mat-icon>
                </ngx-mat-select-search>
                <mat-option
                  *ngFor="let item of (service_line | stringFilter:search_serviceType:'lookupVal') | sortBy:'asc':'lookupVal'"
                  [value]="item.id" [matTooltip]="item.lookupVal" matTooltipPosition="above"> {{item.lookupVal}}
                </mat-option>
              </mat-select>
            </mat-form-field>
            <span *ngIf="!serviceLine_.valid && serviceLine_.touched" style="color:red"> Required ! </span>
          </div>
        </div>
      </div>
      <br>
      <div class="row">
        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
          <!-- Offering Wise -->
          <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 label-text report">Service offering<span
              style="color:red">*</span></div>
          <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 mg">
            <mat-form-field appearance="outline" style="width: 100%;">
              <mat-select (selectionChange)="offeringWise(); validateField()" disableOptionCentering
                panelClass="uploadDocument reportSelect" #offerwise_='ngModel' required name="offering_wiseVal"
                [(ngModel)]="offering_wiseVal" placeholder="Select Option">
                <ngx-mat-select-search [(ngModel)]="search_offeringType" [placeholderLabel]="'Search...'"
                  style="position: fixed;  top: 45px;    height: 16px;   border: 0;" [noEntriesFoundLabel]="'Not found'"
                  name="search">
                  <mat-icon class="mat-select-search-custom-header-content mat_ngx_select_search">search</mat-icon>
                </ngx-mat-select-search>
                <mat-option
                  *ngFor="let item of  (offering_wise | stringFilter:search_offeringType:'serviceOffering') | sortBy:'asc':'serviceOffering' "
                  [value]="item.id" [matTooltip]="item.serviceOffering" matTooltipPosition="above">
                  {{item.serviceOffering}} </mat-option>
              </mat-select>
            </mat-form-field>
            <span *ngIf="!offerwise_.valid && offerwise_.touched" style="color:red"> Required ! </span>
          </div>
        </div>
        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
          <!-- Report Type -->
          <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 label-text report">Report Type <span
              style="color:red">*</span></div>
          <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
            <mat-form-field appearance="outline" style="width: 100%;">
              <mat-select (selectionChange)="reportType(); validateField()" disableOptionCentering
                panelClass="uploadDocument reportSelect" #reportType_='ngModel' required name="report_typeVal"
                [(ngModel)]="report_typeVal" placeholder="Select Option">
                <ngx-mat-select-search [(ngModel)]="search_reportType" [placeholderLabel]="'Search...'"
                  style="position: fixed;  top: 45px;    height: 16px;   border: 0;" [noEntriesFoundLabel]="'Not found'"
                  name="search">
                  <mat-icon class="mat-select-search-custom-header-content mat_ngx_select_search">search</mat-icon>
                </ngx-mat-select-search>
                <mat-option
                  *ngFor="let item of  (report_type | stringFilter:search_reportType:'lookupVal') | sortBy:'asc':'lookupVal' "
                  [value]="item.id" [matTooltip]="item.lookupVal" matTooltipPosition="above"> {{item.lookupVal}}
                </mat-option>
              </mat-select>
            </mat-form-field>
            <span *ngIf="!reportType_.valid && reportType_.touched" style="color:red"> Required ! </span>
          </div>
        </div>
        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
          <!-- Record Type -->
          <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 label-text report">Record Type <span
              style="color:red">*</span></div>
          <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
            <mat-form-field appearance="outline" style="width: 100%;">
              <mat-select (selectionChange)="recordType(); validateField()" disableOptionCentering
                panelClass="uploadDocument reportSelect" #recordType_='ngModel' required name="record_typeVal"
                [(ngModel)]="record_typeVal" placeholder="Select Option">
                <ngx-mat-select-search [(ngModel)]="search_recordType" [placeholderLabel]="'Search...'"
                  style="position: fixed;  top: 45px;    height: 16px;   border: 0;" [noEntriesFoundLabel]="'Not found'"
                  name="search">
                  <mat-icon class="mat-select-search-custom-header-content mat_ngx_select_search">search</mat-icon>
                </ngx-mat-select-search>
                <mat-option
                  *ngFor="let item of   (record_type | stringFilter:search_recordType:'lookupVal') | sortBy:'asc':'lookupVal' "
                  [value]="item.id" [matTooltip]="item.lookupVal" matTooltipPosition="above"> {{item.lookupVal}}
                </mat-option>
              </mat-select>
            </mat-form-field>
            <span *ngIf="!recordType_.valid && recordType_.touched" style="color:red"> Required ! </span>
          </div>
        </div>
      </div>
      <br>
      <div class="row">
        <div class="col-sm-12">
          <div style="margin-left: 2rem;">
            <div class="label-text">Select File Format </div>
            <mat-radio-group aria-labelledby="example-radio-group-label" *ngFor="let item of fileTypes"
              (change)="validateField()" name="item" class="example-radio-group"
              [(ngModel)]="this.finalObj.reportFormat">
              <mat-radio-button class="example-radio-button" [value]="item.fileType"> {{item.fileType}}
              </mat-radio-button>
            </mat-radio-group>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-12">
          <div class="example-button-row text-center" style="margin-top: 2%">
            <button class="btn1" mat-raised-button color="primary" (click)="downloadFile()"
              [disabled]="enableSub">Submit</button>
          </div>
        </div>
      </div>
    </form>
  </mat-card>
</div>
<ngx-spinner id="spinner" size="large" type="ball-spin-clockwise"> </ngx-spinner>
