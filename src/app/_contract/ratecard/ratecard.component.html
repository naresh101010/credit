<ngx-spinner id="spinner" size="large" type="ball-spin-clockwise"></ngx-spinner>
<!-- New Blink message -->
<div *ngIf="isCopyRateCard && isFCopyRc" class="alert alert-dismissible blinkMessage blinking">
  <a (click)="getRateCardDetail()" class="close" data-dismiss="alert" aria-label="close">&times;</a>Future Rate Card !
</div>
<div *ngIf="isCopyRateCard && isCopyRc" class="alert alert-dismissible blinkMessage blinking">
  <a (click)="getRateCardDetail()" class="close" data-dismiss="alert" aria-label="close">&times;</a>Copy Rate Card !
</div>
<!-- End of blink message -->
<div class="hero-content retailContainer">
  <div class="row text-left parent"> 
    <div class="breadcrumb">
      <a routerLink="/retail-contract/retail" target="_self">Dashboard</a><span class="fa fa-caret-right"></span>
      <a routerLink="/retail-contract/retail" target="_self">Contracts</a><span class="fa fa-caret-right"></span>
      <a routerLink="/retail-contract/retail" target="_self">Customer</a><span class="fa fa-caret-right"></span>
      RETAIL
    </div>
    <stepper></stepper>
  </div>
  <h3>Retail Contract</h3>
  <div id="mat-card-heading" fxLayout="row" fxLayout.xs="column" fxLayoutAlign.xs="space-between start"
  class="mat-card-header-container">
  <div fxFlex=33 fxFlex.xs=100 fxLayout="row" fxLayoutAlign="start"><span class="fw600">MSA Level :
    </span><span style="margin-left: 10px"> {{msaLevel}}</span>
  </div>
  <div fxFlex=33 fxFlex.xs=100 fxLayout="row" fxLayoutAlign="start"><span class="fw600">Retail Code : </span>
      <span style="margin-left: 10px"> <em>{{retailCode}}</em></span>
  </div>
  </div>
  <mat-card>
    <div>
      <mat-accordion multi="true">
        <mat-expansion-panel id="box-shadow" #first [disabled]="isExpanded" (opened)="openRateCard()" (closed)="closeRateCard()" [expanded]="true">
          <mat-expansion-panel-header (click)="getRateCardDetail()" style="cursor: pointer;">
            <img class="rcIcon" [src]="first.expanded ? '/assets/images/rc_green.png': '/assets/images/rc_gray.png'" alt="Rate Card"> Rate Card {{RateCardName}}
          </mat-expansion-panel-header>
          <mat-card-content>
            <!-- boxes -->          
            <div class="commercialboxflex " style="display: block;" *ngxPermissionsOnly="['RATE CARD_READ']">
              <div *ngIf="rateCardDetails.length>0" class="flexproperty" style="display: block;" (clickOutside)="clickBodyElem($event)" [exclude]="'.futureCard'">
              <div *ngFor="let data of rateCardDetails">
              <div (click)="ratecardDeailbyId(data,false)" [ngClass]="{
                  'commercialbox1':(data.rateCardCode == model.rateCardCode),
                  'commercialbox':(data.rateCardCode != model.rateCardCode && (!data.expired)),
                  'commercialboxRed' : (data.expired && data.rateCardCode != model.rateCardCode)
                  }"
                  class="rightBottom">

                  <div class="rate_card_container">
                    <div *ngxPermissionsOnly="['RATE CARD_CREATE']" class="futureCard">
                    <em *ngIf="editflow" style="cursor: pointer" id="toggleCopyRc">
                    
                    <em class="material-icons deleteIcon1" style="left: 7rem !important"  (click)="toggleCopyRc(data)">file_copy</em>
                    <div class="future_card" *ngIf="data.showRctoggle && isRcToggle">
                    <h6 class="future_rc_txt" (click)="copyRateCard(data,'FCP')">FUTURE RATE CARD</h6>
                    <h6 class="future_rc_txt" (click)="copyRateCard(data,'CP')">COPY RATE CARD</h6>
                    </div>
                    </em>
                    <em  *ngIf="editflow && rateCardDetails.length>1" (click)="putRatecard(data)" class="material-icons deleteIcon1"  style="left: 7rem !important">delete</em>
                    <em  *ngIf="editflow && rateCardDetails.length==1"  class="material-icons deleteIcon1"  style="left: 7rem !important"></em>
                    <em  *ngIf="!editflow && rateCardDetails.length>1" (click)="putRatecard(data)" class="material-icons deleteIcon1">delete</em>
                    <em  *ngIf="!editflow && rateCardDetails.length==1" class="material-icons deleteIcon1"></em>
                    
                    </div>
                    <h6 style="cursor: pointer;">{{data.rateCardCode}}</h6>
                    <mat-divider *ngIf="!data.showRctoggle" id="tileLine"></mat-divider>
                    <p class="card_minor_text to_upper_case heading_bold">Service Offering </p>
                    <p class="card_minor_text to_upper_case" *ngFor="let offer of offerings">
                      <span *ngIf="offer.id==data.offeringId">{{offer.serviceOffering}}</span>
                    </p>
                    <!-- offerings -->
                  </div>
                </div>
              </div>
              <div class="commercialbox2" (click)="changeState1()" style="margin-right: 1rem; margin-bottom: 1rem;float:left" *ngxPermissionsOnly="['RATE CARD_CREATE']">
                <em class="material-icons addNewButton" style="position: relative;" id="addRateCard">add</em>
                <p class="addNewText" >Add New</p>
              </div>
            </div>
            <div *ngIf="rateCardDetails.length==0" class="flexproperty" (clickOutside)="clickBodyElem($event)" [exclude]="'.futureCard'">
              <div class="commercialbox2" (click)="changeState1()" style="margin-right: 1rem; margin-bottom: 1rem;float:left" *ngxPermissionsOnly="['RATE CARD_CREATE']">
                <em class="material-icons addNewButton" style="position: relative;" id="addRateCard">add</em>
                <p class="addNewText" >Add New</p>
              </div>
            </div>
           <!--  -->
          </div>
          </mat-card-content>
        </mat-expansion-panel>

        <form name="ratecard" (ngSubmit)="fRatecard.form.valid" #fRatecard="ngForm" novalidate *ngxPermissionsOnly="['RATE CARD_READ']" class="rateCardDetail">
        <mat-expansion-panel id="box-shadow"  [disabled]="isExpanded" #second (opened)="openRateCardDetail()" (closed)="closeRateCardDetail()">
          <mat-expansion-panel-header  (click)="openRateCardDetailClick()" style="cursor: pointer;">
            <img class="rcIcon" [src]="second.expanded ? '/assets/images/rcd_green.png': '/assets/images/rcd_gray.png'" alt="Rate Card"> Rate Card Detail</mat-expansion-panel-header>
          <mat-card-content>
            <div>
              <div class="row margintop10">
                <div class="col-lg-4 col-md-4  " style="width: 40.333333%;">
                  <div class="row" >
                    <div class="col-lg-6 col-md-6 label-text">Rate Card Name</div>
                    <div class="col-lg-4 col-md-4 label-text-value" *ngIf="model.rateCardCode && model.rateCardCode!==null">
                      {{model.rateCardCode}}
                    </div>
                    <div class="col-lg-4 col-md-4 label-text-value" *ngIf="!model.rateCardCode || model.rateCardCode===null">
                      NOT GENERATED YET
                    </div>
                  </div>
                  
                  <div class="row" style="margin-top: 1rem !important;">
                    <div class="col-lg-6 col-md-6 label-text">Rate Card Sign Date<span class="redMark"> *</span></div>
                    <div class="col-lg-4 col-md-4 label-text-value">
                      <mat-form-field appearance="outline" id="datepickerwidth">
                        <input matInput  autocomplete="true" [matDatepicker]="picker2" name="rateCardSignDt" disabled [(ngModel)]="model.rateCardSignDt" class="date_picker"
                         required #RCSdate='ngModel'   placeholder="DD/MM/YYYY" maxlength="22" (blur)="signDate()" (dateChange)="signDate()">
                        <mat-datepicker panelClass="creditDatepicker" #picker2></mat-datepicker>
                        <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                      </mat-form-field>
                      <span *ngIf="isValidSignDt" class="hasErrorMsgRightSide">
                        Invalid Start Date&nbsp;!
                      </span>
                    </div>
                  </div>

                  <div class="row">
                    <div class="col-lg-6 col-md-6  "></div>
                    <div class="col-lg-6 col-md-6  ">
                    <app-validation-msg *ngIf="(RCSdate.errors?.required && RCSdate.touched)" [msg]="'Required !'"></app-validation-msg>
                    </div>
                  </div>

                  <div class="row">
                    <div class="col-lg-6 col-md-6 label-text">Rate Card Start Date<span class="redMark"> *</span></div>
                    <div class="col-lg-4 col-md-4 label-text-value">
                      <mat-form-field appearance="outline" id="datepickerwidth">
                        <input matInput  autocomplete="true" [matDatepicker]="picker" [min]="minDate" [max]="maxdateRCStart" name="effectiveDt" class="date_picker"
                         required #RCDdatee='ngModel'  [(ngModel)]="model.effectiveDt" placeholder="DD/MM/YYYY" maxlength="29" (blur)="startDate()" (dateChange)="startDate()">
                        <mat-datepicker panelClass="creditDatepicker" #picker></mat-datepicker>
                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                      </mat-form-field>
                      </div>
                  </div>

                  <div class="row">
                    <div class="col-lg-6 col-md-6  "></div>
                    <div class="col-lg-6 col-md-6  ">
                      <app-validation-msg *ngIf="(RCDdatee.errors?.required && RCDdatee.touched)" [msg]="'Required !'"></app-validation-msg>
                      <app-validation-msg *ngIf="isValidStartDt && !RCDdatee.errors?.required" [msg]="'Invalid Start Date&nbsp;!'"></app-validation-msg>
                    </div>
                  </div>
                 
                  <div class="row">
                    <div class="col-lg-6 col-md-6 label-text">Rate Card End Date<span class="redMark"> *</span></div>
                    <div class="col-lg-4 col-md-4 label-text-value">
                      <mat-form-field appearance="outline" id="datepickerwidth">
                        <input matInput  autocomplete="true" [matDatepicker]="picker3" name="expDt" class="date_picker"
                          required #RCEdate='ngModel'  [(ngModel)]="model.expDt" placeholder="DD/MM/YYYY" [min]="mindateRCExp" [max]="maxDate" (blur)="endDate()" (dateChange)="endDate()">
                        <mat-datepicker panelClass="creditDatepicker" #picker3></mat-datepicker>
                        <mat-datepicker-toggle matSuffix [for]="picker3"></mat-datepicker-toggle>
                      </mat-form-field>
                    </div>
                  </div>

                  <div class="row">
                    <div class="col-lg-6 col-md-6  "></div>
                    <div class="col-lg-6 col-md-6">
                    <app-validation-msg *ngIf="(RCEdate.errors?.required && RCEdate.touched)" [msg]="'Required !'"></app-validation-msg>
                    <app-validation-msg *ngIf="isValidEndDt && !RCEdate.errors?.required" [msg]="'Invalid End Date&nbsp;!'"> </app-validation-msg>
                    </div>
                  </div>
                  
                  <div class="row">
                    <div class="col-lg-6 col-md-6 label-text">Zone Matrix<span class="redMark"> *</span></div>
                    <div *ngIf="!model.zoneMtxId" class="col-lg-4 col-md-4 label-text-value">
                      <mat-form-field appearance="outline" id="datepickerwidth">
                        <mat-select disableOptionCentering panelClass="creditSelect2 creditNgxSelect" required #zonematric='ngModel' [disabled]="isDisableZm && this.isZoneMatrixFound" name="zoneMtxId" 
                        [(ngModel)]="model.zoneMtxId" (blur)="scrollActiveValue()">
                        <ngx-mat-select-search [(ngModel)]="searchCtrlZone1" [placeholderLabel]="'Search...'"
                          [noEntriesFoundLabel]="'Not found'" name="search">
                          <mat-icon class="mat-select-search-custom-header-content mat_ngx_select_search">search</mat-icon>
                        </ngx-mat-select-search>
                          <mat-option *ngFor="let zone of (zoneMatrix | stringFilter:searchCtrlZone1:'name') | sortBy:'asc':'name'" [value]="zone.id" 
                          [matTooltip]="zone.name" [matTooltipDisabled]="zone.name.length<16" matTooltipPosition="above">                           
                              {{zone.name}}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    <p *ngIf="(zonematric.errors?.required && zonematric.touched)" style="color: red;">Required !</p>
                    </div>
                    <div *ngIf="model.zoneMtxId" class="col-lg-4 col-md-4 label-text-value">
                      <mat-form-field appearance="outline" id="datepickerwidth">
                        <mat-select disableOptionCentering panelClass="creditSelect2 creditNgxSelect"  [disabled]="isDisableZm && this.isZoneMatrixFound" name="zoneMtxId" 
                        [(ngModel)]="model.zoneMtxId" (selectionChange)="changeZoneMatrix()" (blur)="scrollActiveValue()">
                        <ngx-mat-select-search [(ngModel)]="searchCtrlZone" [placeholderLabel]="'Search...'"
                          [noEntriesFoundLabel]="'Not found'" name="search">
                          <mat-icon class="mat-select-search-custom-header-content mat_ngx_select_search">search</mat-icon>
                        </ngx-mat-select-search>
                          <mat-option #tooltip="matTooltip"
                          matTooltip="Previous Data Mapped with Zone Matrix will be cleared on change"
                          matTooltipPosition="right" *ngFor="let zone of (zoneMatrix | stringFilter:searchCtrlZone:'name') | sortBy:'asc':'name'" [value]="zone.id">
                            <span [matTooltip]="zone.name" [matTooltipDisabled]="zone.name.length<16" matTooltipPosition="above">{{zone.name}}</span>
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-lg-6 col-md-6  "></div>
                    <div class="col-lg-6 col-md-6  ">
                      
                    </div>
                  </div>
                  <div class="row" style="margin-top: 1rem !important;">
                    <div class="col-lg-6 col-md-6 label-text">Comment</div>
                    <div class="col-lg-5 col-md-5 label-text-value">
                   <textarea id="datepickerwidth" #comment="ngModel" class="form-control-textarea"  name="descr" [(ngModel)]="model.descr" placeholder="Leave a comment" maxlength="100">
                  </textarea>         
                      </div>
                  </div>
                </div>
                <div class="col-lg-4 col-md-4  "></div>
                <div class="col-lg-4 col-md-4  " style="width: 26.333333%;">
                  <div class="col-lg-6 col-md-6"></div>
                  <div class="col-lg-6 col-md-6"></div>
                  <div class="row" >
                    <div class="col-lg-6 col-md-6 label-text">Status</div>
                    <div class="col-lg-6 col-md-6 label-text-value">
                      ACTIVE</div>
                  </div>
                  <!-- Service Offering -->
                  <div class="row margintop10" >
                    <div class="col-lg-6 col-md-6 label-text">Service Offering<span class="redMark"> *</span></div>
                    <div class="col-lg-6 col-md-6 label-text-value">
                      <mat-form-field appearance="outline" style="width: 100%;">
                        <mat-select disableOptionCentering panelClass="creditSelect2" required #serviceoffring='ngModel' [disabled]="isDisable" name="offeringId" [(ngModel)]="model.offeringId" >
                          <mat-option *ngFor="let service of offerings | sortBy:'asc':'serviceOffering'" [value]="service.id" 
                          [matTooltip]="service.serviceOffering" [matTooltipDisabled]="service.serviceOffering.length<18" matTooltipPosition="above">
                            {{service.serviceOffering}}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                   
                  </div>
                  <div class="row">
                    <div class="col-lg-6 col-md-6  "></div>
                    <div class="col-lg-6 col-md-6  ">
                      <p *ngIf="(serviceoffring.errors?.required && serviceoffring.touched)" class="redMark">Required !</p>
                    </div>
                  </div>
                  <div class="row margintop">
                    <div class="col-lg-6 col-md-6 label-text">Base Location<span class="redMark"> *</span></div>
                    <div class="col-lg-6 col-md-6 label-text-value" style="margin-top: -.3rem !important;">
                      <ng-select [items]="tableDataLocSearch" id="baseLocation"
                          name="baseLocation"
                          class="creditNgDropdown"
                          bindLabel="baseLocnBranchName"
                          class="creditNgDropdown ratecardValue"
                          bindValue="baseLocnBranchId"
                          appendTo="body"
                          (search) ='advanceDefaultBranchName($event)'
                          [(ngModel)]="model.baseLocnBranchId"
                          (click)="onClear()"
                          (clear)="emptyData()"
                          required #baseLocation="ngModel">
                      </ng-select>
                    </div>
                  </div>
                  <div class="row" *ngIf="(baseLocation.errors?.required && baseLocation.touched) || baseLocationError==true">
                    <div class="col-lg-6 col-md-6  ">                      
                      <app-validation-msg *ngIf="(baseLocation.errors?.required && baseLocation.touched) && !(baseLocationError==true)" [msg]="'Required !'"></app-validation-msg>
                      <app-validation-msg  *ngIf="(baseLocationError==true)" [msg]="'Enter min. 3 character'"></app-validation-msg>    
                    </div>
                    <div class="col-lg-6 col-md-6  "></div>
                  </div>
                 
                  <div class="row commandmentspace" >
                    <div class="col-lg-6 col-md-6 label-text">Commandment<span class="redMark"> *</span></div>
                    <div class="col-lg-6 col-md-6 label-text-value">
                      <mat-form-field appearance="outline" style="width: 100%;">
                        <mat-select (selectionChange)="closeCmdmnt()" disableOptionCentering panelClass="creditSelect2" [(value)]='model.cmdmntLevel' required #commandment='ngModel' name="cmdmntLevel" [(ngModel)]="model.cmdmntLevel">
                          <mat-option value="COMMERCIAL LEVEL">COMMERCIAL LEVEL</mat-option>
                          <mat-option value="RATECARD LEVEL">RATECARD LEVEL</mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                  </div>

                  <div class="row" *ngIf="(commandment.errors?.required && commandment.touched)">
                    <div class="col-lg-6 col-md-6  "></div>
                    <div class="col-lg-6 col-md-6  ">
                      <p *ngIf="(commandment.errors?.required && commandment.touched)" class="redMark">Required !</p>
                    </div>
                  </div>

                </div>
              </div>
            </div>
            <div style="margin-top: 3%;" *ngxPermissionsOnly="['RATE CARD_CREATE','RATE CARD_UPDATE']">
              <mat-accordion>
                <div class="example-button-row text-center" style="margin-top: 2%">
                  <button id="rateCardDraftButton" *ngIf="!isCopyRateCard" class="btn1" mat-raised-button color="primary" type="submit"
                  (click)="postRateCardDetail('save')" [disabled]="!fRatecard.form.valid">Save and Create New Rate Card</button>
                  <button id="rateCardNextButton" class="btn1" type="submit" mat-raised-button color="primary"
                    (click)="postRateCardDetail('continue')" [disabled]="!fRatecard.form.valid">Continue</button>
                </div>
              </mat-accordion>
            </div>
          </mat-card-content>
        </mat-expansion-panel>

        </form>

        <mat-expansion-panel id="box-shadow" [disabled]="isExpanded" #third (opened)="openCommercialSurface()" (closed)="closeCommercialSurface()" *ngxPermissionsOnly="['COMMERCIAL_READ']">
          <mat-expansion-panel-header style="cursor: pointer;" (click)="getCommercialDetail(false)">
            <img class="rcIcon" [src]="third.expanded ? '/assets/images/com_green.png': '/assets/images/com_gray.png'" alt="commercial"> Commercial {{serviceOfferingName}}
          </mat-expansion-panel-header>
          <mat-card-content>
            <!-- boxes -->
            <form name="commSurface" (ngSubmit)="fCommercial.form.valid" #fCommercial="ngForm" novalidate *ngxPermissionsOnly="['COMMERCIAL_READ']">
            <div class="commercialboxflex">
              <div class="flexproperty" *ngIf="commercial.length>0" style="margin-top: -.3rem !important;">
                <div *ngFor="let data of commercial">
                  <div (click)="getCommercialDetailbyId(data.id)" [ngClass]="{
                    'commercialbox1': ((selectedId == data.id)),
                    'commercialbox3': (!data.oldComm && isCopyRateCard),
                    'commercialbox': (selectedId != data.id)
                    }" style="margin-right: 1rem; cursor: pointer;">
                    <div class="rate_card_container">
                      <em *ngxPermissionsOnly="['COMMERCIAL_CREATE']" class="material-icons deleteIcon1" (click)="deleteCommercialDetailbyId(data.id)">delete</em>
                      <h6 style="cursor: pointer;">{{data.id}}</h6>
                      <mat-divider id="tileLine"></mat-divider>
                      <p *ngIf="data.chargeByName.length>13" class="card_minor_text to_upper_case heading_bold" [matTooltip]="data.chargeByName | uppercase">{{data.chargeByName}}</p>
                      <p *ngIf="data.chargeByName.length<13" class="card_minor_text to_upper_case heading_bold" >{{data.chargeByName}}</p>
                      <P *ngIf="data.prdctCtgy.length<13" class="card_minor_text to_upper_case">PCT: {{data.prdctCtgy}}</P>
                      <P *ngIf="data.prdctCtgy.length>13" class="card_minor_text to_upper_case" [matTooltip]="data.prdctCtgy">PCT: {{data.prdctCtgy}}</P>
                    </div>
                  </div>
                </div>
                <div *ngIf="!isCopyRateCard" class="commercialbox2" style="margin-right: 1rem;" (click)="getCommercialDetailbyId('')">
                  <em style="color: #27AE60; font-size: 8.5rem; cursor: pointer;" 
                    class="material-icons addNewButton" id="addCommercialSurface" *ngxPermissionsOnly="['COMMERCIAL_CREATE']">add</em>
                  <p class="addNewText" *ngxPermissionsOnly="['COMMERCIAL_CREATE']">Add New</p>
                </div>
              </div>
              <div class="flexproperty" *ngIf="commercial.length==0">
              <div *ngIf="!isCopyRateCard" class="commercialbox2" style="margin-top: 0.7rem; margin-right: 1rem;" (click)="getCommercialDetailbyId('')">
                <em style="color: #27AE60; font-size: 8.5rem; cursor: pointer;" 
                  class="material-icons addNewButton" id="addCommercialSurface" *ngxPermissionsOnly="['COMMERCIAL_CREATE']">add</em>
                <p class="addNewText" *ngxPermissionsOnly="['COMMERCIAL_CREATE']">Add New</p>
              </div>
              </div>

          <!--  -->
            </div>
            <!-- end boxes -->

            <!-- content -->
            <div *ngIf="showCommercialData">
            
              <div class="row">
                <div class="row margintop20" >
                  <div class="col-lg-6   col-md-6">
                  <div class="col-lg-4 col-md-4 label-text " >Rate Type<span class="redMark"> *</span></div>
                  <div class="col-lg-8 col-md-8 label-text-value paddingleft9">
                    <mat-radio-group style="padding-left: 1rem !important;" *ngFor="let type of rateTypes" class="example-radio-group"
                      name="rateType" [(ngModel)]="CommercialDataModel.rateType">
                      <mat-radio-button class="example-radio-button" [value]="type.value">
                        {{type.value}}
                      </mat-radio-button>
                    </mat-radio-group>
                  </div>
                </div>
                <div class="col-lg-2   col-md-2"></div>
                <div class="col-lg-4   col-md-4">
                  <div class="col-lg-6 col-md-6 label-text">Charge By<span class="redMark"> *</span></div>
                  <div class="col-lg-6 col-md-6 label-text-value">
                    <mat-form-field appearance="outline" style="width: 95%;">
                      <mat-select disableOptionCentering panelClass="creditSelect2" #chargeBy='ngModel' required name="lkpChrgById" [(ngModel)]="CommercialDataModel.lkpChrgById" (selectionChange)="changeChargeBy(CommercialDataModel.lkpChrgById); pricingParamData(true);clearingValues()">
                        <mat-option *ngFor="let item of ReferenceDataModel.chargeByList | sortBy:'asc':'descr'" [value]="item.id" selected 
                        [matTooltip]="item.descr" [matTooltipDisabled]="item.descr.length<25" matTooltipPosition="above">
                          {{item.descr}}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <app-validation-msg *ngIf="(chargeBy.errors?.required && (chargeBy.touched || fCommercial.submitted ))" [msg]="'Required !'"></app-validation-msg>
                  </div>
                </div>            
                </div>

                <div class="row">
                  <div class="col-lg-4   col-md-4">
                    <div class="col-lg-6 col-md-6 label-text">GST Flag<span class="redMark"> *</span></div>
                    <div class="col-lg-6 col-md-6 label-text-value ">
                      <mat-radio-group style="padding-left: 1rem !important;" *ngFor="let season of gst; trackBy: trackById" class="example-radio-group"
                        name="gstinFlag" [(ngModel)]="CommercialDataModel.gstinFlag">
                        <mat-radio-button class="example-radio-button" [value]="season.id">
                          {{season.value}}
                        </mat-radio-button>
                      </mat-radio-group>
                    </div> 
                    <div *ngIf="CommercialDataModel.gstinFlag==1">
                      <div class="col-lg-6 col-md-6 label-text">GST Type<span class="redMark"> *</span></div>
                      <div class="col-lg-6 col-md-6 label-text-value">
                        <mat-form-field appearance="outline">
                          <mat-select disableOptionCentering panelClass="creditSelect2" panelClass="creditSelect2" #gstType='ngModel' required name="gstTypeId" [(ngModel)]="CommercialDataModel.gstTypeId">
                            <mat-option *ngFor="let item of ReferenceDataModel.gstTypeList | sortBy:'asc':'gstType'" [value]="item.id" 
                            [matTooltip]="item.gstType" [matTooltipDisabled]="item.gstType.length<25" matTooltipPosition="above">
                              {{item.gstType}}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                        <app-validation-msg class="displayBlock" *ngIf="(gstType.errors?.required && (gstType.touched || fCommercial.submitted))" [msg]="'Required !'"></app-validation-msg>
                      </div>
                    </div>  
                    <div *ngIf="CommercialDataModel.lkpChrgByPiece">
                      <div class="col-lg-6 col-md-6 label-text margintop">Product List<span class="redMark"> *</span></div>
                      <div class="col-lg-6 col-md-6 label-text-value margintop">
                        <mat-form-field appearance="outline" >
                          <mat-select disableOptionCentering panelClass="multiSelect" (blur)="selectedProductTouch()" required placeholder="select" [formControl]="toppings" multiple name="toppingId">
                            <mat-option *ngFor="let topping of productList" [value]="topping.id"
                            #tooltip="matTooltip"
                            matTooltip="For product with differents Rate create a new commercial"
                            matTooltipPosition="right" (click)="selectedProduct(toppings.value)">{{topping.prdctName}}</mat-option>
                          </mat-select>
                        </mat-form-field>
                        <app-validation-msg class="displayBlock" *ngIf='prdListChk' [msg]="'Required !'"></app-validation-msg>
                      </div>

                    </div> 
                    <div>
                      <div class="col-lg-6 col-md-6 label-text">Slab Required<span class="redMark"> *</span></div>
                      <div class="col-lg-6 col-md-6 label-text-value ">
                        <mat-radio-group style="padding-left: 1rem !important;" *ngFor="let season of gst" class="example-radio-group"
                          name="slabFlag" [(ngModel)]="CommercialDataModel.slabFlag" (change)="slabHandleforZonal(season.value)">
                          <mat-radio-button class="example-radio-button" [value]="season.id" [checked]=season.checked>
                            {{season.value}}
                          </mat-radio-button>
                        </mat-radio-group>  
                      </div>
                    </div>                                    
                  </div>
                  <div class="col-lg-4   col-md-4"></div>
                  <div class="col-lg-4   col-md-4">
                    <div >
                      <div class="col-lg-6 col-md-6 label-text ">Product Category<span class="redMark"> *</span></div>
                      <div class="col-lg-6 col-md-6 label-text-value ">
                        <mat-form-field appearance="outline" style="width: 95%;">
                          <mat-select disableOptionCentering panelClass="creditSelect2 creditNgxSelect" #prductCate='ngModel' required name="prdctCtgyId" 
                          [(ngModel)]="CommercialDataModel.prdctCtgyId" (selectionChange)="productListData()" (blur)="scrollActiveValue()">
                          <ngx-mat-select-search [(ngModel)]="searchCtrlPrdct" [placeholderLabel]="'Search...'"
                            [noEntriesFoundLabel]="'Not found'" name="search">
                            <mat-icon class="mat-select-search-custom-header-content mat_ngx_select_search">search</mat-icon>
                          </ngx-mat-select-search>
                            <mat-option *ngFor="let item of (ReferenceDataModel.productCategoryList | stringFilter:searchCtrlPrdct:'prdctCtgy') | sortBy:'asc':'prdctCtgy'" [value]="item.id"
                            [matTooltip]="item.prdctCtgy | uppercase" matTooltipPosition="above" [matTooltipDisabled]="item.prdctCtgy.length<25">
                              {{item.prdctCtgy}}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                        <app-validation-msg class="displayBlock" *ngIf="(prductCate.errors?.required && (prductCate.touched || fCommercial.submitted))" [msg]="'Required !'"></app-validation-msg>

                      </div>
                    </div>
                    <div  *ngIf="!CommercialDataModel.lkpChrgByWeight">
                      <div class="col-lg-6 col-md-6 label-text margintop">Packaging Type<span class="redMark"> *</span></div>
                      <div class="col-lg-6 col-md-6 label-text-value margintop">
                        <mat-form-field appearance="outline" style="width: 95%;">
                          <mat-select disableOptionCentering panelClass="creditSelect2" #packingType='ngModel' required name="lkpPackTypeId" [(ngModel)]="CommercialDataModel.lkpPackTypeId">
                            <mat-option *ngFor="let item of ReferenceDataModel.packagingTypeList | sortBy:'asc':'descr'" [value]="item.id"
                            [matTooltip]="item.descr" [matTooltipDisabled]="item.descr.length<21" matTooltipPosition="above">
                              {{item.descr}}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                        <app-validation-msg class="displayBlock" *ngIf="(packingType.errors?.required && (packingType.touched || fCommercial.submitted))" [msg]="'Required !'"></app-validation-msg>

                      </div>
                    </div>
                    <div  *ngIf="!CommercialDataModel.lkpChrgByWeight">
                      <div class="col-lg-6 col-md-6 label-text margintop">Packaging Alias Name<span class="redMark"> *</span></div>
                      <div class="col-lg-6 col-md-6 label-text-value margintop">
                      
                        <mat-form-field appearance="outline" style="height: 2.7rem; width: 95%;" id="datepick">
                          <input #packigAlias='ngModel' required  maxlength="30" alphanumeric matInput  autocomplete="true" placeholder="Default" name="packAlias" [(ngModel)]="CommercialDataModel.packAlias">
                        </mat-form-field>
                        <app-validation-msg class="displayBlock" *ngIf="(packigAlias.errors?.required && (packigAlias.touched || fCommercial.submitted))" [msg]="'Required !'"></app-validation-msg>
                      </div>
                    </div>
                  </div>
                </div>           
     
                <div class="row">
                  <div class="col-lg-4   col-md-4">
                    <div *ngIf="CommercialDataModel.slabFlag==1">
                      <div class="col-lg-6 col-md-6 label-text">Slab Protection Type<span class="redMark"> *</span></div>
                      <div class="col-lg-6 col-md-6 label-text-value">
                        <mat-form-field appearance="outline" id="datepick">
                          <mat-select disableOptionCentering panelClass="creditSelect2" #slabProtectionType='ngModel' required name="lkpSlabProtectionId" [(ngModel)]="CommercialDataModel.lkpSlabProtectionId"
                          (selectionChange)="changeSlabProtion()">
                            <mat-option *ngFor="let item of ReferenceDataModel.slabProtectTypeList | sortBy:'asc':'descr'" [value]="item.id"
                            [matTooltip]="item.descr" [matTooltipDisabled]="item.descr.length<25" matTooltipPosition="above">
                              {{item.descr}}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                        <app-validation-msg  class="displayBlock" *ngIf="(slabProtectionType.errors?.required && (slabProtectionType.touched || fCommercial.submitted))" [msg]="'Required '"></app-validation-msg>

                      </div>
                    </div>
                  </div>
                  <div class="col-lg-4   col-md-4"></div>
                  <div class="col-lg-4   col-md-4"></div>
                </div>
                <div class="col-lg-6 col-md-6  ">
                  <div class="row" >
                    </div>
                  </div>
                <div class="col-lg-2 col-md-2  "></div>
                <div class="col-lg-4 col-md-4  " style="width: 26.333333%;">
                  <div class="col-lg-6 col-md-6"></div>
                  <div class="col-lg-6 col-md-6"></div>
                  <div class="row" >
                  </div>
                </div>
              </div>
            
            <hr id="collapsedivider">
            <!-- Zonal Rate Card -->
            <div >
            <h5 class="zonalheading">Zonal Rate Group (Rate {{quantityOfCharge}} )</h5>

            <form name="zonalSlab" (ngSubmit)="fZonalSlab.form.valid" #fZonalSlab="ngForm" novalidate>
            <div >
              <div class="col-lg-12 col-md-12 commercialSlab-container">
                <div class="row" >
                  <div class="col-lg-1 col-md-1   zonalheadingbar">ZONAL GROUP</div>
                  <div class="col-lg-1 col-md-1   zonalheadingbar" *ngIf="CommercialDataModel.slabFlag==0">RATE</div>
                  <div *ngIf="CommercialDataModel.slabFlag==0" class="col-lg-1 col-md-1   zonalheadingbar">MINIMUM FREIGHT</div>
                  <!-- slab 1 -->
                  <div *ngIf="CommercialDataModel.slabFlag==1">
                    <div class="col-lg-2 col-md-2  " style="width: 15%; padding: 0 !important;"
                      *ngIf="CommercialDataModel.ZonalSlabCounter==1 || CommercialDataModel.ZonalSlabCounter>1">
                      <div class="col-lg-6 col-md-6  ">
                        <div class="row" id="contentInside">
                          <div class="col-lg-12 col-md-12 zonalheadingbar1">SLAB</div>
                        </div>
                        <div class="row" id="contentInside">
                          <div class="col-lg-12 col-md-12 zonalheadingbar1" (click)="toggle(zmslabto1)"
                            style="padding: 0 !important;">
                            <input maxlength="5" autocomplete="true" name="zmslabto1" autocomplete="true"
                              autocomplete="true" class="dropdown disabled_input" id="zonal-input" placeholder="0-{{zmslabto1}}"
                              *ngIf="!(show)">
                            <div class="dropdown" *ngIf="show">
                              <button class="btn btn-success commercialButton" type="submit" (click)="addSlabVal1()">
                                SUBMIT</button>
                            </div>
                          </div>
                          <!-- hover  -->
                          <div class="col-lg-12 col-md-122 hoverDisplay" *ngIf="show">
                            <div class="col-lg-4 col-md-4   zonalheadingbar1 from"><input type="number" maxlength="5"
                                autocomplete="true" name="zmslabfrom1" autocomplete="number" autocomplete="true" id="zonal-input1"
                                readonly placeholder="{{zmslabfrom1}}" [(ngModel)]="zmslabfrom1"></div>
                            <div class="col-lg-4 col-md-4   zonalheadingbar1 to">To</div>
                            <div class="col-lg-4 col-md-4   zonalheadingbar1 three"><input type="number" maxlength="5"
                                autocomplete="true" name="zmslabto1" autocomplete="number" autocomplete="true" id="zonal-input1"
                                [(ngModel)]="zmslabto1" min="1"></div>
                          </div>
                          <!-- Hover -->
                        </div>
                      </div>
                      <div class="col-lg-6 col-md-6  ">
                        <div class="row" id="contentInside">
                          <div class="col-lg-12 col-md-12 zonalheadingbar">MINIMUM AMOUNT</div>
                        </div>
                      </div>
                    </div>
                    <!-- end slab1 -->
                    <!-- slab2 -->
                    <div class="col-lg-2 col-md-2  " style="width: 15%;padding: 0 !important;"
                      *ngIf="CommercialDataModel.ZonalSlabCounter==2 || CommercialDataModel.ZonalSlabCounter>2">
                      <div class="col-lg-6 col-md-6  ">
                        <div class="row" id="contentInside">
                          <div class="col-lg-12 col-md-12 zonalheadingbar1">SLAB</div>
                        </div>
                        <div class="row" id="contentInside">
                          <div class="col-lg-12 col-md-12 zonalheadingbar1" (click)="toggleArray(zmslabto2)"
                            style="padding: 0 !important;">
                            <input name="zmslabfrom2" autocomplete="true" autocomplete="true" maxlength="5"
                              autocomplete="true" class="dropdown disabled_input" id="zonal-input" placeholder="{{zmslabfrom2}}-{{zmslabto2}}"
                              *ngIf="!(showArray)">
                            <div class="dropdown" *ngIf="showArray">
                              <button class="btn btn-success commercialButton" type="submit" (click)="addSlabVal2()">SUBMIT</button>
                            </div>
                          </div>
                          <!-- hover  -->
                          <div class="col-lg-12 col-md-122 hoverDisplay" *ngIf="showArray">
                            <div class="col-lg-4 col-md-4   zonalheadingbar1 from"><input maxlength="5" type="number"
                                autocomplete="true" name="zmslabfrom2" autocomplete="number" autocomplete="true" id="zonal-input1"
                                readonly placeholder="{{zmslabfrom2}}" [(ngModel)]="zmslabfrom2"></div>
                            <div class="col-lg-4 col-md-4   zonalheadingbar1 to">To</div>
                            <div class="col-lg-4 col-md-4   zonalheadingbar1 three"><input maxlength="5" type="number"
                                autocomplete="true" name="zmslabto2" autocomplete="number" autocomplete="true" id="zonal-input1"
                                [(ngModel)]="zmslabto2" min="{{zmslabfrom2}}"></div>
                          </div>
                          <!--end of hover  -->
                        </div>
                      </div>
                      <div>
                        <div class="col-lg-6 col-md-6  ">
                          <div class="row" id="contentInside">
                            <div class="col-lg-12 col-md-12 zonalheadingbar">MINIMUM AMOUNT</div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- slab3 -->
                    <div class="col-lg-2 col-md-2  " style="width: 15%;padding: 0 !important;"
                      *ngIf="CommercialDataModel.ZonalSlabCounter==3 || CommercialDataModel.ZonalSlabCounter>3">
                      <div class="col-lg-6 col-md-6  ">
                        <div class="row" id="contentInside">
                          <div class="col-lg-12 col-md-12 zonalheadingbar1">SLAB</div>
                        </div>
                        <div class="row" id="contentInside">
                          <div class="col-lg-12 col-md-12 zonalheadingbar1" (click)="toggleArray2(zmslabto3)"
                            style="padding: 0 !important;">
                            <input name="zmslabfrom3" autocomplete="true" maxlength="5" autocomplete="true" class="dropdown disabled_input"
                              id="zonal-input" placeholder="{{zmslabfrom3}}-{{zmslabto3}}" *ngIf="!(showArray2)">
                            <div class="dropdown" *ngIf="showArray2">
                              <button class="btn btn-success commercialButton" type="submit" (click)="addSlabVal3()">SUBMIT</button></div>
                          </div>
                          <!-- hover  -->
                          <div class="col-lg-12 col-md-122 hoverDisplay" *ngIf="showArray2">
                            <div class="col-lg-4 col-md-4   zonalheadingbar1 from"><input maxlength="5" type="number"
                                name="zmslabfrom3" autocomplete="number" autocomplete="true" id="zonal-input1" readonly
                                placeholder="{{zmslabfrom3}}" [(ngModel)]="zmslabfrom3"></div>
                            <div class="col-lg-4 col-md-4   zonalheadingbar1 to">To</div>
                            <div class="col-lg-4 col-md-4   zonalheadingbar1 three"><input maxlength="5" type="number"
                                name="zmslabto3" autocomplete="number" autocomplete="true" id="zonal-input1" [(ngModel)]="zmslabto3"
                                min="{{zmslabfrom3}}"></div>
                          </div>
                          <!--end of hover  -->
                        </div>
                      </div>
                  
                      <div>
                        <div class="col-lg-6 col-md-6  ">
                          <div class="row" id="contentInside">
                            <div class="col-lg-12 col-md-12 zonalheadingbar">MINIMUM AMOUNT</div>
                          </div>
                        </div>
                      </div>
                    </div>
                  
                    <!-- <slab 4 starts here> -->
                    <div class="col-lg-2 col-md-2  " style="width: 15%;padding: 0 !important;"
                      *ngIf="CommercialDataModel.ZonalSlabCounter==4 || CommercialDataModel.ZonalSlabCounter>4">
                      <div class="col-lg-6 col-md-6  ">
                        <div class="row" id="contentInside">
                          <div class="col-lg-12 col-md-12 zonalheadingbar1">SLAB</div>
                        </div>
                        <div class="row" id="contentInside">
                          <div class="col-lg-12 col-md-12 zonalheadingbar1" (click)="toggleArray3(zmslabto4)"
                            style="padding: 0 !important;">
                            <input name="zmslabfrom4" autocomplete="true" maxlength="5" autocomplete="true" class="dropdown disabled_input"
                              id="zonal-input" disabled placeholder="{{zmslabfrom4}}-{{zmslabto4}}" *ngIf="!(showArray3)">
                            <div class="dropdown" *ngIf="showArray3">
                              <button class="btn btn-success commercialButton" type="submit" (click)="addSlabVal4()">SUBMIT</button></div>
                          </div>
                          <!-- hover  -->
                          <div class="col-lg-12 col-md-122 hoverDisplay" *ngIf="showArray3">
                            <div class="col-lg-4 col-md-4   zonalheadingbar1 from"><input maxlength="5" type="number"
                                name="zmslabfrom4" autocomplete="number" autocomplete="true" id="zonal-input1" readonly
                                placeholder="{{zmslabfrom4}}" [(ngModel)]="zmslabfrom4"></div>
                            <div class="col-lg-4 col-md-4   zonalheadingbar1 to">To</div>
                            <div class="col-lg-4 col-md-4   zonalheadingbar1 three"><input maxlength="5" type="number"
                                name="zmslabto4" autocomplete="number" autocomplete="true" id="zonal-input1" [(ngModel)]="zmslabto4"
                                min="{{zmslabfrom4}}" ></div>
                          </div>
                          <!--end of hover  -->
                        </div>
                      </div>
                  
                      <div>
                        <div class="col-lg-6 col-md-6  ">
                          <div class="row" id="contentInside">
                            <div class="col-lg-12 col-md-12 zonalheadingbar">MINIMUM AMOUNT</div>
                          </div>
                        </div>
                      </div>
                    </div>
                  
                    <!-- <slab 4 ends here > -->

                    <!-- <slab 5 starts here> -->
                    <div class="col-lg-2 col-md-2  " style="width: 15%;padding: 0 !important;"
                      *ngIf="CommercialDataModel.ZonalSlabCounter==5">
                      <div class="col-lg-6 col-md-6  ">
                        <div class="row" id="contentInside">
                          <div class="col-lg-12 col-md-12 zonalheadingbar1">SLAB</div>
                        </div>
                        <div class="row" id="contentInside">
                          <div class="col-lg-12 col-md-12 zonalheadingbar1" (click)="toggleArray4(zmslabto5)"
                            style="padding: 0 !important;">
                            <input name="zmslabfrom5" autocomplete="true" maxlength="5" autocomplete="true" class="dropdown disabled_input"
                              id="zonal-input" placeholder="{{zmslabfrom5}}-{{zmslabto5}}" *ngIf="!(showArray4)">
                            <div class="dropdown" *ngIf="showArray4">
                              <button class="btn btn-success commercialButton" type="submit" (click)="addSlabVal5()">SUBMIT</button></div>
                          </div>
                          <!-- hover  -->
                          <div class="col-lg-12 col-md-122 hoverDisplay" *ngIf="showArray4">
                            <div class="col-lg-4 col-md-4   zonalheadingbar1 from"><input maxlength="5" type="number"
                                name="zmslabfrom5" autocomplete="number" autocomplete="true" id="zonal-input1" readonly
                                placeholder="{{zmslabfrom5}}" [(ngModel)]="zmslabfrom5"></div>
                            <div class="col-lg-4 col-md-4   zonalheadingbar1 to">To</div>
                            <div class="col-lg-4 col-md-4   zonalheadingbar1 three"><input maxlength="5" type="number"
                                name="zmslabto5" autocomplete="number" autocomplete="true" id="zonal-input1" [(ngModel)]="zmslabto5"
                                min="{{zmslabfrom5}}" max="99999"></div>
                          </div>
                          <!--end of hover  -->
                        </div>
                      </div>
                  
                      <div>
                        <div class="col-lg-6 col-md-6  ">
                          <div class="row" id="contentInside">
                            <div class="col-lg-12 col-md-12 zonalheadingbar">MINIMUM AMOUNT</div>
                          </div>
                        </div>
                      </div>
                    </div>                  
                    <!-- <slab 5 ends here > -->
                  </div>

                <!-- Zonal Rate Add Icon -->
                <div *ngIf="!(CommercialDataModel.stopZonalSlab)">
                  <div class="col-lg-1 col-md-1   zonalheadingbar"  style="width: 4%;"
                    *ngIf="CommercialDataModel.slabFlag==1">
                    <button mat-icon-button id="plusicon1" [disabled]="!fZonalSlab.form.valid"
                      (click)="addFieldColumn()">
                      <mat-icon class="text-center">add_circle</mat-icon>
                    </button>
                  </div>
                </div>
                <div>
                  <div class="col-lg-1 col-md-1   zonalheadingbar"  style="width: 4%;"
                    *ngIf="CommercialDataModel.slabFlag==1 && CommercialDataModel.ZonalSlabCounter>1">
                    <button mat-icon-button id="plusicon1" 
                      (click)="removeFieldColumn()">
                      <mat-icon class="text-center">remove_circle</mat-icon>
                    </button>
                  </div>
                </div>
                  
                </div>
              </div>
            </div>


            <div>
              <div class=" margintop10 col-lg-12 col-md-12 commercialSlab-container"
                *ngFor="let item of CommercialDataModel.zmPrice | sortBy:'asc':'name'; let i = index">
                <div class="row">
                  <div class="col-lg-1 col-md-1   label-text">{{item.name}}</div>
                  <div class="col-lg-1 col-md-1   commercial-padding" *ngIf="CommercialDataModel.slabFlag==0">
                    <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                      <input required #priceOne='ngModel'  matInput autocomplete="true" [(ngModel)]="item.price"
                        numeric decimals="2" maxlength={{maxLength}} name="priceOne-{{i}}">
                    </mat-form-field>
                    <span *ngIf="(priceOne.errors?.required && (priceOne.touched || fCommercial.submitted))" class="hasErrorMsgCom">
                      Required&nbsp;!</span>
                    <span *ngIf="(((priceOne.errors?.greaterZero) || ((priceOne.errors?.greaterZero) && fCommercial.submitted)) && (!priceOne.errors?.required))"
                      class="hasErrorMsgCom">Greater Than 0&nbsp;!</span>
                    <span *ngIf="(priceOne.errors?.isNumeric && priceOne.touched && !priceOne.errors?.required && !priceOne.errors?.greaterZero)"
                      class="hasErrorMsgCom">Invalid !</span>
                  </div>
                  <div *ngIf="CommercialDataModel.slabFlag==0" class="col-lg-1 col-md-1  ">
                    <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                      <input required #minFreightOne='ngModel' matInput autocomplete="true"
                        [(ngModel)]="item.minFreight" numeric decimals="2" maxlength="8" name="minFreightOne-{{i}}">
                    </mat-form-field>
                    <span *ngIf="(minFreightOne.errors?.required && (minFreightOne.touched || fCommercial.submitted))"
                      class="hasErrorMsgCom">
                      Required&nbsp;!
	  </span>
                    <span *ngIf="(minFreightOne.errors?.isNumeric && minFreightOne.touched && !minFreightOne.errors?.required)"
                      class="hasErrorMsgCom">
                        Invalid !
                    </span>
                  </div>
                  <!-- <----slab 1 ----->
                  <div *ngIf="CommercialDataModel.slabFlag==1">

                    <div class="col-lg-2 col-md-2  " style="width: 15%;"
                      *ngIf="CommercialDataModel.ZonalSlabCounter==1 || CommercialDataModel.ZonalSlabCounter>1">
            
                      <!-- Zonal Slab Required Field-->
                      <div class="col-lg-6 col-md-6   commercial-padding">
                        <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                          <input matInput autocomplete="true"  #slabPrice1='ngModel' required [(ngModel)]="item.price"
                            name="slabPrice1-{{i}}" numeric decimals="2" maxlength={{maxLength}}>
                        </mat-form-field>
                        <span *ngIf="(slabPrice1.errors?.required && (slabPrice1.touched || fCommercial.submitted))"
                          class="hasErrorMsgCom">
                          Required&nbsp;!
                        </span>
                        <span
                          *ngIf="(((slabPrice1.errors?.greaterZero) || ((slabPrice1.errors?.greaterZero) && fCommercial.submitted)) && (!slabPrice1.errors?.required))"
                          class="hasErrorMsgCom">
                          Greater Than 0&nbsp;!</span>
                        <span *ngIf="(slabPrice1.errors?.isNumeric && slabPrice1.touched && !slabPrice1.errors?.required && !slabPrice1.errors?.greaterZero)"
                          class="hasErrorMsgCom">
                            Invalid !
                        </span>
                      </div>
                      <div class="col-lg-6 col-md-6  ">
                        <div class="row" id="contentInside">
                          <div class="col-lg-12 col-md-12 commercial-padding">
                            <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                              <input matInput autocomplete="true" #slabMinAmt1='ngModel' required
                                [(ngModel)]="item.minFreight" name="slabMinAmt1-{{i}}" numeric decimals="2"
                                (input)="updateZmPriceMinF()" maxlength="8">
                            </mat-form-field>
                            <span *ngIf="(slabMinAmt1.errors?.required && (slabMinAmt1.touched || fCommercial.submitted))"
                              class="hasErrorMsgCom">
                              Required&nbsp;!
  </span>
                            <span *ngIf="(slabMinAmt1.errors?.isNumeric && slabMinAmt1.touched && !slabMinAmt1.errors?.required)"
                              class="hasErrorMsgCom">
                                Invalid !
                            </span>
                          </div>
                        </div>
                      </div>
                    </div>

                  <!-- <----slab----->
                    <div class="col-lg-2 col-md-2  " style="width: 15%;"
                      *ngIf="CommercialDataModel.ZonalSlabCounter==2 || CommercialDataModel.ZonalSlabCounter>2">
            
                      <!-- Zonal Slab Required Field -->
                      <div class="col-lg-6 col-md-6   commercial-padding">
                        <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                          <input matInput autocomplete="true"  #slabPrice2='ngModel' required
                            [(ngModel)]="item.price2" name="price2-{{i}}" numeric decimals="2" maxlength={{maxLength}}>
                        </mat-form-field>
                        <span *ngIf="(slabPrice2.errors?.required && (slabPrice2.touched || fCommercial.submitted))"
                          class="hasErrorMsgCom">
                          Required&nbsp;!
                        </span>
                        <span
                          *ngIf="(((slabPrice2.errors?.greaterZero) || ((slabPrice2.errors?.greaterZero) && fCommercial.submitted)) && (!slabPrice2.errors?.required))"
                          class="hasErrorMsgCom">
                           Greater Than 0&nbsp;!
  </span>
                        <span *ngIf="(slabPrice2.errors?.isNumeric && slabPrice2.touched && !slabPrice2.errors?.required && !slabPrice2.errors?.greaterZero)"
                          class="hasErrorMsgCom">
                            Invalid !
                        </span>
                      </div>
                      <div class="col-lg-6 col-md-6  ">
                        <div class="row" id="contentInside">
                          <div class="col-lg-12 col-md-12 commercial-padding">
                            <mat-form-field  appearance="outline" style="height: 2.7rem; width: 100%;">
                              <input matInput autocomplete="true" #slabMinAmt2='ngModel' required
                                [(ngModel)]="item.minFreight2" name="minFreight2-{{i}}" numeric decimals="2"
                                [disabled]="isOptionBSelected" maxlength="8">
                            </mat-form-field>
                            <span *ngIf="(slabMinAmt2.errors?.required && (slabMinAmt2.touched || fCommercial.submitted))"
                              class="hasErrorMsgCom">
                              Required&nbsp;!
  </span>
                            <span *ngIf="(slabMinAmt2.errors?.isNumeric && slabMinAmt2.touched && !slabMinAmt2.errors?.required)"
                              class="hasErrorMsgCom">
                                Invalid !
                            </span>
                          </div>
                        </div>
                      </div>
                    </div>

                  <!-- <----slab 3 ----->
                    <div class="col-lg-2 col-md-2  " style="width: 15%;" *ngIf="CommercialDataModel.ZonalSlabCounter==3 || CommercialDataModel.ZonalSlabCounter>3">
            
                      <!-- Zonal Slab Required Field -->
                      <div class="col-lg-6 col-md-6   commercial-padding">
                        <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                          <input matInput autocomplete="true"  #slabPrice3='ngModel' required
                            [(ngModel)]="item.price3" name="price3-{{i}}" numeric decimals="2" maxlength={{maxLength}}>
                        </mat-form-field>
                        <span *ngIf="(slabPrice3.errors?.required && (slabPrice3.touched || fCommercial.submitted))"
                          class="hasErrorMsgCom">
                          Required&nbsp;!
                        </span>
                        <span
                          *ngIf="(((slabPrice3.errors?.greaterZero) || ((slabPrice3.errors?.greaterZero) && fCommercial.submitted)) && (!slabPrice3.errors?.required))"
                          class="hasErrorMsgCom">
                           Greater Than 0&nbsp;!
  </span>
                        <span *ngIf="(slabPrice3.errors?.isNumeric && slabPrice3.touched && !slabPrice3.errors?.required && !slabPrice3.errors?.greaterZero)"
                          class="hasErrorMsgCom">
                            Invalid !
                        </span>
                      </div>
                      <div class="col-lg-6 col-md-6  ">
                        <div class="row" id="contentInside">
                          <div class="col-lg-12 col-md-12 commercial-padding">
                            <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                              <input matInput autocomplete="true" #slabMinAmt3='ngModel' required
                                [(ngModel)]="item.minFreight3" name="minFreight3-{{i}}" numeric decimals="2"
                                [disabled]="isOptionBSelected" maxlength="8">
                            </mat-form-field>
                            <span *ngIf="(slabMinAmt3.errors?.required && (slabMinAmt3.touched || fCommercial.submitted))"
                              class="hasErrorMsgCom">
                              Required&nbsp;!
  </span>
                            <span *ngIf="(slabMinAmt3.errors?.isNumeric && slabMinAmt3.touched && !slabMinAmt3.errors?.required)"
                              class="hasErrorMsgCom">
                                Invalid !
                            </span>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- <slab 4 starts here > -->

                      <div class="col-lg-2 col-md-2  " style="width: 15%;" *ngIf="CommercialDataModel.ZonalSlabCounter==4 || CommercialDataModel.ZonalSlabCounter>4">
            
                        <!-- Zonal Slab Required Field -->
                        <div class="col-lg-6 col-md-6   commercial-padding">
                          <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                            <input matInput autocomplete="true"  #slabPrice4='ngModel' required
                              [(ngModel)]="item.price4" name="price4-{{i}}" numeric decimals="2" maxlength={{maxLength}}>
                          </mat-form-field>
                          <span *ngIf="(slabPrice4.errors?.required && (slabPrice4.touched || fCommercial.submitted))"
                            class="hasErrorMsgCom">
                            Required&nbsp;!
                          </span>
                          <span
                            *ngIf="(((slabPrice4.errors?.greaterZero) || ((slabPrice4.errors?.greaterZero) && fCommercial.submitted)) && (!slabPrice4.errors?.required))"
                            class="hasErrorMsgCom">
                             Greater Than 0&nbsp;!
 </span>
                          <span *ngIf="(slabPrice4.errors?.isNumeric && slabPrice4.touched && !slabPrice4.errors?.required && !slabPrice4.errors?.greaterZero)"
                            class="hasErrorMsgCom">
                              Invalid !
                          </span>
                        </div>
                        <div class="col-lg-6 col-md-6  ">
                          <div class="row" id="contentInside">
                            <div class="col-lg-12 col-md-12 commercial-padding">
                              <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                                <input matInput autocomplete="true" #slabMinAmt4='ngModel' required
                                  [(ngModel)]="item.minFreight4" name="minFreight4-{{i}}" numeric decimals="2"
                                  [disabled]="isOptionBSelected" maxlength="8">
                              </mat-form-field>
                              <span *ngIf="(slabMinAmt4.errors?.required && (slabMinAmt4.touched || fCommercial.submitted))"
                                class="hasErrorMsgCom">
                                Required&nbsp;!
  </span>
                              <span *ngIf="(slabMinAmt4.errors?.isNumeric && slabMinAmt4.touched && !slabMinAmt4.errors?.required)"
                                class="hasErrorMsgCom">
                                  Invalid !
                              </span>
                            </div>
                          </div>
                        </div>
                      </div>

                    <!-- <slab 4 ends here > -->



                    <!-- <slab 5 starts here > -->

                      
                      <div class="col-lg-2 col-md-2  " style="width: 15%;" *ngIf="CommercialDataModel.ZonalSlabCounter==5">
            
                        <!-- Zonal Slab Required Field -->
                        <div class="col-lg-6 col-md-6   commercial-padding">
                          <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                            <input matInput autocomplete="true"  #slabPrice5='ngModel' required
                              [(ngModel)]="item.price5" name="price5-{{i}}" numeric decimals="2" maxlength={{maxLength}}>
                          </mat-form-field>
                          <span *ngIf="(slabPrice5.errors?.required && (slabPrice5.touched || fCommercial.submitted))"
                            class="hasErrorMsgCom">
                            Required&nbsp;!
                          </span>
                          <span
                            *ngIf="(((slabPrice5.errors?.greaterZero) || ((slabPrice5.errors?.greaterZero) && fCommercial.submitted)) && (!slabPrice5.errors?.required))"
                            class="hasErrorMsgCom">
                             Greater Than 0&nbsp;!
  </span>
                          <span *ngIf="(slabPrice5.errors?.isNumeric && slabPrice5.touched && !slabPrice5.errors?.required && !slabPrice5.errors?.greaterZero)"
                            class="hasErrorMsgCom">
                              Invalid !
                          </span>
                        </div>
                        <div class="col-lg-6 col-md-6  ">
                          <div class="row" id="contentInside">
                            <div class="col-lg-12 col-md-12 commercial-padding">
                              <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                                <input matInput autocomplete="true" #slabMinAmt5='ngModel' required
                                  [(ngModel)]="item.minFreight5" name="minFreight5-{{i}}" numeric decimals="2" maxlength="8"
                                  [disabled]="isOptionBSelected">
                              </mat-form-field>
                              <span *ngIf="(slabMinAmt5.errors?.required && (slabMinAmt5.touched || fCommercial.submitted))"
                                class="hasErrorMsgCom">
                                Required&nbsp;!
  </span>
                              <span *ngIf="(slabMinAmt5.errors?.isNumeric && slabMinAmt5.touched && !slabMinAmt5.errors?.required)"
                                class="hasErrorMsgCom">
                                  Invalid !
                              </span>
                            </div>
                          </div>
                        </div>
                      </div>

                    <!-- <slab 4 ends here > -->


                  </div>
                  <!-- end slab-->
                </div>
              </div>
            </div>
          </form>
        </div>
           
            
            <!-- Custom Rate Master -->
                <!-- Custom Rate Mapping Add Icon -->
                <div class="col-md-12 paddingleftzero paddingtopthree" style="padding-bottom: 3rem !important; padding-top: 2rem !important">
                  <h5 class="zonalheading">Custom Rate Mapping
                  <button [disabled]="!fRateMapping.form.valid" mat-icon-button (click)="customRateGroup(); changeSlabProtion()" id="plusicon2" mat-card-avatar aria-label="Example icon">
                    <mat-icon >add_circle</mat-icon>
                  </button>
                </h5>
                <form name="rateMapping" (ngSubmit)="fRateMapping.form.valid" #fRateMapping="ngForm" novalidate 
                [ngClass]="CommercialDataModel.slabFlag==1 ? 'customScroll' : 'customScrollHide'"> 
            <div *ngIf="CommercialDataModel.zmCustomPrice.length>0">
              <div class="col-lg-12 col-md-12 commercialSlab-container"
                style="font-size: 1.5rem; padding-left: 0;"
                [ngClass]="CommercialDataModel.slabFlag==1 ? 'customeWidth' : 'customeMaxWidth'">
                <div class="col-lg-1 col-md-1 zonalheadingbar slab_width1">FROM TYPE</div>
                <div class="col-lg-1 col-md-1 zonalheadingbar slab_width1">TO TYPE</div>
                <div class="col-lg-1 col-md-1 zonalheadingbar slab_width1">FROM</div>
                <div class="col-lg-1 col-md-1 zonalheadingbar slab_width1">TO</div>
                <div class="col-lg-1 col-md-1 zonalheadingbar slab_width" *ngIf="CommercialDataModel.slabFlag==0">RATE</div>
                <div class="col-lg-1 col-md-1 zonalheadingbar slab_width" *ngIf="CommercialDataModel.slabFlag==0">MIN FREIGHT</div>
                <div *ngIf="CommercialDataModel.slabFlag==1">
              <div>
                <div class="col-lg-1 col-md-1   flex-direction slab_width" style="padding: 0 !important;">  
                  <div class="col-lg-12 col-md-1 zonalheadingbar1">SLAB</div>                    
                                <!-- hover  -->
                    <div class="col-lg-12 col-md-12 zonalheadingbar1"  style="padding: 0 !important;">
                      <input name="zmslabfrom1" numeric decimals="2" autocomplete="true"  autocomplete="true" class="dropdown"  id="zonal-input" disabled placeholder="{{zmslabfrom1}}-{{zmslabto1}}"> 
                      <div class="dropdown"></div>
                      </div>
                    <!-- Hover -->
                </div>
                <div>
                  <div class="col-lg-1 col-md-1   slab_width">                  
                    <div class="row" id="contentInside">
                      <div class="col-lg-12 col-md-12 zonalheadingbar">MINIMUM AMOUNT</div>                    
                    </div>                                 
                  </div> 
                  </div>
              </div>
              <div style="padding: 0 !important;" *ngIf="CommercialDataModel.ZonalSlabCounter==2 || CommercialDataModel.ZonalSlabCounter>2">
                <div class="col-lg-1 col-md-1   flex-direction slab_width">  
                  <div class="col-lg-12 col-md-1 zonalheadingbar1">SLAB</div>                    
                                <!-- hover  -->
                                <div class="col-lg-12 col-md-12 zonalheadingbar1"  style="padding: 0 !important;">
                                  <input name="zmslabfrom2" numeric decimals="2" autocomplete="true"  autocomplete="true" class="dropdown"  id="zonal-input" disabled placeholder="{{zmslabfrom2}}-{{zmslabto2}}"> 
                                  <div class="dropdown"></div>
                                  </div>
                    <!-- Hover -->
                </div>
                <div>
                  <div class="col-lg-1 col-md-1   slab_width">                  
                    <div class="row" id="contentInside">
                      <div class="col-lg-12 col-md-12 zonalheadingbar">MINIMUM AMOUNT</div>                    
                    </div>                                 
                  </div> 
                  </div>
              </div>
              <div style="padding: 0 !important;" *ngIf="CommercialDataModel.ZonalSlabCounter==3 || CommercialDataModel.ZonalSlabCounter>3">
                <div class="col-lg-1 col-md-1   flex-direction slab_width">  
                  <div class="col-lg-12 col-md-1 zonalheadingbar1">SLAB</div>                    
                                <!-- hover  -->
                                <div class="col-lg-12 col-md-12 zonalheadingbar1"  style="padding: 0 !important;">
                                  <input name="zmslabfrom3" numeric decimals="2" autocomplete="true"  autocomplete="true" class="dropdown"  id="zonal-input" disabled placeholder="{{zmslabfrom3}}-{{zmslabto3}}"> 
                                  <div class="dropdown"></div>
                                  </div>
                    <!-- Hover -->
                </div>
                <div>
                  <div class="col-lg-1 col-md-1   slab_width">                  
                    <div class="row" id="contentInside">
                      <div class="col-lg-12 col-md-12 zonalheadingbar">MINIMUM AMOUNT</div>                    
                    </div>                                 
                  </div> 
                  </div>
              </div>
              <div style="padding: 0 !important;" *ngIf="CommercialDataModel.ZonalSlabCounter==4 || CommercialDataModel.ZonalSlabCounter>4">
                <div class="col-lg-1 col-md-1   flex-direction slab_width">  
                  <div class="col-lg-12 col-md-1 zonalheadingbar1">SLAB</div>                    
                                <!-- hover  -->
                                <div class="col-lg-12 col-md-12 zonalheadingbar1"  style="padding: 0 !important;">
                                  <input name="zmslabfrom4" numeric decimals="2" autocomplete="true"  autocomplete="true" class="dropdown"  id="zonal-input" disabled placeholder="{{zmslabfrom4}}-{{zmslabto4}}"> 
                                  <div class="dropdown"></div>
                                  </div>
                    <!-- Hover -->
                </div>
                <div>
                  <div class="col-lg-1 col-md-1   slab_width">                  
                    <div class="row" id="contentInside">
                      <div class="col-lg-12 col-md-12 zonalheadingbar">MINIMUM AMOUNT</div>                    
                    </div>                                 
                  </div> 
                  </div>
              </div>
              <div style="padding: 0 !important;" *ngIf="CommercialDataModel.ZonalSlabCounter==5">
                <div class="col-lg-1 col-md-1   flex-direction slab_width">  
                  <div class="col-lg-12 col-md-1 zonalheadingbar1">SLAB</div>                    
                                <!-- hover  -->
                                <div class="col-lg-12 col-md-12 zonalheadingbar1"  style="padding: 0 !important;">
                                  <input name="zmslabfrom5" numeric decimals="2" autocomplete="true"  autocomplete="true" class="dropdown"  id="zonal-input" disabled placeholder="{{zmslabfrom5}}-{{zmslabto5}}"> 
                                  <div class="dropdown"></div>
                                  </div>
                    <!-- Hover -->
                </div>
                <div>
                  <div class="col-lg-1 col-md-1   slab_width">                  
                    <div class="row" id="contentInside">
                      <div class="col-lg-12 col-md-12 zonalheadingbar">MINIMUM AMOUNT</div>                    
                    </div>                                 
                  </div> 
                  </div>
              </div>
              </div>  
              </div>
            </div>

                <!-- Custom Rate Mapping Required Fields -->
            <div *ngFor="let field of CommercialDataModel.zmCustomPrice; let i = index">
              <div class="col-lg-12 col-md-12 margintop commercialSlab-container" [ngClass]="CommercialDataModel.slabFlag==1 ? 'customeWidth' : 'customeMaxWidth'">
                <div class="col-lg-1 col-md-1   slab_width1">
                  <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                    <mat-select disableOptionCentering panelClass="creditSelect2" #lkpSrcTypeId='ngModel' required  [(ngModel)]="field.lkpSrcTypeId" name="lkpSrcTypeId-{{i}}" (selectionChange)="addrByaddrType('src',field,true)">
                      <mat-option *ngFor="let item of ReferenceDataModel.srcDestList | sortBy:'asc':'descr'" [value]="item.id" 
                      [matTooltip]="item.descr" [matTooltipDisabled]="item.descr.length<13" matTooltipPosition="above">
                        {{item.descr}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                  <span *ngIf="(lkpSrcTypeId.errors?.required && (lkpSrcTypeId.touched || fCommercial.submitted))"
                    class="hasErrorMsgCom">
                    Required&nbsp;!
                  </span>
                </div>
                <div class="col-lg-1 col-md-1   slab_width1">
                  <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                      <mat-select disableOptionCentering panelClass="creditSelect2" #lkpDestTypeId='ngModel' required  [(ngModel)]="field.lkpDestTypeId" name="lkpDestTypeId-{{i}}" (selectionChange)="addrByaddrType('dest',field,true)">
                          <mat-option *ngFor="let item of ReferenceDataModel.srcDestList | sortBy:'asc':'descr'" [value]="item.id" 
                          [matTooltip]="item.descr" [matTooltipDisabled]="item.descr.length<13" matTooltipPosition="above">
                            {{item.descr}}
                          </mat-option>
                        </mat-select>
                  </mat-form-field>
                  <span *ngIf="(lkpDestTypeId.errors?.required && (lkpDestTypeId.touched || fCommercial.submitted))"
                    class="hasErrorMsgCom">
                    Required&nbsp;!
                  </span>
                </div>
                <!-- for source -->
                <div class="col-lg-1 col-md-1   slab_width1" *ngIf="!(field.lkpSrcTypeId)">
                  <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                    <mat-select disableOptionCentering panelClass="creditSelect2 creditNgxSelect" #srcId='ngModel' required [(ngModel)]="field.srcId" 
                    name="srcId-{{i}}" (blur)="scrollActiveValue()">
                    <ngx-mat-select-search [(ngModel)]="searchCtrlState8" [placeholderLabel]="'Search...'"
                      [noEntriesFoundLabel]="'Not found'" name="searchCtrlState8-{{i}}">
                      <mat-icon class="mat-select-search-custom-header-content mat_ngx_select_search">search</mat-icon>
                    </ngx-mat-select-search>
                      <mat-option *ngFor="let item of (stateAddr | stringFilter:searchCtrlState8:'stateName') | sortBy:'asc':'stateName'" [value]="item.id" 
                      [matTooltip]="item.stateName" [matTooltipDisabled]="item.stateName.length<13" matTooltipPosition="above">
                        {{item.stateName}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field> 
                  <span *ngIf="(srcId.errors?.required && (srcId.touched || fCommercial.submitted))"
                      class="hasErrorMsgCom">
                      Required&nbsp;!
                    </span>                              
              </div>
                <div class="col-lg-1 col-md-1   slab_width1" *ngIf="field.lkpSrcTypeName=='STATE'">
                  <a style="cursor: pointer;" (click)="openDialogStateSearch(field,'srcId',false)">
                    <span class="fa fa-search fa-lg" id="search-icon" style="left: 1.2rem !important;"></span>
                    <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                      <input class="pincode_input" #srcId='ngModel' required matInput  autocomplete="true" [(ngModel)]="field.stateNamesfrom" 
                       name="srcId-{{i}}" (keydown.enter)="openDialogStateSearch(field,'srcId',false)" readonly 
                       [matTooltip]="field.stateNamesfrom" [matTooltipDisabled]="!field || !field.stateNamesfrom || field.stateNamesfrom.length<13" matTooltipPosition="above">
                    </mat-form-field>
                    <span *ngIf="(srcId.errors?.required && (srcId.touched || fCommercial.submitted))"
                      class="hasErrorMsgCom">
                      Required&nbsp;!
                    </span>
                  </a>
                </div>
              <div class="col-lg-1 col-md-1   slab_width1" *ngIf="field.lkpSrcTypeName=='CITY'">
                <a style="cursor: pointer;" (click)="openDialogCitySearch(field,'srcId')">
                  <span class="fa fa-search fa-lg" id="search-icon" style="left: 1.2rem !important;"></span>
                  <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                    <input class="pincode_input" #srcId='ngModel' required matInput  autocomplete="true" [(ngModel)]="field.cityNamesfrom" 
                     name="srcId-{{i}}" (keydown.enter)="openDialogCitySearch(field,'srcId')" readonly
                     [matTooltip]="field.cityNamesfrom" [matTooltipDisabled]="!field || !field.cityNamesfrom || field.cityNamesfrom.length<13" matTooltipPosition="above">
                  </mat-form-field>
                  <span *ngIf="(srcId.errors?.required && (srcId.touched || fCommercial.submitted))"
                    class="hasErrorMsgCom">
                    Required&nbsp;!
                  </span>
                </a>
            </div>
            <div class="col-lg-1 col-md-1   slab_width1" *ngIf="field.lkpSrcTypeName=='PINCODE'">

                  <a style="cursor: pointer;" (click)="openDialogPincodeSearch(field,'srcId',false)">
                    <span class="fa fa-search fa-lg" id="search-icon" style="left: 1.2rem !important;"></span>
                    <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                      <input class="pincode_input" #srcId='ngModel' required matInput  autocomplete="true" [(ngModel)]="field.srcId" 
                       name="srcId-{{i}}" (keydown.enter)="openDialogPincodeSearch(field,'srcId',false)" readonly
                       [matTooltip]="field.srcId" [matTooltipDisabled]="!field || !field.srcId || field.srcId.length<16" matTooltipPosition="above">
                    </mat-form-field>
                    <span *ngIf="(srcId.errors?.required && (srcId.touched || fCommercial.submitted))"
                      class="hasErrorMsgCom">
                     Required&nbsp;!
                    </span>
                  </a>
              </div>

                <!-- for destination -->
                <div class="col-lg-1 col-md-1   slab_width1" *ngIf="!(field.lkpDestTypeId)">
                  <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                    <mat-select disableOptionCentering panelClass="creditSelect2" #destId='ngModel' required [(ngModel)]="field.destId" name="destId-{{i}}" >
                      <mat-option *ngFor="let item of stateAddr | sortBy:'asc':'stateName'" [value]="item.id" 
                      [matTooltip]="item.stateName" [matTooltipDisabled]="item.stateName.length<13" matTooltipPosition="above">
                        {{item.stateName}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                  <span *ngIf="(destId.errors?.required && (destId.touched || fCommercial.submitted))"
                      class="hasErrorMsgCom">
                      Required&nbsp;!
                    </span>
              </div>
                <div class="col-lg-1 col-md-1   slab_width1" *ngIf="field.lkpDestTypeName=='STATE'">
                  <a style="cursor: pointer;" (click)="openDialogStateSearch(field,'destId',false)">
                    <span class="fa fa-search fa-lg" id="search-icon" style="left: 1.2rem !important;"></span>
                    <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                      <input class="pincode_input" #destId='ngModel' required matInput  autocomplete="true" [(ngModel)]="field.stateNamesto" 
                      name="destId-{{i}}" (keydown.enter)="openDialogStateSearch(field,'destId',false)" readonly
                      [matTooltip]="field.stateNamesto" [matTooltipDisabled]="!field || !field.stateNamesto || field.stateNamesto.length<13" matTooltipPosition="above">
                    </mat-form-field>
                    <span *ngIf="(destId.errors?.required && (destId.touched || fCommercial.submitted))"
                      class="hasErrorMsgCom">
                      Required&nbsp;!
                    </span>
                  </a>
                </div>
              <div class="col-lg-1 col-md-1   slab_width1" *ngIf="field.lkpDestTypeName=='CITY'">
                <a style="cursor: pointer;" (click)="openDialogCitySearch(field,'destId')">
                  <span class="fa fa-search fa-lg" id="search-icon" style="left: 1.2rem !important;"></span>
                  <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                    <input class="pincode_input" #destId='ngModel' required matInput  autocomplete="true" [(ngModel)]="field.cityNamesto" 
                    name="destId-{{i}}" (keydown.enter)="openDialogPincodeSearch(field,'destId')" readonly
                    [matTooltip]="field.cityNamesto" [matTooltipDisabled]="!field || !field.cityNamesto || field.cityNamesto.length<13" matTooltipPosition="above">
                  </mat-form-field>
                  <span *ngIf="(destId.errors?.required && (destId.touched || fCommercial.submitted))"
                    class="hasErrorMsgCom">
                    Required&nbsp;!
                  </span>
                </a>
            </div>
               
                <div class="col-lg-1 col-md-1   slab_width1"  *ngIf="field.lkpDestTypeName=='PINCODE'">

                        <a style="cursor: pointer;" (click)="openDialogPincodeSearch(field,'destId',false)">
                          <span class="fa fa-search fa-lg" id="search-icon" style="left: 1.2rem !important;"></span>
                          <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                            <input class="pincode_input" #destId='ngModel' required matInput  autocomplete="true" [(ngModel)]="field.destId" 
                            name="destId-{{i}}" (keydown.enter)="openDialogPincodeSearch(field,'destId',false)" readonly
                            [matTooltip]="field.destId" [matTooltipDisabled]="!field || !field.destId || field.destId.length<16" matTooltipPosition="above">
                          </mat-form-field>
                          <span *ngIf="(destId.errors?.required && (destId.touched || fCommercial.submitted))"
                            class="hasErrorMsgCom">
                            Required&nbsp;!
                          </span>
                        </a>
                    </div>
                    <div *ngIf="CommercialDataModel.slabFlag==0">
                      <div class="col-lg-1 col-md-1   slab_width">
                        <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                          <input #crmPrice='ngModel'  required name="price-{{i}}" numeric matInput  autocomplete="true" [(ngModel)]="field.price" decimals="2" maxlength={{maxLength}}>
                        </mat-form-field>
                        <span *ngIf="(crmPrice.errors?.required && (crmPrice.touched || fCommercial.submitted))"
                          class="hasErrorMsgCom">                    
                         
                          Required&nbsp;!
                        </span>
                        <span *ngIf="(((crmPrice.errors?.greaterZero) || ((crmPrice.errors?.greaterZero) && fCommercial.submitted)) && (!crmPrice.errors?.required))" class="hasErrorMsgCom" style="font-size: smaller;">
                          Greater Than 0&nbsp;!
                        </span>
   <span *ngIf="(crmPrice.errors?.isNumeric && crmPrice.touched && !crmPrice.errors?.required && !crmPrice.errors?.greaterZero)"
                          class="hasErrorMsgCom">
                            Invalid !
                        </span>
                      </div>
                      <div class="col-lg-1 col-md-1   slab_width">
                        <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                          <input #crmMinFreight='ngModel'  required name="minFreight-{{i}}" matInput  autocomplete="true" [(ngModel)]="field.minFreight" numeric maxlength="8" decimals="2">
                        </mat-form-field>
                        <span *ngIf="(crmMinFreight.errors?.required && (crmMinFreight.touched || fCommercial.submitted))"
                          class="hasErrorMsgCom">
                         Required&nbsp;!
    </span>
                        <span *ngIf="(crmMinFreight.errors?.isNumeric && crmMinFreight.touched && !crmMinFreight.errors?.required)"
                          class="hasErrorMsgCom">
                            Invalid !
                        </span>
                      </div> 
                    </div>

                  <div *ngIf="CommercialDataModel.slabFlag==1">
                  <div  *ngIf="CommercialDataModel.ZonalSlabCounter==1 || CommercialDataModel.ZonalSlabCounter>1">
                    <!-- Slab 1 -->
                    <div class="col-lg-1 col-md-1   slab_width">
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                          <input #crmPrice1='ngModel' required  name="price-{{i}}" matInput  autocomplete="true"  [(ngModel)]="field.price"  numeric maxlength={{maxLength}} decimals="2">
                        </mat-form-field>
                        <span *ngIf="(crmPrice1.errors?.required && (crmPrice1.touched || fCommercial.submitted))"
                          class="hasErrorMsgCom">
                          Required&nbsp;!
                        </span>
                        <span *ngIf="(((crmPrice1.errors?.greaterZero) || ((crmPrice1.errors?.greaterZero) && fCommercial.submitted)) && (!crmPrice1.errors?.required))" class="hasErrorMsgCom" style="font-size: smaller;">
                          Greater Than 0&nbsp;!
  </span>
                        <span *ngIf="(crmPrice1.errors?.isNumeric && crmPrice1.touched && !crmPrice1.errors?.required && !crmPrice1.errors?.greaterZero)"
                          class="hasErrorMsgCom">
                            Invalid !
                        </span>
                    </div>
                    <div class="col-lg-1 col-md-1   slab_width">
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                        <input #crmMinFreight1='ngModel' required name="minFreight-{{i}}" matInput  autocomplete="true" [(ngModel)]="field.minFreight"  numeric  maxlength="8" decimals="2"
                        (input)="updateZmCustomPriceMinF()">
                      </mat-form-field>
                      <span *ngIf="(crmMinFreight1.errors?.required && (crmMinFreight1.touched || fCommercial.submitted))"
                        class="hasErrorMsgCom">
                        Required&nbsp;!
                      </span>
 <span *ngIf="(crmMinFreight1.errors?.isNumeric && crmMinFreight1.touched && !crmMinFreight1.errors?.required)"
                        class="hasErrorMsgCom">
                          Invalid !
                      </span>
                    </div>
                    <!-- Slab 1 -->
                  </div>

                <div  *ngIf="CommercialDataModel.ZonalSlabCounter==2 || CommercialDataModel.ZonalSlabCounter>2">
                  <!-- Slab-->
                  <div class="col-lg-1 col-md-1 slab_width">
                    
                    <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                        <input #crmPrice2='ngModel' required  name="price2-{{i}}" matInput  autocomplete="true"  [(ngModel)]="field.price2"  numeric maxlength={{maxLength}} decimals="2">
                      </mat-form-field>
                      <span *ngIf="(crmPrice2.errors?.required && (crmPrice2.touched || fCommercial.submitted))"
                        class="hasErrorMsgCom">
                        Required&nbsp;!
                      </span>
                      <span *ngIf="(((crmPrice2.errors?.greaterZero) || ((crmPrice2.errors?.greaterZero) && fCommercial.submitted)) && (!crmPrice2.errors?.required))" class="hasErrorMsgCom" style="font-size: smaller;">
                        Greater Than 0&nbsp;!
                      </span>
 <span *ngIf="(crmPrice2.errors?.isNumeric && crmPrice2.touched && !crmPrice2.errors?.required && !crmPrice2.errors?.greaterZero)"
                        class="hasErrorMsgCom">
                          Invalid !
                      </span>
                  </div>
                  <div class="col-lg-1 col-md-1 slab_width">
                    <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                      <input #crmMinFreight2='ngModel' required  name="minFreight2-{{i}}" matInput  autocomplete="true" [(ngModel)]="field.minFreight2"  maxlength="8" numeric decimals="2"
                      [disabled]="isOptionBSelected">
                    </mat-form-field>
                    <span *ngIf="(crmMinFreight2.errors?.required && (crmMinFreight2.touched || fCommercial.submitted))"
                      class="hasErrorMsgCom">
                      Required&nbsp;!
                    </span>
                    <span *ngIf="(crmMinFreight2.errors?.isNumeric && crmMinFreight2.touched && !crmMinFreight2.errors?.required)"
                      class="hasErrorMsgCom">
                        Invalid !
                    </span>
                  </div>
                  <!-- Slab-->
                </div>

                <div  *ngIf="CommercialDataModel.ZonalSlabCounter==3 || CommercialDataModel.ZonalSlabCounter>3">
                  <!-- Slab 3 -->
                  <div class="col-lg-1 col-md-1 slab_width">                    
                    <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                        <input #crmPricethree='ngModel' required  name="price3-{{i}}" matInput  autocomplete="true" [(ngModel)]="field.price3"  numeric maxlength={{maxLength}} decimals="2">
                      </mat-form-field>
                      <span *ngIf="(crmPricethree.errors?.required && (crmPricethree.touched || fCommercial.submitted))"
                        class="hasErrorMsgCom">
                        Required&nbsp;!
                      </span>
                      <span *ngIf="(((crmPricethree.errors?.greaterZero) || ((crmPricethree.errors?.greaterZero) && fCommercial.submitted)) && (!crmPricethree.errors?.required))" class="hasErrorMsgCom" style="font-size: smaller;">
                        Greater Than 0&nbsp;!
                      </span>
                      <span *ngIf="(crmPricethree.errors?.isNumeric && crmPricethree.touched && !crmPricethree.errors?.required && !crmPricethree.errors?.greaterZero)"
                        class="hasErrorMsgCom">
                          Invalid !
                      </span>
                  </div>
                  <div class="col-lg-1 col-md-1   slab_width">
                    <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                      <input #crmMinFreightthree='ngModel' required  name="minFreight3-{{i}}" matInput  autocomplete="true"  [(ngModel)]="field.minFreight3"  numeric maxlength="8" decimals="2"
                      [disabled]="isOptionBSelected">
                    </mat-form-field>
                    <span *ngIf="(crmMinFreightthree.errors?.required && (crmMinFreightthree.touched || fCommercial.submitted))"
                      class="hasErrorMsgCom">
                     Required&nbsp;!
 </span>
                    <span *ngIf="(crmMinFreightthree.errors?.isNumeric && crmMinFreightthree.touched && !crmMinFreightthree.errors?.required)"
                      class="hasErrorMsgCom">
                        Invalid !
                    </span>
                  </div>
                  <!-- Slab 3 -->
                </div>
                
                <!-- <slab 4 starts here> -->

                  <div  *ngIf="CommercialDataModel.ZonalSlabCounter==4 || CommercialDataModel.ZonalSlabCounter>4">
                    <!-- Slab 3 -->
                    <div class="col-lg-1 col-md-1   slab_width">
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                          <input #crmPriceFour='ngModel' required  name="price4-{{i}}" matInput  autocomplete="true" [(ngModel)]="field.price4"  numeric maxlength={{maxLength}} decimals="2">
                        </mat-form-field>
                        <span *ngIf="(crmPriceFour.errors?.required && (crmPriceFour.touched || fCommercial.submitted))"
                          class="hasErrorMsgCom">
                         Required&nbsp;!
                        </span>
                        <span *ngIf="(((crmPriceFour.errors?.greaterZero) || ((crmPriceFour.errors?.greaterZero) && fCommercial.submitted)) && (!crmPriceFour.errors?.required))" class="hasErrorMsgCom" style="font-size: smaller;">
                          Greater Than 0&nbsp;!
 </span>
                        <span *ngIf="(crmPriceFour.errors?.isNumeric && crmPriceFour.touched && !crmPriceFour.errors?.required && !crmPriceFour.errors?.greaterZero)"
                          class="hasErrorMsgCom">
                            Invalid !
                        </span>
                    </div>
                    <div class="col-lg-1 col-md-1   slab_width">
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                        <input #crmMinFreightfour='ngModel' required  name="minFreight4-{{i}}" matInput  autocomplete="true"  [(ngModel)]="field.minFreight4"  numeric maxlength="8" decimals="2"
                        [disabled]="isOptionBSelected">
                      </mat-form-field>
                      <span *ngIf="(crmMinFreightfour.errors?.required && (crmMinFreightfour.touched || fCommercial.submitted))"
                        class="hasErrorMsgCom">
                        Required&nbsp;!
                      </span>
                      <span *ngIf="(crmMinFreightfour.errors?.isNumeric && crmMinFreightfour.touched && !crmMinFreightfour.errors?.required)"
                        class="hasErrorMsgCom">
                          Invalid !
                      </span>
                    </div>
                  </div>

                <!-- <slab 4 ends here > -->
                <!-- <slab 5 starts here> -->

                  <div  *ngIf="CommercialDataModel.ZonalSlabCounter==5">
                    <!-- Slab 3 -->
                    <div class="col-lg-1 col-md-1   slab_width">
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                          <input #crmPriceFive='ngModel' required  name="price5-{{i}}" matInput  autocomplete="true" [(ngModel)]="field.price5"  numeric maxlength={{maxLength}} decimals="2">
                        </mat-form-field>
                        <span *ngIf="(crmPriceFive.errors?.required && (crmPriceFive.touched || fCommercial.submitted))"
                          class="hasErrorMsgCom">
                          Required&nbsp;!
                        </span>
                        <span *ngIf="(((crmPriceFive.errors?.greaterZero) || ((crmPriceFive.errors?.greaterZero) && fCommercial.submitted)) && (!crmPriceFive.errors?.required))" class="hasErrorMsgCom" style="font-size: smaller;">
                           Greater Than 0&nbsp;!
 </span>
                        <span *ngIf="(crmPriceFive.errors?.isNumeric && crmPriceFive.touched && !crmPriceFive.errors?.required && !crmPriceFive.errors?.greaterZero)"
                          class="hasErrorMsgCom">
                            Invalid !
                        </span>
                    </div>
                    <div class="col-lg-1 col-md-1   slab_width">
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                        <input #crmMinFreightFive='ngModel' required name="minFreight5-{{i}}" matInput  autocomplete="true"  [(ngModel)]="field.minFreight5"  numeric maxlength="8" decimals="2"
                        [disabled]="isOptionBSelected">
                      </mat-form-field>
                      <span *ngIf="(crmMinFreightFive.errors?.required && (crmMinFreightFive.touched || fCommercial.submitted))"
                        class="hasErrorMsgCom">
                        Required&nbsp;!
                      </span>
 <span *ngIf="(crmMinFreightFive.errors?.isNumeric && crmMinFreightFive.touched && !crmMinFreightFive.errors?.required)"
                        class="hasErrorMsgCom">
                          Invalid !
                      </span>
                    </div>
                  </div>
                <!-- <slab 5 ends here > -->
              </div>
              <div class="col-lg-1 col-md-1 " style="width: 0px !important;"> <span ><em class="material-icons customeRemoveIcon" (click)="deleteCustomRM(field, i)" style="cursor: pointer;color: #27AE60;">delete</em></span></div>
              </div>
            </div>
            </form></div>

            <hr id="collapsedivider">
            <div class="row" >
                <div class="col-lg-2 col-md-2   label-text ">
                    Safextension Applicable<span class="redMark"> *</span></div>
                
                <div class="col-lg-5 col-md-5   ">             
                    <mat-radio-group style="padding-left: 1rem !important;" *ngFor="let season of gst" class="example-radio-group"
                      name="safextFlag" [(ngModel)]="CommercialDataModel.safextFlag" (change)="createDlvrBkgList()">
                      <mat-radio-button class="example-radio-button" [value]="season.id">
                        {{season.value}}
                      </mat-radio-button>
                    </mat-radio-group>
                </div>
              
            </div>
            <div *ngIf="CommercialDataModel.safextFlag==1">
            <div class="row" >
                <div class="col-lg-2 col-md-2   label-text">
                    Safextension Charges</div>
                <div class="col-lg-5 col-md-5  ">
                  <div class="col-lg-3 col-md-3  " style="padding-left: 1.0rem !important;">
                    <mat-checkbox name="deliveryFlag" #dlivry='ngModel' [(checked)]='CommercialDataModel.deliveryFlag' [value]="DILIVERY"  
                    [(ngModel)]="CommercialDataModel.deliveryFlag">
                      <span class="service-fonts-checkbox">DELIVERY</span></mat-checkbox>
                  </div>
                  <div class="col-lg-3 col-md-3 ">
                    <mat-checkbox name="bookingFlag" #booking1='ngModel' [(checked)]='CommercialDataModel.bookingFlag' [value]="BOOKING"  
                    [(ngModel)]="CommercialDataModel.bookingFlag">
                      <span class="service-fonts-checkbox">BOOKING</span></mat-checkbox>
                  </div>
                </div>
            </div>

            <div class="row" style="margin-top: 0rem;">
                <div class="col-lg-2 col-md-2 label-text">
                    Safextension Type<span class="redMark"> *</span></div>
                <div class="col-lg-5 col-md-5">
                    <mat-radio-group style="padding-left: 1rem !important;" *ngFor="let season of ReferenceDataModel.safexLevelList" class="example-radio-group"
                    name="safeextTypeFlag" [(ngModel)]="CommercialDataModel.safeextTypeFlag" (change)="getListPinState()">
                    <mat-radio-button class="example-radio-button" [value]="season.id">
                      {{season.descr}}
                    </mat-radio-button>
                  </mat-radio-group>
                  </div>
              </div>    
            <!-- Safextension Delivery Charges -->
                <div *ngIf="CommercialDataModel.deliveryFlag">
              <h5 class="zonalheading" style="padding-top: 2rem;">Safextension Delivery Charges</h5>
              <div class="row" >
                <div class="col-lg-12 col-md-12">
                  <div class="col-lg-2 col-md-2   zonalheadingbar">GROUP</div>
                  <div class="col-lg-1 col-md-1   zonalheadingbar" *ngIf="CommercialDataModel.slabFlag==0">RATE PER KG</div>           
                  <div class="col-lg-1 col-md-1   zonalheadingbar" *ngIf="CommercialDataModel.slabFlag==0">MINIMUM AMOUNT</div>
           <div *ngIf="CommercialDataModel.slabFlag==1">
              <div *ngIf="CommercialDataModel.ZonalSlabCounter==1 || CommercialDataModel.ZonalSlabCounter>1">
                <div class="col-lg-1 col-md-1   flex-direction" style="padding: 0 !important;">  
                  <div class="col-lg-12 col-md-1 zonalheadingbar1">SLAB</div>                    
                  <!-- hover  -->
                    <div class="col-lg-12 col-md-12 zonalheadingbar1"  style="padding: 0 !important;">
                      <input name="zmslabfrom1" numeric  decimals="2" autocomplete="true"  autocomplete="true" class="dropdown"  id="zonal-input" disabled placeholder="{{zmslabfrom1}}-{{zmslabto1}}"> 
                      <div class="dropdown"></div>
                      </div>
                    <!-- Hover -->
                </div>
                <div>
                  <div class="col-lg-1 col-md-1  ">                  
                    <div class="row" id="contentInside">
                      <div class="col-lg-12 col-md-12 zonalheadingbar">MINIMUM AMOUNT</div>                    
                    </div>                                 
                  </div> 
                  </div>
              </div>
              <div *ngIf="CommercialDataModel.ZonalSlabCounter==2 || CommercialDataModel.ZonalSlabCounter>2">
                <div class="col-lg-1 col-md-1   flex-direction" style="padding: 0 !important;">  
                  <div class="col-lg-12 col-md-1 zonalheadingbar1">SLAB</div>                    
                                <!-- hover  -->
                                <div class="col-lg-12 col-md-12 zonalheadingbar1"  style="padding: 0 !important;">
                                  <input name="zmslabfrom2" numeric  decimals="2" autocomplete="true"  autocomplete="true" class="dropdown"  id="zonal-input" disabled placeholder="{{zmslabfrom2}}-{{zmslabto2}}"> 
                                  <div class="dropdown"></div>
                                  </div>
                    <!-- Hover -->
                </div>
                <div>
                  <div class="col-lg-1 col-md-1  " style="padding: 0 !important;">                  
                    <div class="row" id="contentInside">
                      <div class="col-lg-12 col-md-12 zonalheadingbar">MINIMUM AMOUNT</div>                    
                    </div>                                 
                  </div> 
                  </div>
              </div>
              <div *ngIf="CommercialDataModel.ZonalSlabCounter==3 || CommercialDataModel.ZonalSlabCounter>3">
                <div class="col-lg-1 col-md-1   flex-direction" style="padding: 0 !important;" >  
                  <div class="col-lg-12 col-md-1 zonalheadingbar1">SLAB</div>                    
                                <!-- hover  -->
                                <div class="col-lg-12 col-md-12 zonalheadingbar1"  style="padding: 0 !important;">
                                  <input name="zmslabfrom3" numeric decimals="2" autocomplete="true"  autocomplete="true" class="dropdown"  id="zonal-input" disabled placeholder="{{zmslabfrom3}}-{{zmslabto3}}"> 
                                  <div class="dropdown"></div>
                                  </div>
                    <!-- Hover -->
                </div>
                <div>
                  <div class="col-lg-1 col-md-1  " style="padding: 0 !important;">                  
                    <div class="row" id="contentInside">
                      <div class="col-lg-12 col-md-12 zonalheadingbar">MINIMUM AMOUNT</div>                    
                    </div>                                 
                  </div> 
                  </div>
              </div>
              <div *ngIf="CommercialDataModel.ZonalSlabCounter==4 || CommercialDataModel.ZonalSlabCounter>4">
                <div class="col-lg-1 col-md-1   flex-direction" style="padding: 0 !important;" >  
                  <div class="col-lg-12 col-md-1 zonalheadingbar1">SLAB</div>                    
                                <!-- hover  -->
                                <div class="col-lg-12 col-md-12 zonalheadingbar1"  style="padding: 0 !important;">
                                  <input name="zmslabfrom4" numeric decimals="2" autocomplete="true"  autocomplete="true" class="dropdown"  id="zonal-input" disabled placeholder="{{zmslabfrom4}}-{{zmslabto4}}"> 
                                  <div class="dropdown"></div>
                                  </div>
                    <!-- Hover -->
                </div>
                <div>
                  <div class="col-lg-1 col-md-1  " style="padding: 0 !important;">                  
                    <div class="row" id="contentInside">
                      <div class="col-lg-12 col-md-12 zonalheadingbar">MINIMUM AMOUNT</div>                    
                    </div>                                 
                  </div> 
                  </div>
              </div>
              <div *ngIf="CommercialDataModel.ZonalSlabCounter==5">
                <div class="col-lg-1 col-md-1   flex-direction" style="padding: 0 !important;" >  
                  <div class="col-lg-12 col-md-1 zonalheadingbar1">SLAB</div>                    
                                <!-- hover  -->
                                <div class="col-lg-12 col-md-12 zonalheadingbar1"  style="padding: 0 !important;">
                                  <input name="zmslabfrom5" numeric decimals="2" autocomplete="true"  autocomplete="true" class="dropdown"  id="zonal-input" disabled placeholder="{{zmslabfrom5}}-{{zmslabto5}}"> 
                                  <div class="dropdown"></div>
                                  </div>
                    <!-- Hover -->
                </div>
                <div>
                  <div class="col-lg-1 col-md-1  " style="padding: 0 !important;">                  
                    <div class="row" id="contentInside">
                      <div class="col-lg-12 col-md-12 zonalheadingbar">MINIMUM AMOUNT</div>                    
                    </div>                                 
                  </div> 
                  </div>
              </div>

              </div>
            </div>
          </div>

              <div class="row margintop10" *ngFor="let field of CommercialDataModel.safextCharge ; let i = index" >
                <div *ngIf="field.safextCtgy=='DELIVERY'">
                <div class="col-lg-12 col-md-12  ">
                  <div class="col-lg-2 col-md-2   label-text"> {{field.groupName}}</div>  
                  <div *ngIf="CommercialDataModel.slabFlag==0">
                  <div class="col-lg-1 col-md-1  " >
                    <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                      <input required #dcprice='ngModel' matInput  autocomplete="true" name="price-{{i}}" [(ngModel)]="field.price" numeric maxlength="8" decimals="2">
                    </mat-form-field>
                    <span *ngIf="(dcprice.errors?.required && (dcprice.touched || fCommercial.submitted))"
                      class="hasErrorMsgCom">
                      Required&nbsp;!
                    </span>
 <span *ngIf="(dcprice.errors?.isNumeric && dcprice.touched && !dcprice.errors?.required)"
                      class="hasErrorMsgCom">
                        Invalid !
                    </span>
                  </div>           
                  <div class="col-lg-1 col-md-1   " >
                    <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                      <input required #dcminAmt='ngModel'  matInput  autocomplete="true" name="minAmt-{{i}}" [(ngModel)]="field.minAmt" maxlength="8" numeric decimals="2">
                    </mat-form-field>
                    <span *ngIf="(dcminAmt.errors?.required && (dcminAmt.touched || fCommercial.submitted))"
                      class="hasErrorMsgCom">
                      Required&nbsp;!
</span>
                    <span *ngIf="(dcminAmt.errors?.isNumeric && dcminAmt.touched && !dcminAmt.errors?.required)"
                      class="hasErrorMsgCom">
                        Invalid !
                    </span>
                  </div>
                </div>
                  <div *ngIf="CommercialDataModel.slabFlag==1">
                    <div  *ngIf="CommercialDataModel.ZonalSlabCounter==1 || CommercialDataModel.ZonalSlabCounter>1">
                      <div class="col-lg-1 col-md-1  ">
                        
                        <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                            <input required #dcprice='ngModel' name="price-{{i}}" matInput  autocomplete="true"  [(ngModel)]="field.price" numeric maxlength={{maxLength}}  decimals="2">
                          </mat-form-field>
                          <span *ngIf="(dcprice.errors?.required && (dcprice.touched || fCommercial.submitted))"
                            class="hasErrorMsgCom">
                            Required&nbsp;!
 </span>
                          <span *ngIf="(dcprice.errors?.isNumeric && dcprice.touched && !dcprice.errors?.required)"
                            class="hasErrorMsgCom">
                              Invalid !
                          </span>
                      </div>
                      <div class="col-lg-1 col-md-1  ">
                        <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                          <input required #dcminAmt='ngModel' name="minAmt-{{i}}" matInput  autocomplete="true" [(ngModel)]="field.minAmt"  numeric maxlength="8"  decimals="2"
                          (input)="updatesafextChargeDlvrMinAmt()">
                        </mat-form-field>
                        <span *ngIf="(dcminAmt.errors?.required && (dcminAmt.touched || fCommercial.submitted))"
                          class="hasErrorMsgCom">
                          Required&nbsp;!
 </span>
                        <span *ngIf="(dcminAmt.errors?.isNumeric && dcminAmt.touched && !dcminAmt.errors?.required)"
                          class="hasErrorMsgCom">
                            Invalid !
                        </span>
                      </div>
                    </div>
                  <div  *ngIf="CommercialDataModel.ZonalSlabCounter==2 || CommercialDataModel.ZonalSlabCounter>2">
                    <div class="col-lg-1 col-md-1  ">
                      
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                          <input required #dcprice2='ngModel'  name="price2-{{i}}" matInput  autocomplete="true"  [(ngModel)]="field.price2"  numeric maxlength={{maxLength}} decimals="2">
                        </mat-form-field>
                        <span *ngIf="(dcprice2.errors?.required && (dcprice2.touched || fCommercial.submitted))"
                          class="hasErrorMsgCom">
                          Required&nbsp;!
 </span>
                        <span *ngIf="(dcprice2.errors?.isNumeric && dcprice2.touched && !dcprice2.errors?.required)"
                          class="hasErrorMsgCom">
                            Invalid !
                        </span>
                    </div>
                    <div class="col-lg-1 col-md-1  ">
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                        <input required #dcminAmt2='ngModel'  name="minAmt2-{{i}}" matInput  autocomplete="true" [(ngModel)]="field.minAmt2"  numeric maxlength="8"  decimals="2"
                        [disabled]="isOptionBSelected">
                      </mat-form-field>
                      <span *ngIf="(dcminAmt2.errors?.required && (dcminAmt2.touched || fCommercial.submitted))"
                        class="hasErrorMsgCom">
                        Required&nbsp;!
 </span>
                      <span *ngIf="(dcminAmt2.errors?.isNumeric && dcminAmt2.touched && !dcminAmt2.errors?.required)"
                        class="hasErrorMsgCom">
                          Invalid !
                      </span>
                    </div>  
                  </div>
                  <div  *ngIf="CommercialDataModel.ZonalSlabCounter==3 || CommercialDataModel.ZonalSlabCounter>3">
                    <div class="col-lg-1 col-md-1  ">
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                          <input required #dcprice3='ngModel'  name="price3-{{i}}" matInput  autocomplete="true" [(ngModel)]="field.price3"  numeric maxlength={{maxLength}}  decimals="2">
                        </mat-form-field>
                        <span *ngIf="(dcprice3.errors?.required && (dcprice3.touched || fCommercial.submitted))"
                          class="hasErrorMsgCom">
                          Required&nbsp;!
   </span>
                        <span *ngIf="(dcprice3.errors?.isNumeric && dcprice3.touched && !dcprice3.errors?.required)"
                          class="hasErrorMsgCom">
                            Invalid !
                        </span>
                    </div>
                    <div class="col-lg-1 col-md-1  ">
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                        <input required #dcminAmt3='ngModel'  name="minAmt3-{{i}}" matInput  autocomplete="true"  [(ngModel)]="field.minAmt3"  numeric maxlength="8"  decimals="2"
                        [disabled]="isOptionBSelected">
                      </mat-form-field>
                      <span *ngIf="(dcminAmt3.errors?.required && (dcminAmt3.touched || fCommercial.submitted))"
                        class="hasErrorMsgCom">
                        Required&nbsp;!
 </span>
                      <span *ngIf="(dcminAmt3.errors?.isNumeric && dcminAmt3.touched && !dcminAmt3.errors?.required)"
                        class="hasErrorMsgCom">
                          Invalid !
                      </span>
                    </div>  
                  </div>
                  <div  *ngIf="CommercialDataModel.ZonalSlabCounter==4 || CommercialDataModel.ZonalSlabCounter>4">
                    <div class="col-lg-1 col-md-1  ">
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                          <input required #dcprice4='ngModel'  name="price4-{{i}}" matInput  autocomplete="true" [(ngModel)]="field.price4"  numeric maxlength={{maxLength}}  decimals="2">
                        </mat-form-field>
                        <span *ngIf="(dcprice4.errors?.required && (dcprice4.touched || fCommercial.submitted))"
                          class="hasErrorMsgCom">
                          Required&nbsp;!
  </span>
                        <span *ngIf="(dcprice4.errors?.isNumeric && dcprice4.touched && !dcprice4.errors?.required)"
                          class="hasErrorMsgCom">
                            Invalid !
                        </span>
                    </div>
                    <div class="col-lg-1 col-md-1  ">
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                        <input required #dcminAmt4='ngModel'  name="minAmt4-{{i}}" matInput  autocomplete="true"  [(ngModel)]="field.minAmt4"  numeric maxlength="8"  decimals="2"
                        [disabled]="isOptionBSelected">
                      </mat-form-field>
                      <span *ngIf="(dcminAmt4.errors?.required && (dcminAmt4.touched || fCommercial.submitted))"
                        class="hasErrorMsgCom">
                        Required&nbsp;!
 </span>
                      <span *ngIf="(dcminAmt4.errors?.isNumeric && dcminAmt4.touched && !dcminAmt4.errors?.required)"
                        class="hasErrorMsgCom">
                          Invalid !
                      </span>
                    </div>  
                  </div>
                  <div  *ngIf="CommercialDataModel.ZonalSlabCounter==5">
                    <div class="col-lg-1 col-md-1  ">
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                          <input required #dcprice5='ngModel' name="price5-{{i}}" matInput  autocomplete="true" [(ngModel)]="field.price5"  numeric maxlength={{maxLength}}  decimals="2">
                        </mat-form-field>
                        <span *ngIf="(dcprice5.errors?.required && (dcprice5.touched || fCommercial.submitted))"
                          class="hasErrorMsgCom">
                          Required&nbsp;!
 </span>
                        <span *ngIf="(dcprice5.errors?.isNumeric && dcprice5.touched && !dcprice5.errors?.required)"
                          class="hasErrorMsgCom">
                            Invalid !
                        </span>
                    </div>
                    <div class="col-lg-1 col-md-1  ">
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                        <input required #dcminAmt5='ngModel'  name="minAmt5-{{i}}" matInput  autocomplete="true"  [(ngModel)]="field.minAmt5"  numeric maxlength="8"  decimals="2"
                        [disabled]="isOptionBSelected">
                      </mat-form-field>
                      <span *ngIf="(dcminAmt5.errors?.required && (dcminAmt5.touched || fCommercial.submitted))"
                        class="hasErrorMsgCom">
                        Required&nbsp;!
   </span>
                      <span *ngIf="(dcminAmt5.errors?.isNumeric && dcminAmt5.touched && !dcminAmt5.errors?.required)"
                        class="hasErrorMsgCom">
                          Invalid !
                      </span>
                    </div>  
                  </div>
                </div>
                </div>
              </div>
              </div>
                           
              <!--Delivery Custom Master Add Icon -->
              <form name="delCustMaster" (ngSubmit)="fDelCustMaster.form.valid" #fDelCustMaster="ngForm" novalidate>
              <h5 class="zonalheading" style="padding-top: 2rem;">Safextension Delivery Custom Master
                <button [disabled]="!fDelCustMaster.form.valid" mat-icon-button (click)="addCustomDelivery(); changeSlabProtion()" id="plusicon2" mat-card-avatar
                aria-label="Example icon">
                <mat-icon >add_circle</mat-icon>
                </button>
              </h5>
              
              
              <div *ngIf="CommercialDataModel.safextDlvryCustomCharge.length>0">
              <div class="row" *ngIf="CommercialDataModel.safextFlag==1">
                <div class="col-lg-12 col-md-12">
                  <div class="col-lg-2 col-md-2 zonalheadingbar safextenson" style="max-width: 20rem !important;">PINCODE/STATE</div>
                  <div class="col-lg-1 col-md-1 zonalheadingbar"  *ngIf="CommercialDataModel.slabFlag==0">RATE</div>
                  <div class="col-lg-1 col-md-1 zonalheadingbar"  *ngIf="CommercialDataModel.slabFlag==0">MINIMUM AMOUNT</div>
                  <div *ngIf="CommercialDataModel.slabFlag==1">
                    <div>
                      <div class="col-lg-1 col-md-1   flex-direction" style="padding: 0 !important;">  
                        <div class="col-lg-12 col-md-1 zonalheadingbar1">SLAB</div>                    
                                      <!-- hover  -->
                          <div class="col-lg-12 col-md-12 zonalheadingbar1"  style="padding: 0 !important;">
                            <input name="zmslabfrom1" numeric  decimals="2" autocomplete="true"  autocomplete="true" class="dropdown"  id="zonal-input" disabled placeholder="{{zmslabfrom1}}-{{zmslabto1}}"> 
                            <div class="dropdown"></div>
                            </div>
                          <!-- Hover -->
                      </div>
                      <div>
                        <div class="col-lg-1 col-md-1  ">                  
                          <div class="row" id="contentInside">
                            <div class="col-lg-12 col-md-12 zonalheadingbar">MINIMUM AMOUNT</div>                    
                          </div>                                 
                        </div> 
                        </div>
                    </div>
                    <div *ngIf="CommercialDataModel.ZonalSlabCounter==2 || CommercialDataModel.ZonalSlabCounter>2">
                      <div class="col-lg-1 col-md-1   flex-direction" style="padding: 0 !important;" >  
                        <div class="col-lg-12 col-md-1 zonalheadingbar1">SLAB</div>                    
                                      <!-- hover  -->
                          <div class="col-lg-12 col-md-12 zonalheadingbar1"  style="padding: 0 !important;">
                            <input name="zmslabfrom2" numeric  decimals="2" autocomplete="true"  autocomplete="true" class="dropdown"  id="zonal-input" disabled placeholder="{{zmslabfrom2}}-{{zmslabto2}}"> 
                            <div class="dropdown"></div>
                            </div>
                          <!-- Hover -->
                      </div>
                      <div>
                        <div class="col-lg-1 col-md-1  " style="padding: 0 !important;">                  
                          <div class="row" id="contentInside">
                            <div class="col-lg-12 col-md-12 zonalheadingbar">MINIMUM AMOUNT</div>                    
                          </div>                                 
                        </div> 
                        </div>
                    </div>
                    <div *ngIf="CommercialDataModel.ZonalSlabCounter==3 || CommercialDataModel.ZonalSlabCounter>3">
                      <div class="col-lg-1 col-md-1   flex-direction" style="padding: 0 !important;">  
                        <div class="col-lg-12 col-md-1 zonalheadingbar1">SLAB</div>                    
                                      <!-- hover  -->
                                      <div class="col-lg-12 col-md-12 zonalheadingbar1"  style="padding: 0 !important;">
                                        <input name="zmslabfrom3" numeric decimals="2" autocomplete="true"  autocomplete="true" class="dropdown"  id="zonal-input" disabled placeholder="{{zmslabfrom3}}-{{zmslabto3}}"> 
                                        <div class="dropdown"></div>
                                        </div>
                          <!-- Hover -->
                      </div>
                      <div>
                        <div class="col-lg-1 col-md-1  " style="padding: 0 !important;" >                  
                          <div class="row" id="contentInside">
                            <div class="col-lg-12 col-md-12 zonalheadingbar">MINIMUM AMOUNT</div>                    
                          </div>                                 
                        </div> 
                        </div>
                    </div>
                    <div *ngIf="CommercialDataModel.ZonalSlabCounter==4 || CommercialDataModel.ZonalSlabCounter>4">
                      <div class="col-lg-1 col-md-1   flex-direction" style="padding: 0 !important;">  
                        <div class="col-lg-12 col-md-1 zonalheadingbar1">SLAB</div>                    
                                      <!-- hover  -->
                                      <div class="col-lg-12 col-md-12 zonalheadingbar1"  style="padding: 0 !important;">
                                        <input name="zmslabfrom4" numeric decimals="2" autocomplete="true"  autocomplete="true" class="dropdown"  id="zonal-input" disabled placeholder="{{zmslabfrom4}}-{{zmslabto4}}"> 
                                        <div class="dropdown"></div>
                                        </div>
                          <!-- Hover -->
                      </div>
                      <div>
                        <div class="col-lg-1 col-md-1  " style="padding: 0 !important;" >                  
                          <div class="row" id="contentInside">
                            <div class="col-lg-12 col-md-12 zonalheadingbar">MINIMUM AMOUNT</div>                    
                          </div>                                 
                        </div> 
                        </div>
                    </div>

                    <div *ngIf="CommercialDataModel.ZonalSlabCounter==5">
                      <div class="col-lg-1 col-md-1   flex-direction" style="padding: 0 !important;">  
                        <div class="col-lg-12 col-md-1 zonalheadingbar1">SLAB</div>                    
                                      <!-- hover  -->
                                      <div class="col-lg-12 col-md-12 zonalheadingbar1"  style="padding: 0 !important;">
                                        <input name="zmslabfrom5" numeric decimals="2" autocomplete="true"  autocomplete="true" class="dropdown"  id="zonal-input" disabled placeholder="{{zmslabfrom5}}-{{zmslabto5}}"> 
                                        <div class="dropdown"></div>
                                        </div>
                          <!-- Hover -->
                      </div>
                      <div>
                        <div class="col-lg-1 col-md-1  " style="padding: 0 !important;" >                  
                          <div class="row" id="contentInside">
                            <div class="col-lg-12 col-md-12 zonalheadingbar">MINIMUM AMOUNT</div>                    
                          </div>                                 
                        </div> 
                        </div>
                    </div>
      
                    </div>
                </div>
              </div>

                  <!-- Delivery Custom Master Required Field -->
                  <div style="max-height: 20rem;">
                 <div class="row margintop10"  *ngFor="let field of CommercialDataModel.safextDlvryCustomCharge; let i = index">
                  <div class="col-lg-12 col-md-12">
                    <div class="col-lg-2 col-md-2 safextenson" *ngIf="CommercialDataModel.safeextTypeName=='PINCODE'" style="max-width: 20rem !important;" >
                      <a style="cursor: pointer;" (click)="openDialogPincodeSearch(field,'fromId',true)">
                        <span class="fa fa-search fa-lg" id="search-icon"></span>
                        <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                          <input class="pincode_input" required #dcmfromId='ngModel' name="fromId-{{i}}" matInput  autocomplete="true" [(ngModel)]="field.fromId" 
                            (keydown.enter)="openDialogPincodeSearch(field,'fromId',true)" readonly
                            [matTooltip]="field.fromId" [matTooltipDisabled]="!field || !field.fromId || field.fromId.length<13" matTooltipPosition="above">
                        </mat-form-field>
                        <span *ngIf="(dcmfromId.errors?.required && (dcmfromId.touched || fCommercial.submitted))"
                          class="hasErrorMsgCom">
                          Required&nbsp;!
                        </span>
                      </a>
                    </div>
                    <div class="col-lg-2 col-md-2  safextenson" *ngIf="CommercialDataModel.safeextTypeName=='STATE'" style="max-width: 20rem !important;">
                      <a style="cursor: pointer;" (click)="openDialogStateSearch(field,'fromId',true)">
                        <span class="fa fa-search fa-lg" id="search-icon"></span>
                        <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                          <input class="pincode_input" required #dcmfromId='ngModel' name="fromId-{{i}}" matInput  autocomplete="true" [(ngModel)]="field.stateNamesfrom" 
                            (keydown.enter)="openDialogStateSearch(field,'fromId',true)" readonly
                            [matTooltip]="field.stateNamesfrom" [matTooltipDisabled]="!field || !field.stateNamesfrom || field.stateNamesfrom.length<13" matTooltipPosition="above">
                        </mat-form-field>
                        <span *ngIf="(dcmfromId.errors?.required && (dcmfromId.touched || fCommercial.submitted))"
                          class="hasErrorMsgCom">
                          Required&nbsp;!
                        </span>
                      </a>
                        </div>

                  <div *ngIf="CommercialDataModel.slabFlag==0">
                    <div class="col-lg-1 col-md-1  ">
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                          <input required #dcmprice='ngModel' name="price-{{i}}" numeric maxlength={{maxLength}} decimals="2" matInput  autocomplete="true" [(ngModel)]="field.price">                        
                        </mat-form-field>
                        <span *ngIf="(dcmprice.errors?.required && (dcmprice.touched || fCommercial.submitted))"
                          class="hasErrorMsgCom">
                          Required&nbsp;!
                        </span>
 <span *ngIf="(dcmprice.errors?.isNumeric && dcmprice.touched && !dcmprice.errors?.required)"
                          class="hasErrorMsgCom">
                            Invalid !
                        </span>
                    </div>
                    <div class="col-lg-1 col-md-1  ">
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                          <input required #dcmMinAmt='ngModel'  name="minAmt-{{i}}" numeric maxlength ="8" decimals="2" matInput  autocomplete="true" [(ngModel)]="field.minAmt">                       
                        </mat-form-field>
                        <span *ngIf="(dcmMinAmt.errors?.required && (dcmMinAmt.touched || fCommercial.submitted))"
                          class="hasErrorMsgCom">
                          Required&nbsp;!
 </span>
                        <span *ngIf="(dcmMinAmt.errors?.isNumeric && dcmMinAmt.touched && !dcmMinAmt.errors?.required)"
                          class="hasErrorMsgCom">
                            Invalid !
                        </span>
                    </div>
                  </div>

                    <div *ngIf="CommercialDataModel.slabFlag==1">

                      <div  *ngIf="CommercialDataModel.ZonalSlabCounter==1 || CommercialDataModel.ZonalSlabCounter>1">
                        <div class="col-lg-1 col-md-1  ">
                          <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                              <input required #dcmprice='ngModel'  name="price-{{i}}" numeric maxlength={{maxLength}}  decimals="2" matInput  autocomplete="true"  [(ngModel)]="field.price">
                            </mat-form-field>
                            <span *ngIf="(dcmprice.errors?.required && (dcmprice.touched || fCommercial.submitted))"
                              class="hasErrorMsgCom">
                              Required&nbsp;!
  </span>
                            <span *ngIf="(dcmprice.errors?.isNumeric && dcmprice.touched && !dcmprice.errors?.required)"
                              class="hasErrorMsgCom">
                                Invalid !
                            </span>
                        </div>
                        <div class="col-lg-1 col-md-1  ">
                          <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                            <input required #dcmMinAmt='ngModel'  name="minAmt-{{i}}" numeric maxlength ="8" decimals="2" matInput  autocomplete="true" [(ngModel)]="field.minAmt" 
                            (input)="updatesafextChargeCusDlvrMinAmt()">
                          </mat-form-field>
                          <span *ngIf="(dcmMinAmt.errors?.required && (dcmMinAmt.touched || fCommercial.submitted))"
                            class="hasErrorMsgCom">
                            Required&nbsp;!
 </span>
                          <span *ngIf="(dcmMinAmt.errors?.isNumeric && dcmMinAmt.touched && !dcmMinAmt.errors?.required)"
                            class="hasErrorMsgCom">
                              Invalid !
                          </span>
                        </div>
      
                      </div>
                    <div  *ngIf="CommercialDataModel.ZonalSlabCounter==2 || CommercialDataModel.ZonalSlabCounter>2">
                      <div class="col-lg-1 col-md-1  ">
                        <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                            <input required #dcmprice2='ngModel'  name="price2-{{i}}" numeric maxlength={{maxLength}}  decimals="2" matInput  autocomplete="true"  [(ngModel)]="field.price2">
                          </mat-form-field>
                          <span *ngIf="(dcmprice2.errors?.required && (dcmprice2.touched || fCommercial.submitted))"
                            class="hasErrorMsgCom">
                            Required&nbsp;!
 </span>
                          <span *ngIf="(dcmprice2.errors?.isNumeric && dcmprice2.touched && !dcmprice2.errors?.required)"
                            class="hasErrorMsgCom">
                              Invalid !
                          </span>
                      </div>
                      <div class="col-lg-1 col-md-1  ">
                        <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                          <input required #dcmMinAmt2='ngModel'  name="minAmt2-{{i}}" numeric maxlength ="8"  decimals="2" matInput  autocomplete="true" [(ngModel)]="field.minAmt2" 
                          [disabled]="isOptionBSelected">
                        </mat-form-field>
                        <span *ngIf="(dcmMinAmt2.errors?.required && (dcmMinAmt2.touched || fCommercial.submitted))"
                          class="hasErrorMsgCom">
                          Required&nbsp;!
 </span>
                        <span *ngIf="(dcmMinAmt2.errors?.isNumeric && dcmMinAmt2.touched && !dcmMinAmt2.errors?.required)"
                          class="hasErrorMsgCom">
                            Invalid !
                        </span>
                      </div>
    
                    </div>
                    <div  *ngIf="CommercialDataModel.ZonalSlabCounter==3 || CommercialDataModel.ZonalSlabCounter>3">
                      <div class="col-lg-1 col-md-1  ">
                        <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                            <input required #dcmprice3='ngModel'  name="price3-{{i}}" numeric maxlength={{maxLength}} decimals="2" matInput  autocomplete="true" [(ngModel)]="field.price3" >
                          </mat-form-field>
                          <span *ngIf="(dcmprice3.errors?.required && (dcmprice3.touched || fCommercial.submitted))"
                            class="hasErrorMsgCom">
                            Required&nbsp;!
 </span>
                          <span *ngIf="(dcmprice3.errors?.isNumeric && dcmprice3.touched && !dcmprice3.errors?.required)"
                            class="hasErrorMsgCom">
                              Invalid !
                          </span>
                      </div>
                      <div class="col-lg-1 col-md-1  ">
                        <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                          <input required #dcmMinAmt3='ngModel'  name="minAmt3-{{i}}" numeric maxlength ="8" decimals="2" matInput  autocomplete="true"  [(ngModel)]="field.minAmt3"
                          [disabled]="isOptionBSelected">
                        </mat-form-field>
                        <span *ngIf="(dcmMinAmt3.errors?.required && (dcmMinAmt3.touched || fCommercial.submitted))"
                          class="hasErrorMsgCom">
                          Required&nbsp;!
 </span>
                        <span *ngIf="(dcmMinAmt3.errors?.isNumeric && dcmMinAmt3.touched && !dcmMinAmt3.errors?.required)"
                          class="hasErrorMsgCom">
                            Invalid !
                        </span>
                      </div>
    
                    </div>
                    <div  *ngIf="CommercialDataModel.ZonalSlabCounter==4 || CommercialDataModel.ZonalSlabCounter>4">
                      <div class="col-lg-1 col-md-1  ">
                        <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                            <input required #dcmprice4='ngModel'  name="price4-{{i}}" numeric maxlength={{maxLength}} decimals="2" matInput  autocomplete="true" [(ngModel)]="field.price4" >
                          </mat-form-field>
                          <span *ngIf="(dcmprice4.errors?.required && (dcmprice4.touched || fCommercial.submitted))"
                            class="hasErrorMsgCom">
                            Required&nbsp;!
 </span>
                          <span *ngIf="(dcmprice4.errors?.isNumeric && dcmprice4.touched && !dcmprice4.errors?.required)"
                            class="hasErrorMsgCom">
                              Invalid !
                          </span>
                      </div>
                      <div class="col-lg-1 col-md-1  ">
                        <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                          <input required #dcmMinAmt4='ngModel'  name="minAmt4-{{i}}" numeric maxlength ="8" decimals="2" matInput  autocomplete="true"  [(ngModel)]="field.minAmt4"
                          [disabled]="isOptionBSelected">
                        </mat-form-field>
                        <span *ngIf="(dcmMinAmt4.errors?.required && (dcmMinAmt4.touched || fCommercial.submitted))"
                          class="hasErrorMsgCom">
                          Required&nbsp;!
 </span>
                        <span *ngIf="(dcmMinAmt4.errors?.isNumeric && dcmMinAmt4.touched && !dcmMinAmt4.errors?.required)"
                          class="hasErrorMsgCom">
                            Invalid !
                        </span>
                      </div>
    
                    </div>
                    <div  *ngIf="CommercialDataModel.ZonalSlabCounter==5">
                      <div class="col-lg-1 col-md-1  ">
                        <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                            <input required #dcmprice5='ngModel'  name="price5-{{i}}" numeric maxlength={{maxLength}} decimals="2" matInput  autocomplete="true" [(ngModel)]="field.price5" >
                          </mat-form-field>
                          <span *ngIf="(dcmprice5.errors?.required && (dcmprice5.touched || fCommercial.submitted))"
                            class="hasErrorMsgCom">
                            Required&nbsp;!
                          </span>
<span *ngIf="(dcmprice5.errors?.isNumeric && dcmprice5.touched && !dcmprice5.errors?.required)"
                            class="hasErrorMsgCom">
                              Invalid !
                          </span>
                      </div>
                      <div class="col-lg-1 col-md-1  ">
                        <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                          <input required #dcmMinAmt5='ngModel' name="minAmt5-{{i}}" numeric maxlength ="8" decimals="2" matInput  autocomplete="true"  [(ngModel)]="field.minAmt5"
                          [disabled]="isOptionBSelected">
                        </mat-form-field>
                        <span *ngIf="(dcmMinAmt5.errors?.required && (dcmMinAmt5.touched || fCommercial.submitted))"
                          class="hasErrorMsgCom">
                          Required&nbsp;!
 </span>
                        <span *ngIf="(dcmMinAmt5.errors?.isNumeric && dcmMinAmt5.touched && !dcmMinAmt5.errors?.required)"
                          class="hasErrorMsgCom">
                            Invalid !
                        </span>
                      </div>
    
                    </div>
                  </div>
                  <div class="col-lg-1 col-md-1 " style="width: 0px !important;"> <span ><em class="material-icons customeRemoveIcon" (click)="deleteSfxDlvrCusMP(i)">delete</em></span></div>
                  </div>
                </div>
                </div>

                </div>
              </form>

              <hr id="collapsedivider">
              </div>
              
              <div *ngIf="CommercialDataModel.bookingFlag">

              <h5 class="zonalheading" style="padding-top: 2rem;">Safextension Booking Charges</h5>

              <div class="row" >
                <div class="col-lg-12 col-md-12  ">
                  <div class="col-lg-2 col-md-2   zonalheadingbar">GROUP</div>
                  <div class="col-lg-1 col-md-1   zonalheadingbar" *ngIf="CommercialDataModel.slabFlag==0">RATE PER KG</div>           
                  <div class="col-lg-1 col-md-1   zonalheadingbar" *ngIf="CommercialDataModel.slabFlag==0">MINIMUM AMOUNT</div>
                  
                  <div *ngIf="CommercialDataModel.slabFlag==1">
                    <div *ngIf="CommercialDataModel.ZonalSlabCounter==1 || CommercialDataModel.ZonalSlabCounter>1">
                      <div class="col-lg-1 col-md-1   flex-direction" style="padding: 0 !important;">  
                        <div class="col-lg-12 col-md-1 zonalheadingbar1">SLAB</div>                    
                                      <!-- hover  -->
                          <div class="col-lg-12 col-md-12 zonalheadingbar1"  style="padding: 0 !important;">
                            <input name="zmslabfrom1" autocomplete="true"  autocomplete="true" class="dropdown"  id="zonal-input" disabled placeholder="{{zmslabfrom1}}-{{zmslabto1}}"> 
                            <div class="dropdown"></div>
                            </div>
                          <!-- Hover -->
                      </div>
                      <div>
                        <div class="col-lg-1 col-md-1  ">                  
                          <div class="row" id="contentInside">
                            <div class="col-lg-12 col-md-12 zonalheadingbar">MINIMUM AMOUNT</div>                    
                          </div>                                 
                        </div> 
                        </div>
                    </div>
                    <div *ngIf="CommercialDataModel.ZonalSlabCounter==2 || CommercialDataModel.ZonalSlabCounter>2">
                      <div class="col-lg-1 col-md-1   flex-direction" style="padding: 0 !important;" >  
                        <div class="col-lg-12 col-md-1 zonalheadingbar1">SLAB</div>                    
                                      <!-- hover  -->
                                      <div class="col-lg-12 col-md-12 zonalheadingbar1"  style="padding: 0 !important;">
                                        <input name="zmslabfrom2" autocomplete="true"  autocomplete="true" class="dropdown"  id="zonal-input" disabled placeholder="{{zmslabfrom2}}-{{zmslabto2}}"> 
                                        <div class="dropdown"></div>
                                        </div>
                          <!-- Hover -->
                      </div>
                      <div>
                        <div class="col-lg-1 col-md-1  " style="padding: 0 !important;">                  
                          <div class="row" id="contentInside">
                            <div class="col-lg-12 col-md-12 zonalheadingbar">MINIMUM AMOUNT</div>                    
                          </div>                                 
                        </div> 
                        </div>
                    </div>
                    <div *ngIf="CommercialDataModel.ZonalSlabCounter==3 || CommercialDataModel.ZonalSlabCounter>3">
                      <div class="col-lg-1 col-md-1   flex-direction" style="padding: 0 !important;">  
                        <div class="col-lg-12 col-md-12 zonalheadingbar1">SLAB</div>                    
                                      <!-- hover  -->
                                      <div class="col-lg-12 col-md-12 zonalheadingbar1"  style="padding: 0 !important;">
                                        <input name="zmslabfrom3" autocomplete="true"  autocomplete="true" class="dropdown"  id="zonal-input" disabled placeholder="{{zmslabfrom3}}-{{zmslabto3}}"> 
                                        <div class="dropdown"></div>
                                        </div>
                          <!-- Hover -->
                      </div>
                      <div>
                        <div class="col-lg-1 col-md-1  " style="padding: 0 !important;">                  
                          <div class="row" id="contentInside">
                            <div class="col-lg-12 col-md-12 zonalheadingbar">MINIMUM AMOUNT</div>                    
                          </div>                                 
                        </div> 
                        </div>
                    </div>
                    <div *ngIf="CommercialDataModel.ZonalSlabCounter==4 || CommercialDataModel.ZonalSlabCounter>4">
                      <div class="col-lg-1 col-md-1   flex-direction" style="padding: 0 !important;">  
                        <div class="col-lg-12 col-md-12 zonalheadingbar1">SLAB</div>                    
                                      <!-- hover  -->
                                      <div class="col-lg-12 col-md-12 zonalheadingbar1"  style="padding: 0 !important;">
                                        <input name="zmslabfrom4" autocomplete="true"  autocomplete="true" class="dropdown"  id="zonal-input" disabled placeholder="{{zmslabfrom4}}-{{zmslabto4}}"> 
                                        <div class="dropdown"></div>
                                        </div>
                          <!-- Hover -->
                      </div>
                      <div>
                        <div class="col-lg-1 col-md-1  " style="padding: 0 !important;">                  
                          <div class="row" id="contentInside">
                            <div class="col-lg-12 col-md-12 zonalheadingbar">MINIMUM AMOUNT</div>                    
                          </div>                                 
                        </div> 
                        </div>
                    </div>
                    <div *ngIf="CommercialDataModel.ZonalSlabCounter==5">
                      <div class="col-lg-1 col-md-1   flex-direction" style="padding: 0 !important;">  
                        <div class="col-lg-12 col-md-12 zonalheadingbar1">SLAB</div>                    
                                      <!-- hover  -->
                                      <div class="col-lg-12 col-md-12 zonalheadingbar1"  style="padding: 0 !important;">
                                        <input name="zmslabfrom5" autocomplete="true"  autocomplete="true" class="dropdown"  id="zonal-input" disabled placeholder="{{zmslabfrom5}}-{{zmslabto5}}"> 
                                        <div class="dropdown"></div>
                                        </div>
                          <!-- Hover -->
                      </div>
                      <div>
                        <div class="col-lg-1 col-md-1  " style="padding: 0 !important;">                  
                          <div class="row" id="contentInside">
                            <div class="col-lg-12 col-md-12 zonalheadingbar">MINIMUM AMOUNT</div>                    
                          </div>                                 
                        </div> 
                        </div>
                    </div>
      
                    </div>
                </div>
              </div>

              <!-- Booking Charges Required Field -->
              <div class="row margintop10" *ngFor="let field of  CommercialDataModel.safextCharge; let i = index" >
                <div *ngIf="field.safextCtgy=='BOOKING'">
                <div class="col-lg-12 col-md-12  ">
                  <div class="col-lg-2 col-md-2   label-text"> {{field.groupName}}</div>                  

                  <div *ngIf="CommercialDataModel.slabFlag==0">
                  <div class="col-lg-1 col-md-1  " >
                    <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                      <input required #bcprice='ngModel' name="price-{{i}}" numeric maxlength={{maxLength}} decimals="2" matInput  autocomplete="true" name="price" [(ngModel)]="field.price">
                    </mat-form-field>
                    <span *ngIf="(bcprice.errors?.required && (bcprice.touched || fCommercial.submitted))"
                      class="hasErrorMsgCom">
                      Required&nbsp;!
                    </span>
 <span *ngIf="(bcprice.errors?.isNumeric && bcprice.touched && !bcprice.errors?.required)"
                      class="hasErrorMsgCom">
                        Invalid !
                    </span>
                  </div>           
                  <div class="col-lg-1 col-md-1  " >
                    <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                      <input required #bcminAmt='ngModel' name="minAmt-{{i}}" numeric maxlength ="8" decimals="2" matInput  autocomplete="true" name="minAmt" [(ngModel)]="field.minAmt">
                    </mat-form-field>
                    <span *ngIf="(bcminAmt.errors?.required && (bcminAmt.touched || fCommercial.submitted))"
                      class="hasErrorMsgCom">
                      Required&nbsp;!
 </span>
                    <span *ngIf="(bcminAmt.errors?.isNumeric && bcminAmt.touched && !bcminAmt.errors?.required)"
                      class="hasErrorMsgCom">
                        Invalid !
                    </span>
                  </div>
                </div>

                  <div *ngIf="CommercialDataModel.slabFlag==1">
                    <div  *ngIf="CommercialDataModel.ZonalSlabCounter==1 || CommercialDataModel.ZonalSlabCounter>1">
                      <div class="col-lg-1 col-md-1  ">
                        <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                            <input required #bcprice='ngModel' name="price-{{i}}" numeric maxlength={{maxLength}} decimals="2" matInput  autocomplete="true"  [(ngModel)]="field.price">
                          </mat-form-field>
                          <span *ngIf="(bcprice.errors?.required && (bcprice.touched || fCommercial.submitted))"
                            class="hasErrorMsgCom">
                            Required&nbsp;!
 </span>
                          <span *ngIf="(bcprice.errors?.isNumeric && bcprice.touched && !bcprice.errors?.required)"
                            class="hasErrorMsgCom">
                              Invalid !
                          </span>
                      </div>
                      <div class="col-lg-1 col-md-1  ">
                        <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                          <input required #bcminAmt='ngModel'  name="minAmt-{{i}}" numeric maxlength ="8" decimals="2" matInput  autocomplete="true" [(ngModel)]="field.minAmt" 
                          (input)="updatesafextChargeBkgMinAmt()">
                        </mat-form-field>
                        <span *ngIf="(bcminAmt.errors?.required && (bcminAmt.touched || fCommercial.submitted))"
                          class="hasErrorMsgCom">
                          Required&nbsp;!
 </span>
                        <span *ngIf="(bcminAmt.errors?.isNumeric && bcminAmt.touched && !bcminAmt.errors?.required)"
                          class="hasErrorMsgCom">
                            Invalid !
                        </span>
                      </div>
    
                    </div>
                  <div  *ngIf="CommercialDataModel.ZonalSlabCounter==2 || CommercialDataModel.ZonalSlabCounter>2">
                    <div class="col-lg-1 col-md-1  ">
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                          <input required #bcprice2='ngModel' name="price2-{{i}}" numeric maxlength={{maxLength}} decimals="2" matInput  autocomplete="true"  [(ngModel)]="field.price2">
                        </mat-form-field>
                        <span *ngIf="(bcprice2.errors?.required && (bcprice2.touched || fCommercial.submitted))"
                          class="hasErrorMsgCom">
                          Required&nbsp;!
 </span>
                        <span *ngIf="(bcprice2.errors?.isNumeric && bcprice2.touched && !bcprice2.errors?.required)"
                          class="hasErrorMsgCom">
                            Invalid !
                        </span>
                    </div>
                    <div class="col-lg-1 col-md-1  ">
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                        <input required #bcminAmt2='ngModel' name="minAmt2-{{i}}" numeric maxlength ="8" decimals="2" matInput  autocomplete="true" [(ngModel)]="field.minAmt2" 
                        [disabled]="isOptionBSelected">
                      </mat-form-field>
                      <span *ngIf="(bcminAmt2.errors?.required && (bcminAmt2.touched || fCommercial.submitted))"
                        class="hasErrorMsgCom">
                        Required&nbsp;!
 </span>
                      <span *ngIf="(bcminAmt2.errors?.isNumeric && bcminAmt2.touched && !bcminAmt2.errors?.required)"
                        class="hasErrorMsgCom">
                          Invalid !
                      </span>
                    </div>
  
                  </div>
                  <div  *ngIf="CommercialDataModel.ZonalSlabCounter==3 || CommercialDataModel.ZonalSlabCounter>3">
                    <div class="col-lg-1 col-md-1  ">
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                          <input required #bcprice3='ngModel' name="price3-{{i}}" numeric maxlength={{maxLength}} decimals="2" matInput  autocomplete="true" [(ngModel)]="field.price3" >
                        </mat-form-field>
                        <span *ngIf="(bcprice3.errors?.required && (bcprice3.touched || fCommercial.submitted))"
                          class="hasErrorMsgCom">
                          Required&nbsp;!
 </span>
                        <span *ngIf="(bcprice3.errors?.isNumeric && bcprice3.touched && !bcprice3.errors?.required)"
                          class="hasErrorMsgCom">
                            Invalid !
                        </span>
                    </div>
                    <div class="col-lg-1 col-md-1  ">
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                        <input required #bcminAmt3='ngModel'  name="minAmt3-{{i}}" numeric maxlength ="8" decimals="2" matInput  autocomplete="true"  [(ngModel)]="field.minAmt3"
                        [disabled]="isOptionBSelected">
                      </mat-form-field>
                      <span *ngIf="(bcminAmt3.errors?.required && (bcminAmt3.touched || fCommercial.submitted))"
                        class="hasErrorMsgCom">
                        Required&nbsp;!
 </span>
                      <span *ngIf="(bcminAmt3.errors?.isNumeric && bcminAmt3.touched && !bcminAmt3.errors?.required)"
                        class="hasErrorMsgCom">
                          Invalid !
                      </span>
                    </div>
                  </div>
                  <div  *ngIf="CommercialDataModel.ZonalSlabCounter==4 || CommercialDataModel.ZonalSlabCounter>4">
                    <div class="col-lg-1 col-md-1  ">
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                          <input required #bcprice4='ngModel'  name="price4-{{i}}" numeric maxlength={{maxLength}} decimals="2" matInput  autocomplete="true" [(ngModel)]="field.price4" >
                        </mat-form-field>
                        <span *ngIf="(bcprice4.errors?.required && (bcprice4.touched || fCommercial.submitted))"
                          class="hasErrorMsgCom">
                          Required&nbsp;!
 </span>
                        <span *ngIf="(bcprice4.errors?.isNumeric && bcprice4.touched && !bcprice4.errors?.required)"
                          class="hasErrorMsgCom">
                            Invalid !
                        </span>
                    </div>
                    <div class="col-lg-1 col-md-1  ">
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                        <input required #bcminAmt4='ngModel' name="minAmt4-{{i}}" numeric maxlength ="8" decimals="2" matInput  autocomplete="true"  [(ngModel)]="field.minAmt4"
                        [disabled]="isOptionBSelected">
                      </mat-form-field>
                      <span *ngIf="(bcminAmt4.errors?.required && (bcminAmt4.touched || fCommercial.submitted))"
                        class="hasErrorMsgCom">
                        Required&nbsp;!
 </span>
                      <span *ngIf="(bcminAmt4.errors?.isNumeric && bcminAmt4.touched && !bcminAmt4.errors?.required)"
                        class="hasErrorMsgCom">
                          Invalid !
                      </span>
                    </div>
                  </div>
                  <div  *ngIf="CommercialDataModel.ZonalSlabCounter==5">
                    <div class="col-lg-1 col-md-1  ">
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                          <input required #bcprice5='ngModel' name="price5-{{i}}" numeric maxlength={{maxLength}} decimals="2" matInput  autocomplete="true" [(ngModel)]="field.price5" >
                        </mat-form-field>
                        <span *ngIf="(bcprice5.errors?.required && (bcprice5.touched || fCommercial.submitted))"
                          class="hasErrorMsgCom">
                          Required&nbsp;!
  </span>
                        <span *ngIf="(bcprice5.errors?.isNumeric && bcprice5.touched && !bcprice5.errors?.required)"
                          class="hasErrorMsgCom">
                            Invalid !
                        </span>
                    </div>
                    <div class="col-lg-1 col-md-1  ">
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                        <input required #bcminAmt5='ngModel'  name="minAmt5-{{i}}" numeric maxlength ="8" decimals="2" matInput  autocomplete="true"  [(ngModel)]="field.minAmt5"
                        [disabled]="isOptionBSelected">
                      </mat-form-field>
                      <span *ngIf="(bcminAmt5.errors?.required && (bcminAmt5.touched || fCommercial.submitted))"
                        class="hasErrorMsgCom">
                        Required&nbsp;!
 </span>
                      <span *ngIf="(bcminAmt5.errors?.isNumeric && bcminAmt5.touched && !bcminAmt5.errors?.required)"
                        class="hasErrorMsgCom">
                          Invalid !
                      </span>
                    </div>
                  </div>
                </div>
                </div>
              </div>
              </div>
              
              <hr id="collapsedivider">
              
              <!-- Safextension Booking custom master Add Icon -->
              <form name="bookCustMaster" (ngSubmit)="fBookCustMaster.form.valid" #fBookCustMaster="ngForm" novalidate>
              <h5 class="zonalheading" style="padding-top: 2rem;">Safextension Booking Custom Master
                <button [disabled]="!fBookCustMaster.form.valid" mat-icon-button (click)="addCustomBooking(); changeSlabProtion()" id="plusicon2" mat-card-avatar aria-label="Example icon">
                  <mat-icon >add_circle</mat-icon>
                </button>
              </h5>
              <div *ngIf="CommercialDataModel.safextBkngCustomCharge.length>0">
              <div class="row" *ngIf="CommercialDataModel.safextFlag==1">
                <div class="col-lg-12 col-md-12">
                  <div class="col-lg-2 col-md-2 zonalheadingbar safextenson" style="max-width: 20rem !important;">PINCODE/STATE</div>
                  <div class="col-lg-1 col-md-1 zonalheadingbar"  *ngIf="CommercialDataModel.slabFlag==0">RATE</div>
                  <div class="col-lg-1 col-md-1 zonalheadingbar"  *ngIf="CommercialDataModel.slabFlag==0">MIN&nbsp;AMOUNT</div>


                  <div *ngIf="CommercialDataModel.slabFlag==1">
                    <div>
                      <div class="col-lg-1 col-md-1   flex-direction" style="padding: 0 !important;">  
                        <div class="col-lg-12 col-md-12 zonalheadingbar1">SLAB</div>                    
                                      <!-- hover  -->
                          <div class="col-lg-12 col-md-12 zonalheadingbar1"  style="padding: 0 !important;">
                            <input name="zmslabfrom1" autocomplete="true"  autocomplete="true" class="dropdown"  id="zonal-input" disabled placeholder="{{zmslabfrom1}}-{{zmslabto1}}" maxlength ="19" > 
                            <div class="dropdown"></div>
                            </div>
                          <!-- Hover -->
                      </div>
                      <div>
                        <div class="col-lg-1 col-md-1  ">                  
                          <div class="row" id="contentInside">
                            <div class="col-lg-12 col-md-12 zonalheadingbar">MINIMUM AMOUNT</div>                    
                          </div>                                 
                        </div> 
                        </div>
                    </div>
                    <div *ngIf="CommercialDataModel.ZonalSlabCounter==2 || CommercialDataModel.ZonalSlabCounter>2">
                      <div class="col-lg-1 col-md-1   flex-direction" style="padding: 0 !important;" >  
                        <div class="col-lg-12 col-md-12 zonalheadingbar1">SLAB</div>                    
                                      <!-- hover  -->
                                      <div class="col-lg-12 col-md-12 zonalheadingbar1"  style="padding: 0 !important;">
                                        <input name="zmslabfrom2" autocomplete="true"  autocomplete="true" class="dropdown"  id="zonal-input" disabled placeholder="{{zmslabfrom2}}-{{zmslabto2}}" maxlength ="19" > 
                                        <div class="dropdown"></div>
                                        </div>
                          <!-- Hover -->
                      </div>
                      <div>
                        <div class="col-lg-1 col-md-1  " style="padding: 0 !important;" >                  
                          <div class="row" id="contentInside">
                            <div class="col-lg-12 col-md-12 zonalheadingbar">MINIMUM AMOUNT</div>                    
                          </div>                                 
                        </div> 
                        </div>
                    </div>
                    <div *ngIf="CommercialDataModel.ZonalSlabCounter==3 || CommercialDataModel.ZonalSlabCounter>3">
                      <div class="col-lg-1 col-md-1   flex-direction" style="padding: 0 !important;" >  
                        <div class="col-lg-12 col-md-12 zonalheadingbar1">SLAB</div>                    
                                      <!-- hover  -->
                                      <div class="col-lg-12 col-md-12 zonalheadingbar1"  style="padding: 0 !important;">
                                        <input name="zmslabfrom3" autocomplete="true"  autocomplete="true" class="dropdown"  id="zonal-input" disabled placeholder="{{zmslabfrom3}}-{{zmslabto3}}" > 
                                        <div class="dropdown"></div>
                                        </div>
                          <!-- Hover -->
                      </div>
                      <div>
                        <div class="col-lg-1 col-md-1  " style="padding: 0 !important;">                  
                          <div class="row" id="contentInside">
                            <div class="col-lg-12 col-md-12 zonalheadingbar">MINIMUM AMOUNT</div>                    
                          </div>                                 
                        </div> 
                        </div>
                    </div>
                    <div *ngIf="CommercialDataModel.ZonalSlabCounter==4 || CommercialDataModel.ZonalSlabCounter>4">
                      <div class="col-lg-1 col-md-1   flex-direction" style="padding: 0 !important;" >  
                        <div class="col-lg-12 col-md-12 zonalheadingbar1">SLAB</div>                    
                                      <!-- hover  -->
                                      <div class="col-lg-12 col-md-12 zonalheadingbar1"  style="padding: 0 !important;">
                                        <input name="zmslabfrom4" autocomplete="true"  autocomplete="true" class="dropdown"  id="zonal-input" disabled placeholder="{{zmslabfrom4}}-{{zmslabto4}}" > 
                                        <div class="dropdown"></div>
                                        </div>
                          <!-- Hover -->
                      </div>
                      <div>
                        <div class="col-lg-1 col-md-1  " style="padding: 0 !important;">                  
                          <div class="row" id="contentInside">
                            <div class="col-lg-12 col-md-12 zonalheadingbar">MINIMUM AMOUNT</div>                    
                          </div>                                 
                        </div> 
                        </div>
                    </div>
                    <div *ngIf="CommercialDataModel.ZonalSlabCounter==5">
                      <div class="col-lg-1 col-md-1   flex-direction" style="padding: 0 !important;" >  
                        <div class="col-lg-12 col-md-12 zonalheadingbar1">SLAB</div>                    
                                      <!-- hover  -->
                                      <div class="col-lg-12 col-md-12 zonalheadingbar1"  style="padding: 0 !important;">
                                        <input name="zmslabfrom5" autocomplete="true"  autocomplete="true" class="dropdown"  id="zonal-input" disabled placeholder="{{zmslabfrom5}}-{{zmslabto5}}" > 
                                        <div class="dropdown"></div>
                                        </div>
                          <!-- Hover -->
                      </div>
                      <div>
                        <div class="col-lg-1 col-md-1  " style="padding: 0 !important;">                  
                          <div class="row" id="contentInside">
                            <div class="col-lg-12 col-md-12 zonalheadingbar">MINIMUM AMOUNT</div>                    
                          </div>                                 
                        </div> 
                        </div>
                    </div>
                    </div>
                </div>
              </div>
               <div class="row margintop10"  *ngFor="let field of CommercialDataModel.safextBkngCustomCharge; let i = index">
                <div class="col-lg-12 col-md-12">
                  <div class="col-lg-2 col-md-2 safextenson " *ngIf="CommercialDataModel.safeextTypeName=='PINCODE'" style="max-width: 20rem !important;" >
                    <a style="cursor: pointer;" (click)="openDialogPincodeSearch(field,'toId',true)">
                      <span class="fa fa-search fa-lg" id="search-icon"></span>
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                        <input class="pincode_input" #toId='ngModel' required name="toId-{{i}}" matInput  autocomplete="true" [(ngModel)]="field.toId" 
                         (keydown.enter)="openDialogPincodeSearch(field,'toId',true)" readonly
                         [matTooltip]="field.toId" [matTooltipDisabled]="!field || !field.toId || field.toId.length<13" matTooltipPosition="above">
                      </mat-form-field>
                      <span *ngIf="(toId.errors?.required && (toId.touched || fCommercial.submitted))"
                        class="hasErrorMsgCom">
                        Required&nbsp;!
                      </span>
                    </a>
                  </div>
                  <div class="col-lg-2 col-md-2  safextenson" *ngIf="CommercialDataModel.safeextTypeName=='STATE'">
                    <a style="cursor: pointer;" (click)="openDialogStateSearch(field,'toId',true)">
                      <span class="fa fa-search fa-lg" id="search-icon"></span>
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                        <input class="pincode_input" #toId='ngModel' required name="toId-{{i}}" matInput  autocomplete="true" [(ngModel)]="field.stateNamesto" 
                         (keydown.enter)="openDialogStateSearch(field,'toId',true)" readonly
                         [matTooltip]="field.stateNamesto" [matTooltipDisabled]="!field || !field.stateNamesto || field.stateNamesto.length<13" matTooltipPosition="above">
                      </mat-form-field>
                      <span *ngIf="(toId.errors?.required && (toId.touched || fCommercial.submitted))"
                        class="hasErrorMsgCom">
                        Required&nbsp;!
                      </span>
                    </a>
                      </div>

                <div *ngIf="CommercialDataModel.slabFlag==0">
                  <div class="col-lg-1 col-md-1  ">
                    <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                        <input #bcmPrice='ngModel' required name="price-{{i}}" matInput  autocomplete="true" [(ngModel)]="field.price" numeric maxlength={{maxLength}}  decimals="2">
                      </mat-form-field>
                      <span *ngIf="(bcmPrice.errors?.required && (bcmPrice.touched || fCommercial.submitted))"
                        class="hasErrorMsgCom">
                        Required&nbsp;!
                      </span>
  <span *ngIf="(bcmPrice.errors?.isNumeric && bcmPrice.touched && !bcmPrice.errors?.required)"
                        class="hasErrorMsgCom">
                          Invalid !
                      </span>
                  </div>
                  <div class="col-lg-1 col-md-1  ">
                    <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                        <input required #bcmMinAmt='ngModel' name="minAmt-{{i}}" matInput  autocomplete="true" [(ngModel)]="field.minAmt" numeric maxlength ="8" decimals="2">
                      </mat-form-field>
                      <span *ngIf="(bcmMinAmt.errors?.required && (bcmMinAmt.touched || fCommercial.submitted))"
                        class="hasErrorMsgCom">
                        Required&nbsp;!
 </span>
                      <span *ngIf="(bcmMinAmt.errors?.isNumeric && bcmMinAmt.touched && !bcmMinAmt.errors?.required)"
                        class="hasErrorMsgCom">
                          Invalid !
                      </span>
                  </div>
                </div>

                  <div *ngIf="CommercialDataModel.slabFlag==1">
                    <div >
                      <div class="col-lg-1 col-md-1  ">
                        <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                            <input #bcmPrice='ngModel' required  name="price-{{i}}" matInput  autocomplete="true"  [(ngModel)]="field.price" numeric maxlength={{maxLength}} decimals="2">
                          </mat-form-field>
                          <span *ngIf="(bcmPrice.errors?.required && (bcmPrice.touched || fCommercial.submitted))"
                            class="hasErrorMsgCom">
                            Required&nbsp;!
 </span>
                      <span *ngIf="(bcmPrice.errors?.isNumeric && bcmPrice.touched && !bcmPrice.errors?.required)"
                        class="hasErrorMsgCom">
                          Invalid !
                          </span>
                      </div>
                      <div class="col-lg-1 col-md-1  ">
                        <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                          <input required #bcmMinAmt='ngModel' name="minAmt-{{i}}" matInput  autocomplete="true" [(ngModel)]="field.minAmt" numeric maxlength ="8" decimals="2"
                          (input)="updatesafextChargeCusBkgMinAmt()">
                        </mat-form-field>
                        <span *ngIf="(bcmMinAmt.errors?.required && (bcmMinAmt.touched || fCommercial.submitted))"
                          class="hasErrorMsgCom">
                          Required&nbsp;!
   </span>
                      <span *ngIf="(bcmMinAmt.errors?.isNumeric && bcmMinAmt.touched && !bcmMinAmt.errors?.required)"
                        class="hasErrorMsgCom">
                          Invalid !
                        </span>
                      </div>
    
                    </div>
                  <div  *ngIf="CommercialDataModel.ZonalSlabCounter==2 || CommercialDataModel.ZonalSlabCounter>2">
                    <div class="col-lg-1 col-md-1  ">
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                          <input #bcmPrice2='ngModel' required  name="price2-{{i}}" matInput  autocomplete="true"  [(ngModel)]="field.price2" numeric maxlength={{maxLength}} decimals="2">
                        </mat-form-field>
                        <span *ngIf="(bcmPrice2.errors?.required && (bcmPrice2.touched || fCommercial.submitted))"
                          class="hasErrorMsgCom">
                          Required&nbsp;!
 </span>
                      <span *ngIf="(bcmPrice2.errors?.isNumeric && bcmPrice2.touched && !bcmPrice2.errors?.required)"
                        class="hasErrorMsgCom">
                          Invalid !
                        </span>
                    </div>
                    <div class="col-lg-1 col-md-1  ">
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                        <input required #bcmMinAmt2='ngModel'  name="minAmt2-{{i}}" matInput  autocomplete="true" [(ngModel)]="field.minAmt2" numeric maxlength ="8" decimals="2"
                        [disabled]="isOptionBSelected">
                      </mat-form-field>
                      <span *ngIf="(bcmMinAmt2.errors?.required && (bcmMinAmt2.touched || fCommercial.submitted))"
                        class="hasErrorMsgCom">
                        Required&nbsp;!
   </span>
                      <span *ngIf="(bcmMinAmt2.errors?.isNumeric && bcmMinAmt2.touched && !bcmMinAmt2.errors?.required)"
                        class="hasErrorMsgCom">
                          Invalid !
                      </span>
                    </div>
  
                  </div>
                  <div  *ngIf="CommercialDataModel.ZonalSlabCounter==3 || CommercialDataModel.ZonalSlabCounter>3">
                    <div class="col-lg-1 col-md-1  ">
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                          <input #bcmPrice3='ngModel' required  name="price3-{{i}}" matInput  autocomplete="true" [(ngModel)]="field.price3" numeric maxlength={{maxLength}} decimals="2">
                        </mat-form-field>
                        <span *ngIf="(bcmPrice3.errors?.required && (bcmPrice3.touched || fCommercial.submitted))"
                          class="hasErrorMsgCom">
                          Required&nbsp;!
  </span>
                      <span *ngIf="(bcmPrice3.errors?.isNumeric && bcmPrice3.touched && !bcmPrice3.errors?.required)"
                        class="hasErrorMsgCom">
                          Invalid !
                        </span>
                    </div>
                    <div class="col-lg-1 col-md-1  ">
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                        <input required #bcmMinAmt3='ngModel'  name="minAmt3-{{i}}" matInput  autocomplete="true"  [(ngModel)]="field.minAmt3" numeric maxlength ="8" decimals="2"
                        [disabled]="isOptionBSelected">
                      </mat-form-field>
                      <span *ngIf="(bcmMinAmt3.errors?.required && (bcmMinAmt3.touched || fCommercial.submitted))"
                        class="hasErrorMsgCom">
                        Required&nbsp;!
 </span>
                      <span *ngIf="(bcmMinAmt3.errors?.isNumeric && bcmMinAmt3.touched && !bcmMinAmt3.errors?.required)"
                        class="hasErrorMsgCom">
                          Invalid !
                      </span>
                    </div>
  
                  </div>
                  <div  *ngIf="CommercialDataModel.ZonalSlabCounter==4 || CommercialDataModel.ZonalSlabCounter>4">
                    <div class="col-lg-1 col-md-1  ">
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                          <input #bcmPrice4='ngModel' required  name="price4-{{i}}" matInput  autocomplete="true" [(ngModel)]="field.price4" numeric maxlength={{maxLength}} decimals="2">
                        </mat-form-field>
                        <span *ngIf="(bcmPrice4.errors?.required && (bcmPrice4.touched || fCommercial.submitted))"
                          class="hasErrorMsgCom">
                          Required&nbsp;!
 </span>
                        <span *ngIf="(bcmPrice4.errors?.isNumeric && bcmPrice4.touched && !bcmPrice4.errors?.required)"
                          class="hasErrorMsgCom">
                            Invalid !
                        </span>
                    </div>
                    <div class="col-lg-1 col-md-1  ">
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                        <input required #bcmMinAmt4='ngModel'  name="minAmt4-{{i}}" matInput  autocomplete="true"  [(ngModel)]="field.minAmt4" numeric maxlength ="8" decimals="2"
                        [disabled]="isOptionBSelected">
                      </mat-form-field>
                      <span *ngIf="(bcmMinAmt4.errors?.required && (bcmMinAmt4.touched || fCommercial.submitted))"
                        class="hasErrorMsgCom">
                        Required&nbsp;!
  </span>
                      <span *ngIf="(bcmMinAmt4.errors?.isNumeric && bcmMinAmt4.touched && !bcmMinAmt4.errors?.required)"
                        class="hasErrorMsgCom">
                          Invalid !
                      </span>
                    </div>
  
                  </div>
                  <div  *ngIf="CommercialDataModel.ZonalSlabCounter==5">
                    <div class="col-lg-1 col-md-1  ">
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                          <input #bcmPrice5='ngModel' required name="price5-{{i}}" matInput  autocomplete="true" [(ngModel)]="field.price5" numeric maxlength={{maxLength}} decimals="2">
                        </mat-form-field>
                        <span *ngIf="(bcmPrice5.errors?.required && (bcmPrice5.touched || fCommercial.submitted))"
                          class="hasErrorMsgCom">
                          Required&nbsp;!
 </span>
                        <span *ngIf="(bcmPrice5.errors?.isNumeric && bcmPrice5.touched && !bcmPrice5.errors?.required)"
                          class="hasErrorMsgCom">
                            Invalid !
                        </span>
                    </div>
                    <div class="col-lg-1 col-md-1  ">
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                        <input required #bcmMinAmt5='ngModel'  name="minAmt5-{{i}}" matInput  autocomplete="true"  [(ngModel)]="field.minAmt5" numeric maxlength ="8" decimals="2"
                        [disabled]="isOptionBSelected">
                      </mat-form-field>
                      <span *ngIf="(bcmMinAmt5.errors?.required && (bcmMinAmt5.touched || fCommercial.submitted))"
                        class="hasErrorMsgCom">
                        Required&nbsp;!
 </span>
                      <span *ngIf="(bcmMinAmt5.errors?.isNumeric && bcmMinAmt5.touched && !bcmMinAmt5.errors?.required)"
                        class="hasErrorMsgCom">
                          Invalid !
                      </span>
                    </div>
  
                  </div>
                </div>
                <div class="col-lg-1 col-md-1 " style="width: 0px !important;"> <span ><em matTooltipPosition="above" class="material-icons customeRemoveIcon" (click)="deleteSfxBkngCusM(field, i)">delete</em></span></div>
                </div>
              </div>
            </div>
              </form>

              <hr id="collapsedivider">
              </div>
            </div>
              <!-- Pricing parameter -->
              <h5 class="zonalheading pricingparameters">Pricing Parameters:</h5>
              <div class="row" >
                <div class="col-lg-12 col-md-12" style="margin-bottom: 5px;" *ngFor="let fielddata of CommercialDataModel.pricingParamTrans| sortBy:'asc':'pricingLabel' ; let i = index">
                  <div *ngIf="fielddata.attrName==='RADIO BUTTON'">
                  <div class="col-lg-3 col-md-3   label-text" style="padding: 0 !important;">{{fielddata.pricingLabel}}</div>
                  <div class="col-lg-6 col-md-6  ">
                    <div class="row col-lg-6 col-md-6  ">
                      <mat-radio-group name="rrflag-{{i}}" style="padding-left: 1rem !important;" *ngFor="let rr of RRCusFlagList; index as radio-i" class="example-radio-group"
                   [(ngModel)]="fielddata.rrFlag">
                  <mat-radio-button class="example-radio-button" name="rrFlag"
                     (change)="changeRRFlagPP(rr.id,fielddata)" [value]="rr.id" >
                    {{rr.value}}
                  </mat-radio-button>
                 </mat-radio-group>
                    </div>
                  <div class="col-lg-2 col-md-2   row-margin" style="margin-left: 1rem;" *ngFor="let type of fielddata.attributeList">
                      <mat-radio-group #pricingRadio='ngModel' name="pricingParamVal-{{i}}" [(ngModel)]="fielddata.pricingParamVal" aria-label="Select an option" [required]="!fielddata.safexSlaDisabled" [disabled]="fielddata.safexSlaDisabled">
                        <mat-radio-button [value]="type.id">{{type.descr}}</mat-radio-button>
                      </mat-radio-group>
                  </div>
                  <span *ngIf="(fielddata.rrFlag===2 && !fielddata.pricingParamVal && (fCommercial.submitted))" class="hasErrorMsgCom" style="margin-left: 46% !important;margin-bottom: 0px !important;">
                    Required&nbsp;!</span>
                </div>
                </div>
                  <div *ngIf="fielddata.attrName==='TEXT'">
                  <div class="col-lg-3 col-md-3   label-text" style="padding-left: 0rem !important;"  >{{fielddata.pricingLabel}}</div>   
                  <div class="col-lg-6 col-md-6  ">
                    <div class="row col-lg-6 col-md-6  ">
                      <mat-radio-group name="rrflag-{{i}}" style="padding-left: 1rem !important;" *ngFor="let rr of RRCusFlagList; index as radio-i" class="example-radio-group"
                   [(ngModel)]="fielddata.rrFlag">
                  <mat-radio-button class="example-radio-button" name="rrFlag"
                     (change)="changeRRFlagPP(rr.id,fielddata)" [value]="rr.id" >
                    {{rr.value}}
                  </mat-radio-button>
                 </mat-radio-group>
                    </div>
                    <div class="col-lg-2 col-md-2   row-margin">
                      <mat-form-field  appearance="outline" style="width: 100%;">
                        <input matInput  #pricingParamVal='ngModel' autocomplete="true" name="pricingParamVal-{{i}}" [required]="!fielddata.safexSlaDisabled"[disabled]="fielddata.safexSlaDisabled" 
                        [(ngModel)]="fielddata.pricingParamVal" maxlength ="7" numeric decimals="2"   >
                      </mat-form-field>    
                      <span *ngIf="(pricingParamVal.errors?.required && (pricingParamVal.touched || fCommercial.submitted))"
                        class="hasErrorMsgCom" style="left: 0 !important;">
                        Required&nbsp;!
                      </span>
                      <span *ngIf="(((pricingParamVal.errors?.isNumeric) || ((pricingParamVal.errors?.isNumeric) && fCommercial.submitted)) && (!pricingParamVal.errors?.required))" 
                     class="hasErrorMsgCom">
                        Invalid&nbsp;!
                      </span>                  
                    </div>
                    <div class="col-lg-2 col-md-2   row-margin"></div>
                  </div>
                </div>
                <div *ngIf="fielddata.attrName==='DROP DOWN'">
                  <div class="col-lg-3 col-md-3   label-text" style="padding-left: 0rem !important;"  >{{fielddata.pricingLabel}}</div>  
                  <div class="col-lg-6 col-md-6  ">
                    <div class="row col-lg-6 col-md-6  ">
                      <mat-radio-group style="padding-left: 1rem !important;" *ngFor="let rr of RRCusFlagList; index as radio-i" class="example-radio-group"
                   [(ngModel)]="fielddata.rrFlag" name="rrflag-{{i}}">
                  <mat-radio-button class="example-radio-button" name="rrFlag"
                     (change)="changeRRFlagPP(rr.id,fielddata)" [value]="rr.id" >
                    {{rr.value}}
                  </mat-radio-button>
                 </mat-radio-group>
                    </div>
                    <div class="col-lg-2 col-md-2   row-margin">
                      <mat-form-field  appearance="outline" style="width: 100%;">
                        <input matInput  numeric #safexSlaDisabled='ngModel' autocomplete="true" name="safexSlaDisabled-{{i}}" [required]="!fielddata.safexSlaDisabled" [disabled]="fielddata.safexSlaDisabled" [(ngModel)]="fielddata.attr3" maxlength ="10" >
                      </mat-form-field> 
                      <span *ngIf="(safexSlaDisabled.errors?.required && (safexSlaDisabled.touched || fCommercial.submitted))"
                        class="hasErrorMsgCom">
                        Required&nbsp;!
                      </span>
                      <span *ngIf="(((safexSlaDisabled.errors?.isNumeric) || ((safexSlaDisabled.errors?.isNumeric) && fCommercial.submitted)) && (!safexSlaDisabled.errors?.required))" 
                     class="hasErrorMsgCom">
                        Invalid&nbsp;!
                      </span>                                   
                    </div>
                    <div class="col-lg-1 col-md-1  "></div>
                    <div class="from col-lg-2 col-md-2   row-margin" >
                      <mat-form-field appearance="outline" style="width: 100%;">
                        <mat-select disableOptionCentering panelClass="creditSelect2"  #pricingDropDown='ngModel' [required]="!fielddata.safexSlaDisabled" [disabled]="fielddata.safexSlaDisabled" [(ngModel)]="fielddata.pricingParamVal" name="pricingParamVal-{{i}}">
                          <mat-option *ngFor="let data of fielddata.attributeList" [value]="data.id">
                            {{data.descr}}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <span *ngIf="(pricingDropDown.errors?.required && (pricingDropDown.touched || fCommercial.submitted))" class="hasErrorMsgCom" style="margin-left: 0px !important;margin-bottom: 0px !important;">
                        Required&nbsp;!
                      </span>
                    </div>            
                  </div>
                    </div>
                  </div>
              </div>
            
            <div style="margin-top: 1%;">
              <mat-accordion>
                <div class="example-button-row text-center" style="margin-top: 2%" *ngxPermissionsOnly="['COMMERCIAL_CREATE']">
                  <button id="commercialDraftButton" *ngIf="!isCopyRateCard" class="btn1" mat-raised-button color="primary"
                  (click)="isValidCommercial('save')" type="submit">
                  Save And Create New Commercial
                 </button>
                 
                  <button id="commercialNextButton" *ngIf="!isCopyRateCard" class="btn1" mat-raised-button color="primary"
                    (click)="isValidCommercial('continue')" type="submit">
                    Continue
                  </button>
                  <button id="commercialNextButton" *ngIf="isCopyRateCard" class="btn1" mat-raised-button color="primary"
                  #tooltip="matTooltip"  matTooltip="No new Commercials will be copied on Continue !! "
                    (click)="isValidCommercial('continue')" type="submit">
                    Continue
                  </button>
                  <button id="commercialNextButton" *ngIf="isCopyRateCard && oldCommercialIdList.length>1" class="btn1" mat-raised-button color="primary"
                    #tooltip="matTooltip"  matTooltip="Save and Proceed to Next Commercial !! "
                    (click)="isValidCommercial('save')" type="submit">
                    Next Commercial 
                  </button>
                </div>
              </mat-accordion>
            </div>
          </div>
        </form>
          </mat-card-content>
        </mat-expansion-panel>

        <!-- Commandment Section Starts -->
        <mat-expansion-panel id="box-shadow" [expanded]='isExpanded' #four (opened)="openCommandment()" (closed)="closeCommandment()" *ngxPermissionsOnly="['COMMANDMENT_READ']">
          <mat-expansion-panel-header style="cursor: pointer;" (click)="opencmdmnt()">
            <img class="rcIcon" [src]="four.expanded ? '/assets/images/cmnd_green.png': '/assets/images/cmnd_gray.png'" alt="COMMANDMENT"> Commandment
          </mat-expansion-panel-header>
         <mat-card-content>
          <div *ngIf="model.cmdmntLevel=='COMMERCIAL LEVEL'" class="commercialboxflex" style="margin-top: 1rem !important;">
            <div class="flexproperty" *ngIf="commercial.length>0">
              <div *ngFor="let data of commercial">
                <div (click)="getCommandmentDetailbyId(data.id)" [ngClass]="{
                  'commercialbox1': ((selectedIdcmd == data.id)),
                  'commercialbox': (selectedIdcmd != data.id)
                  }" style="margin-right: 1rem;">
                  <div class="container">
                    <em class="material-icons deleteIcon1"></em>
                    <h6 style="cursor: pointer;">{{data.id}}</h6>

                    <mat-divider id="tileLine" class="1"></mat-divider>
                    <p *ngIf="data.chargeByName.length>13" class="card_minor_text to_upper_case heading_bold" [matTooltip]="data.chargeByName | uppercase">{{data.chargeByName}}</p>
                    <p *ngIf="data.chargeByName.length<13" class="card_minor_text to_upper_case heading_bold" >{{data.chargeByName}}</p>
                    <P *ngIf="data.prdctCtgy.length<13" class="card_minor_text to_upper_case">PCT: {{data.prdctCtgy}}</P>
                    <P *ngIf="data.prdctCtgy.length>13" class="card_minor_text to_upper_case" [matTooltip]="data.prdctCtgy">PCT: {{data.prdctCtgy}}</P>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <app-commandment *ngIf="showcmdnt" [inputData]="commandmentInput" (cmdmntSaved)="onCmdmntSaved($event)" (anyCmdmntSaved)="onAnyCmdmntSaved($event)"></app-commandment>
         </mat-card-content>
        </mat-expansion-panel>
        <form (ngSubmit)="fTerms.form.valid" appRangeTnc #fTerms="ngForm" name="fTerms">
        <mat-expansion-panel id="box-shadow" [expanded]='isExpanded' #five (opened)="openTerms()" (closed)="closeTerms()">
          <mat-expansion-panel-header style="cursor: pointer;" (click)="getTncDetail()">
            <img class="rcIcon" [src]="five.expanded ? '/assets/images/tnc_green.png': '/assets/images/tnc_gray.png'" alt="Terms & Conditions">  Terms & Conditions
          </mat-expansion-panel-header>
          <mat-card-content>  
                      
            <div class="row" *ngxPermissionsOnly="['FUEL DETAILS_READ','FLFC_READ']">
              <div class="col-lg-4 col-md-4   margintop10" >
                <div class="col-lg-6 col-md-6   label-text paddingleftzero tncheading">Fuel Details</div>
                <div class="col-lg-6 col-md-6">
                  <mat-radio-group style="margin-left: -2.2rem;" class="example-radio-group" *ngFor="let season of gst"
                  #fuelDtlsFlag="ngModel" name="fuelDtlsFlag" [(ngModel)]="modeltnc.fuelDtlsFlag">
                  <mat-radio-button style="margin-left: 5px;margin-right: 15px;" class="example-radio-button" (change)="fuelDtlsFlage($event)" [value]="season.id">
                    {{season.value}}
                  </mat-radio-button>
                </mat-radio-group>
                </div>
              </div>   

            <div *ngIf="modeltnc.fuelDtlsFlag==1">            
              <div class="col-lg-12 col-md-12 paddingleftzero">
                <div class="row">
                  <div class="col-lg-6 col-md-6  ">
                    <div class="col-lg-4 col-md-4   label-text">Fuel Type</div>
                    <div class="col-lg-8 col-md-8  ">
                      <mat-radio-group style="margin-left: -5px;" class="example-radio-group" *ngFor="let season of fuelTypeList"
                       #lkpFuelTypeId="ngModel"  name="lkpFuelTypeId" [(ngModel)]="modeltnc.lkpFuelTypeId">
                      <mat-radio-button class="example-radio-button" [value]="season.id" (change)="furlTypeChange($event)">
                        {{season.descr}}
                      </mat-radio-button>
                    </mat-radio-group>
                    </div>
                </div>
                <div class="col-lg-2 col-md-2  "></div>
                <div class="col-lg-4 col-md-4  ">
                  <div class="col-lg-6 col-md-6   label-text mrgn_btm_2rem">Base Fuel Index<span class="redMark"> *</span></div>
                  <div class="col-lg-6 col-md-6  ">
                    <mat-form-field appearance="outline" style="height: 2.7rem;">
                      <mat-select disableOptionCentering panelClass="creditSelect2" #index="ngModel" name="lkpFuelIndexId" [(ngModel)]="modeltnc.lkpFuelIndexId" (selectionChange)="furlIndexChange()" required>
                        <mat-option *ngFor="let item of baseFuelIndexList | sortBy:'asc':'descr'" [value]="item.id" 
                        [matTooltip]="item.descr" [matTooltipDisabled]="item.descr.length<27" matTooltipPosition="above">
                          {{item.descr}}
                        </mat-option>
                      </mat-select>
                      </mat-form-field>                     
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-lg-6 col-md-6  "></div>
                <div class="col-lg-2 col-md-2  "></div>
                <div class="col-lg-4 col-md-4  ">
                  <div class="col-lg-6 col-md-6  "></div>
                  <div class="col-lg-6 col-md-6  ">
                    <span style="top: -2.7rem !important;" *ngIf="(index.errors?.required && (index.touched || fTerms.submitted))" class="hasErrorMsgCom">
                      Required !
                    </span>
                  </div>
                </div>
              </div>


              <div class="row">
                <div class="col-lg-4 col-md-4  ">
                  <div class="col-lg-6 col-md-6   label-text mrgn_btm_2rem">Base Fuel Date<span class="redMark"> *</span></div>
                  <div class="col-lg-6 col-md-6  ">
                    <mat-form-field appearance="outline" id="datepickerwidth">
                      <input matInput  autocomplete="true"  [required]="modeltnc.lkpFuelTypeId && modeltnc.lkpFuelIndexId"
                      [disabled]="!modeltnc.lkpFuelTypeId || !modeltnc.lkpFuelIndexId"
                      #baseFuelDt="ngModel" [matDatepicker]="pickerappli" name="baseFuelDt" [(ngModel)]="modeltnc.baseFuelDt" class="date_picker"
                        placeholder="DD/MM/YYYY" (blur)="BaseFuelDate(modeltnc)" (dateChange)="BaseFuelDate(modeltnc)">
                      <mat-datepicker panelClass="creditDatepicker" #pickerappli></mat-datepicker>
                      <mat-datepicker-toggle matSuffix [for]="pickerappli"></mat-datepicker-toggle>
                    </mat-form-field>
                    <div *ngIf="modeltnc.lkpFuelTypeId && modeltnc.lkpFuelIndexId">
                    <span *ngIf="(baseFuelDt.errors?.required && (baseFuelDt.touched || fTerms.submitted))"
                        class="hasErrorMsgCom">
                        Required !
                    </span></div>
                  </div>
                </div>
                <div class="col-lg-4 col-md-4  "></div>
                <div class="col-lg-4 col-md-4  ">
                  <div class="col-lg-6 col-md-6 label-text">Fuel Price Per-Litre<span class="redMark"> *</span></div>
                    <div class="col-lg-3 col-md-3  ">
                      <mat-form-field appearance="outline" style="width: 100%;">
                        <input numeric  maxlength="6" decimals="2" matInput  autocomplete="true" name="fuelPrice" #fuelPrice="ngModel"  [(ngModel)]="modeltnc.fuelPrice" disabled>
                      </mat-form-field>
                      <span *ngIf="(modeltnc.baseFuelDt && !priceFound)" class="hasErrorMsgCom">Required !</span>
                      <div class="col-lg-4 col-md-4"></div>
                    </div>
                </div>
              </div>

              <div class="row">
                <div class="col-lg-4 col-md-4  ">
                  <div class="col-lg-6 col-md-6   label-text mrgn_btm_2rem">Calculate Based On<span class="redMark"> *</span></div>
                    <div class="col-lg-6 col-md-6  ">
                      <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                        <mat-select disableOptionCentering panelClass="creditSelect2" required #fuelCalcBasedOn="ngModel" name="lkpincr" [(ngModel)]="modeltnc.fuelCalcBasedOn">
                       <mat-option value="BASIC FREIGHT">BASIC FREIGHT</mat-option>
                        <mat-option value="TOTAL">TOTAL</mat-option>
                        </mat-select>
                      </mat-form-field>                     
                    </div>
                </div>
                <div class="col-lg-4 col-md-4  "></div>
                <div class="col-lg-4 col-md-4  ">
                  <div class="col-lg-6 col-md-6   label-text mrgn_btm_2rem">Fuel Surcharge<span class="redMark"> *</span></div>
                  <div class="col-lg-6 col-md-6  " style="width: 48.5%;">
                    <div class="col-lg-5 col-md-5   from" style="padding-right: .7rem">
                      <mat-form-field appearance="outline">
                        <mat-select disableOptionCentering panelClass="creditSelect2" disabled='true' required value="%">
                          <mat-option value="RS" >RS</mat-option>
                          <mat-option value="%" >%</mat-option>
                        </mat-select>
                        </mat-form-field>
                     </div>
                    <div class="col-lg-7 col-md-7   from">
                      <mat-form-field appearance="outline"  style="margin-left: .7rem;">
                       <input matInput  autocomplete="true" 	
                       required #fuelSurchrg="ngModel" name="fuelSurchrg" [(ngModel)]="modeltnc.fuelSurchrg" numeric maxlength="8" decimals="2">
                     </mat-form-field>
                     <span *ngIf="(fuelSurchrg.errors?.required && (fuelSurchrg.touched || fTerms.submitted))"
                          class="hasErrorMsgCom">
                          Required !
                      </span>      
                      <span *ngIf="(fuelSurchrg.errors?.isNumeric && fuelSurchrg.touched && !fuelSurchrg.errors?.required)"
                        class="hasErrorMsgCom">
                          Invalid !
                      </span>
                    </div>                    
                  </div>
                </div>
              </div>

              
              <div class="row">
                <div class="col-lg-4 col-md-4  ">
                  <div class="col-lg-6 col-md-6  "></div>
                  <div class="col-lg-6 col-md-6  ">                  
                    <span style="top: -2.7rem !important;" *ngIf="(fuelCalcBasedOn.errors?.required && (fuelCalcBasedOn.touched || fTerms.submitted))"
                    class="hasErrorMsgCom">Required !</span>
                  </div>
                </div>
                <div class="col-lg-4 col-md-4  "></div>
                 <div class="col-lg-4 col-md-4  ">
                  <div class="col-lg-6 col-md-6  "></div>
                  <div class="col-lg-6 col-md-6  ">
                  </div>                  
                 </div>
                </div>
                
              <div class="row">
                <div class="col-lg-4 col-md-4  ">
                  <div class="col-lg-6 col-md-6   label-text">FLFC Applicable</div>
                  <div class="col-lg-6 col-md-6  ">
                    <mat-radio-group style="padding-left: 0.2rem !important;" class="example-radio-group" *ngFor="let season of gst"
                    #flfcFlag="ngModel" name="flfcFlag" [(ngModel)]="modeltnc.flfcFlag">
                    <mat-radio-button class="example-radio-button" [value]="season.id" (change)="FLFCApp($event)">
                      {{season.value}}
                    </mat-radio-button>
                  </mat-radio-group>
                  </div>  
                </div>
                <div class="col-lg-4 col-md-4  "></div>
                <div class="col-lg-4 col-md-4  ">
                  <div *ngIf="modeltnc.flfcFlag==1">
                    <div class="col-lg-6 col-md-6   label-text mrgn_btm_2rem">FLFC Clause<span class="redMark"> *</span></div>
                    <div class="col-lg-6 col-md-6" style="padding: 0px !important;">
                      <div class="col-lg-2 col-md-2">RS</div>
                      <div class="col-lg-3 col-md-3" style="padding: 0px !important;">
                        <mat-form-field appearance="outline">
                         <input matInput  autocomplete="true" value="10" #flfcClause1="ngModel" appGreaterZero
                         required #flfcClause1="ngModel"   name="flfcClause1" [(ngModel)]="modeltnc.flfcClause1" maxlength="8"
                         [matTooltip]="modeltnc.flfcClause1" [matTooltipDisabled]="modeltnc.flfcClause1 && modeltnc.flfcClause1.length<5" matTooltipPosition="above">
                       </mat-form-field>
                      <span style="margin-left: -8px;" *ngIf="(flfcClause1.errors?.required && (flfcClause1.touched || fTerms.submitted))"
                      class="hasErrorMsgCom">
                          Required !
                      </span>
                      <span *ngIf="(((flfcClause1.errors?.greaterZero) || ((flfcClause1.errors?.greaterZero) && fTerms.submitted)) && (!flfcClause1.errors?.required))"  class="hasErrorMsgCom" style="margin-left: 0 !important;">
                        Greater Than 0&nbsp;!
                        </span>

                       </div>
                       <div class="col-lg-3 col-md-3"style="padding: 0px !important;">
                        <mat-form-field appearance="outline">
                          <mat-select disableOptionCentering panelClass="creditSelect2" required 
                            #fuelSurchrgMeasure="ngModel" name="fuelSurchrgMeasure" [(ngModel)]="modeltnc.fuelSurchrgMeasure">
                            <mat-option value="RS" >RS</mat-option>
                            <mat-option value="%" >%</mat-option>
                          </mat-select>
                          </mat-form-field>
                          <span style="margin-left: 0px;" *ngIf="(fuelSurchrgMeasure.errors?.required && (fuelSurchrgMeasure.touched || fTerms.submitted))"
                          class="hasErrorMsgCom">Required !</span>
                        </div>
                       <div class="col-lg-3 col-md-3" style="padding: 0px !important;">
                        <mat-form-field appearance="outline" >
                         <input matInput  autocomplete="true" value="10" #flfcClause2="ngModel" appGreaterZero
                         required #flfcClause2="ngModel"  name="flfcClause2" [(ngModel)]="modeltnc.flfcClause2" maxlength="8"
                         [matTooltip]="modeltnc.flfcClause2" [matTooltipDisabled]="modeltnc.flfcClause2 && modeltnc.flfcClause2.length<5" matTooltipPosition="above">
                       </mat-form-field>
                      <span style="margin-left: 8px;" *ngIf="(flfcClause2.errors?.required && (flfcClause2.touched || fTerms.submitted))"
                      class="hasErrorMsgCom">
                          Required !
                      </span>
                      <span *ngIf="(((flfcClause2.errors?.greaterZero) || ((flfcClause2.errors?.greaterZero) && fTerms.submitted)) && (!flfcClause2.errors?.required))" class="hasErrorMsgCom" style="margin-left: .4rem !important;">
                        Greater Than 0&nbsp;!
                        </span>
                       </div>                  
                    </div>
                  </div>
                </div>
              </div>

              <div class="row" style="margin-bottom: 2rem;">
                <div class="col-lg-4 col-md-4  ">
                  <div *ngIf="modeltnc.flfcFlag==1">
                    <div class="col-lg-6 col-md-6   label-text mrgn_btm_2rem">FLFC Threshold(min)<span class="redMark"> *</span></div>
                    <div class="col-lg-6 col-md-6  ">
                      <mat-form-field appearance="outline" style="width: 100%;">
                                <input matInput autocomplete="true"  required #flfcThresholdMin="ngModel" numeric
                                  decimals="2" name="flfcThresholdMin"  [(ngModel)]="modeltnc.flfcThresholdMin"
                                  maxlength="8">
                              </mat-form-field>
                              <mat-error style="color: red;" class="tncflcerror"
                                *ngIf="(flfcThresholdMin.errors?.required && (flfcThresholdMin.touched || fTerms.submitted))">Required !</mat-error>
                              <mat-error style="color: red;" *ngIf="(!flfcThresholdMin.errors?.required &&  fTerms.errors?.range)"
                                >Value should be less than FLFC Threshold (max) !</mat-error>      
                                <span *ngIf="(flfcThresholdMin.errors?.isNumeric && flfcThresholdMin.touched && !flfcThresholdMin.errors?.required)"
                                  class="hasErrorMsgCom" style="display: block;">
                                    Invalid !
                                </span>
                              <div class="col-lg-4 col-md-4  "></div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-4 col-md-4  "></div>
                <div class="col-lg-4 col-md-4  ">
                  <div *ngIf="modeltnc.flfcFlag==1">
                    <div class="col-lg-6 col-md-6   label-text">FLFC Threshold (max)<span class="redMark"> *</span></div>
                    <div class="col-lg-6 col-md-6  ">
                      <mat-form-field  appearance="outline" style="width: 100%;margin-left: 4px;">
                              <input numeric decimals="2"  matInput autocomplete="true" required
                                #flfcThresholdMax="ngModel" name="flfcThresholdMax"
                                [(ngModel)]="modeltnc.flfcThresholdMax"  maxlength="8">
                            </mat-form-field>
                            <mat-error style="color: red;" class="tncflcerror" *ngIf="(flfcThresholdMax.errors?.required && (flfcThresholdMax.touched || fTerms.submitted))"
                            >Required !</mat-error>
                            <mat-error style="color: red;" *ngIf="(!flfcThresholdMax.errors?.required &&  fTerms.errors?.range)"
                            >Value should be greater than FLFC Threshold (min) !</mat-error>
                            <span *ngIf="(flfcThresholdMax.errors?.isNumeric && flfcThresholdMax.touched && !flfcThresholdMax.errors?.required)"
                             class="hasErrorMsgCom" style="display: block;">
                                Invalid !
                            </span>
                      <div class="col-lg-4 col-md-4  "></div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row" >
                <div class="col-lg-4 col-md-4  ">            
                  <div *ngIf="modeltnc.flfcFlag==1">
                    <div class="col-lg-6 col-md-6   label-text">As On Date</div>
                    <div class="col-lg-6 col-md-6   ">
                      <mat-radio-group style="padding-left: 0.2rem !important;" class="example-radio-group" *ngFor="let season of gst"
                      name="flfcAsOnDtFlag" [(ngModel)]="modeltnc.flfcAsOnDtFlag">
                      <mat-radio-button class="example-radio-button" [value]="season.id">
                        {{season.value}}
                      </mat-radio-button>
                    </mat-radio-group>
                    </div>
                  </div> 
                </div>
                <div class="col-lg-4 col-md-4  "></div>
                <div class="col-lg-4 col-md-4  ">

                  </div>                  
              </div>
              <div class="row" >
                <div class="col-lg-4 col-md-4  ">
                  <div *ngIf="modeltnc.flfcFlag==1">
                    <div class="col-lg-6 col-md-6   label-text mrgn_btm_2rem">FLFC Applicable Date<span *ngIf="!modeltnc. flfcAsOnDtFlag" class="redMark"> *</span></div>
                    <div class="col-lg-6 col-md-6  " style="width: 48.5%;">
                      <mat-form-field appearance="outline" style="height: 2.7rem;">
                        <mat-select disableOptionCentering panelClass="creditSelect2" #flfcAppcblDtType="ngModel" name="flfcAppcblDtType"
                          [(ngModel)]="modeltnc.flfcAppcblDtType"  [required]="!modeltnc.flfcAsOnDtFlag">
                          <mat-option *ngFor="let item of flfcAppDtType | sortBy:'asc':'value'" [value]="item.value" [matTooltip]="item.value"
                            [matTooltipDisabled]="item.value.length<27" matTooltipPosition="above">
                            {{item.value}}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <div *ngIf="!modeltnc.flfcAsOnDtFlag">
                        <span class="hasErrorMsgCom" *ngIf="(flfcAppcblDtType.errors?.required && (flfcAppcblDtType.touched || fTerms.submitted))"
                        >
                            Required !
                        </span></div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-4 col-md-4  "></div>
                <div class="col-lg-4 col-md-4  ">
                  <div *ngIf="modeltnc.flfcFlag==1">
                    <div class="col-lg-6 col-md-6   label-text mrgn_btm_2rem">Date<span *ngIf="!modeltnc.flfcAsOnDtFlag && (modeltnc.flfcAppcblDtType=='QUARTERLY' || modeltnc.flfcAppcblDtType=='HALF YEARLY' || modeltnc.flfcAppcblDtType=='ANNUALLY')" class="redMark"> *</span></div>
                    <div class="col-lg-6 col-md-6  ">
                      <mat-form-field appearance="outline" id="datepickerwidth">
                        <input matInput  autocomplete="true"  [required]="!modeltnc.flfcAsOnDtFlag && (modeltnc.flfcAppcblDtType=='QUARTERLY' || modeltnc.flfcAppcblDtType=='HALF YEARLY' || modeltnc.flfcAppcblDtType=='ANNUALLY')"
                        #flfcAppcblDt="ngModel" [matDatepicker]="pickerappli" name="flfcAppcblDt" [(ngModel)]="modeltnc.flfcAppcblDt" class="date_picker"
                          placeholder="DD/MM/YYYY" (blur)="flfcDate(modeltnc)" (dateChange)="flfcDate(modeltnc)">
                        <mat-datepicker panelClass="creditDatepicker" #pickerappli></mat-datepicker>
                        <mat-datepicker-toggle matSuffix [for]="pickerappli"></mat-datepicker-toggle>
                      </mat-form-field>
                      <div *ngIf="!modeltnc.flfcAsOnDtFlag && (modeltnc.flfcAppcblDtType=='QUARTERLY' || modeltnc.flfcAppcblDtType=='HALF YEARLY' || modeltnc.flfcAppcblDtType=='ANNUALLY')">
                      <span *ngIf="(flfcAppcblDt.errors?.required && (flfcAppcblDt.touched || fTerms.submitted))"
                      class="hasErrorMsgCom">
                          Required !
                      </span></div>
                      <span *ngIf="isValidflfcDate && !(flfcAppcblDt.errors?.required)" class="hasErrorMsgCom">
                        Invalid FLFC Applicable Date!
                      </span>
                    </div>
                  </div>
                </div>
              </div>
          </div>
          </div>
            </div>

           
            <hr id="collapsedivider">
            <div class="row" *ngxPermissionsOnly="['INCREMENT_READ']">           
              <div class="col-lg-4 col-md-4  " style="margin-top: 1.5rem;">
                <div class="col-lg-6 col-md-6   label-text zonalheading tncheading paddingleftzero">Increment Clause</div>
                <div class="col-lg-6 col-md-6   paddingleft">
                  <mat-radio-group style="padding-left: 1rem !important;" class="example-radio-group" *ngFor="let season of gst"
                  name="incrClauseFlag" [(ngModel)]="modeltnc.incrClauseFlag">
                  <mat-radio-button class="example-radio-button" [value]="season.id" (change)="incClouse($event)">
                    {{season.value}}
                  </mat-radio-button>
                </mat-radio-group>
                </div>
              </div>
            
            <!--  -->
            <div *ngIf="modeltnc.incrClauseFlag==1">         
              <div class="col-lg-12 col-md-12 paddingleftzero">
                <div class="col-lg-4 col-md-4  ">
                  <div class="row">
                  <div class="col-lg-6 col-md-6   label-text mrgn_btm_2rem">
                    Increment Type<span class="redMark"> *</span>
                  </div>
                  <div class="col-lg-6 col-md-6  ">
                    <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                      <mat-select disableOptionCentering panelClass="creditSelect2" required #lkpIncrTypeId="ngModel" name="lkpIncrTypeId" (ngModelChange) ="abc($event,'change')" [(ngModel)]="modeltnc.lkpIncrTypeId">
                        <mat-option *ngFor="let item of incrementTypeList | sortBy:'asc':'descr'" [value]="item.id" 
                        [matTooltip]="item.descr" [matTooltipDisabled]="item.descr.length<27" matTooltipPosition="above">
                          {{item.descr}}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <span *ngIf="(lkpIncrTypeId.errors?.required && (lkpIncrTypeId.touched || fTerms.submitted))"
                        class="hasErrorMsgCom">
                        Required !
                    </span>
                  </div>
                </div>
                <div class="row">
                  <div class="col-lg-6 col-md-6   label-text mrgn_btm_2rem">
                    Increment Based on<span class="redMark"> *</span>
                  </div>
                  <div class="col-lg-6 col-md-6  ">
                    <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                      <mat-select disableOptionCentering panelClass="creditSelect2" required #lkpIncrBasedOnId="ngModel" name="incrBasedOn" [(ngModel)]="modeltnc.lkpIncrBasedOnId">
                        <mat-option *ngFor="let item of incrementBasedOnList | sortBy:'asc':'descr'" [value]="item.id" 
                        [matTooltip]="item.descr" [matTooltipDisabled]="item.descr.length<27" matTooltipPosition="above">
                          {{item.descr}}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <span *ngIf="(lkpIncrBasedOnId.errors?.required && (lkpIncrBasedOnId.touched || fTerms.submitted))"
                        class="hasErrorMsgCom">
                        Required !
                    </span>
                  </div>
                </div>

                <div class="row">
                  <div class="col-lg-6 col-md-6   label-text mrgn_btm_2rem">
                    Increment Effective Date<span class="redMark">*</span>
                  </div>
                  <div class="col-lg-4 col-md-4  ">
                    <mat-form-field appearance="outline" id="datepickerwidth" style="height: 2.7rem; width: 163% !important;">
                      <input matInput  autocomplete="true" required #incrEffectiveDt="ngModel" [matDatepicker]="pickereff" name="incrEffectiveDt" class="date_picker"
                        [(ngModel)]="modeltnc.incrEffectiveDt" placeholder="DD/MM/YYYY"  (blur)="incEffectiveDate(modeltnc)" (dateChange)="incEffectiveDate(modeltnc)">
                      <mat-datepicker panelClass="creditDatepicker" #pickereff></mat-datepicker>
                      <mat-datepicker-toggle matSuffix [for]="pickereff"></mat-datepicker-toggle>
                    </mat-form-field>
                    <span *ngIf="(incrEffectiveDt.errors?.required && (incrEffectiveDt.touched || fTerms.submitted))"
                        class="hasErrorMsgCom">
                        Required !
                    </span>
                    <span *ngIf="isValidIncrDate && !(incrEffectiveDt.errors?.required)" class="hasErrorMsgCom">
                      Invalid Increment Effective Date&nbsp;!
                    </span>
                  </div>
                </div>
                <div class="row">
                  <div class="col-lg-6 col-md-6   label-text">
                       Custom Incremental Applied
                  </div>
                        <div class="col-lg-6 col-md-6  ">
                          <mat-radio-group style="padding-left: 0.2rem !important;" class="example-radio-group" *ngFor="let season of gst"
                           #customAmtFlag="ngModel" name=" customAmtFlag" [(ngModel)]="modeltnc. customAmtFlag">
                          <mat-radio-button class="example-radio-button" [value]="season.id" (change)="customAmtFlage($event)">
                            {{season.value}}
                          </mat-radio-button>
                        </mat-radio-group>
                      </div>
                </div>
                </div>

               

                <div class="col-lg-4 col-md-4  "></div>
                <div class="col-lg-4 col-md-4  ">
                  <div class="row" style="padding-left: 15px;">

                  <div class="col-lg-6 col-md-6   label-text mrgn_btm_2rem" >Increment {{incType}}<span class="redMark"> *</span></div>
                  <div class="col-lg-6 col-md-6  ">
                    <mat-form-field appearance="outline" style="width: 100%;">
                      <input matInput  autocomplete="true" required #incrMnth="ngModel" autocomplete="true"  
                       #incrMnth="ngModel" name="incrMnth" [(ngModel)]="modeltnc.incrMnth" [maxlength]='mxlength'pattern="^[0-9][0-9]*$">
                    </mat-form-field>
                    <span *ngIf="(incrMnth.errors?.required && (incrMnth.touched || fTerms.submitted))"
                        class="hasErrorMsgCom">
                        Required !
                    </span>
                    <span *ngIf="(incrMnth.errors?.pattern && incrMnth.touched && !incrMnth.errors?.required)"
                    class="hasErrorMsgCom" style="display: block;">
                      Only Numbers Allowed !
                    </span>
                    <div class="col-lg-4 col-md-4  ">
                    </div>
                  </div>
                </div>

                  <div class="row" style="padding-left: 15px;">
                  <div class="col-lg-6 col-md-6   label-text mrgn_btm_2rem">
                    Increment Mode<span class="redMark"> *</span>
                  </div>
                  <div class="col-lg-6 col-md-6  ">
                    <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                      <mat-select disableOptionCentering panelClass="creditSelect2" required #lkpIncrModeId="ngModel"name="lkpIncrModeId" [(ngModel)]="modeltnc.lkpIncrModeId">
                        <mat-option *ngFor="let item of incrementModeList | sortBy:'asc':'descr'" [value]="item.id" 
                        [matTooltip]="item.descr" [matTooltipDisabled]="item.descr.length<27" matTooltipPosition="above">
                          {{item.descr}}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <span *ngIf="(lkpIncrModeId.errors?.required && (lkpIncrModeId.touched || fTerms.submitted))"
                        class="hasErrorMsgCom">
                        Required !
                    </span>
                    <div class="col-lg-4 col-md-4  ">
                    </div>
                  </div>
                  </div>

                  <div class="row" style="padding-left: 15px;">
                  <div class="col-lg-6 col-md-6   label-text mrgn_btm_2rem">
                    Increment Value<span class="redMark"> *</span>
                  </div>
                  <div class="col-lg-6 col-md-6  ">
                    <mat-form-field appearance="outline" style="width: 100%;">
                      <input numeric decimals="2" matInput  autocomplete="true" appGreaterZero
                      required #incrVal="ngModel" name="incrVal" [(ngModel)]="modeltnc.incrVal" maxlength="8">
                    </mat-form-field>
                    <span *ngIf="(incrVal.errors?.required && (incrVal.touched || fTerms.submitted))"
                        class="hasErrorMsgCom">
                        Required !
                    </span>
                    <span *ngIf="(((incrVal.errors?.greaterZero) || ((incrVal.errors?.greaterZero) && fTerms.submitted)) && (!incrVal.errors?.required))" class="hasErrorMsgCom" >
                       Greater Than 0&nbsp;!
 </span>
                      <span *ngIf="(incrVal.errors?.isNumeric && incrVal.touched && !incrVal.errors?.required && !incrVal.errors?.greaterZero)"
                        class="hasErrorMsgCom" style="display: block;">
                          Invalid !
                      </span>
                    <div class="col-lg-4 col-md-4  ">
                    </div>
                  </div>
                  </div>

                </div>
              </div> 
              </div>
            </div>
            

            <div class="col-lg-12 col-md-12" style="margin-left: 15px;" *ngIf="modeltnc.customAmtFlag==1 && modeltnc.incrClauseFlag==1">
              <div class="col-lg-4 col-md-4  " style="margin-left: -36px;">
                <div class="row">
                  <div class="col-lg-6 col-md-6   label-text mrgn_btm_2rem">
                    Custom Increment Value<span class="redMark" style="position: absolute !important;"> *</span>
                  </div>
                  <div class="col-lg-6 col-md-6" >
                    <mat-form-field appearance="outline" style="margin-left: 8px;">
                      <input numeric decimals="2" matInput  autocomplete="true" appGreaterZero
                      required #CustIncrVal="ngModel" name="custIncValue1" [(ngModel)]="modeltnc.customAmt" maxlength="8">
                    </mat-form-field>
                    <span *ngIf="(CustIncrVal.errors?.required && (CustIncrVal.touched || fTerms.submitted))" class="hasErrorMsgCom paddingleft9">Required !</span>
                    <span *ngIf="(((CustIncrVal.errors?.greaterZero) || ((CustIncrVal.errors?.greaterZero) && fTerms.submitted)) && (!CustIncrVal.errors?.required))" class="hasErrorMsgCom">
                       Greater Than 0&nbsp;!
 </span>
                    <span *ngIf="(CustIncrVal.errors?.isNumeric && CustIncrVal.touched && !CustIncrVal.errors?.required && !CustIncrVal.errors?.greaterZero)"
                      class="hasErrorMsgCom">
                        Invalid !
                    </span>                  
                  </div>
                </div>
              </div>
              <div class="col-lg-4 col-md-4  " style="margin-left: 36px;">
                <div class="row">
                  <div class="col-lg-6 col-md-6   label-text mrgn_btm_2rem" style="text-align: center;">
                    From<span class="redMark"> *</span>
                  </div>
                  <div class="col-lg-6 col-md-6 ">
                    <mat-form-field appearance="outline" >
                      <mat-select disableOptionCentering panelClass="creditSelect2 creditNgxSelect" required #customAmtFromMnth1="ngModel" 
                      name="customAmtFromMnth" [(ngModel)]="modeltnc.customAmtFromMnth" (blur)="scrollActiveValue()">
                      <ngx-mat-select-search [(ngModel)]="searchCtrlFrom" [placeholderLabel]="'Search...'"
                        [noEntriesFoundLabel]="'Not found'" name="search">
                        <mat-icon class="mat-select-search-custom-header-content mat_ngx_select_search">search</mat-icon>
                      </ngx-mat-select-search>
                        <mat-option *ngFor="let item of months | stringFilter:searchCtrlFrom:'value'" [value]="item.id" 
                        [matTooltip]="item.value" [matTooltipDisabled]="item.value.length<27" matTooltipPosition="above">
                          {{item.value}}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <span  *ngIf="(customAmtFromMnth1.errors?.required && (customAmtFromMnth1.touched || fTerms.submitted))"
                        class="hasErrorMsgCom">
                        Required !
                    </span>
                  </div>
                </div>
              </div>
              <div class="col-lg-4 col-md-4  ">
                <div class="row">
                  <div class="col-lg-6 col-md-6   label-text mrgn_btm_2rem" >
                    To<span class="redMark"> *</span>
                  </div>
                  <div class="col-lg-6 col-md-6">
                    <mat-form-field appearance="outline" >
                      <mat-select disableOptionCentering panelClass="creditSelect2 creditNgxSelect" required #customAmtToMnth1="ngModel" name="customAmtToMnth" 
                      [(ngModel)]="modeltnc.customAmtToMnth" (blur)="scrollActiveValue()">
                      <ngx-mat-select-search [(ngModel)]="searchCtrlTo" [placeholderLabel]="'Search...'"
                        [noEntriesFoundLabel]="'Not found'" name="search">
                        <mat-icon class="mat-select-search-custom-header-content mat_ngx_select_search">search</mat-icon>
                      </ngx-mat-select-search>
                        <mat-option *ngFor="let item of months | stringFilter:searchCtrlTo:'value'" [value]="item.id" 
                        [matTooltip]="item.value" [matTooltipDisabled]="item.value.length<27" matTooltipPosition="above">
                          {{item.value}}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <span  *ngIf="(customAmtToMnth1.errors?.required && (customAmtToMnth1.touched || fTerms.submitted))"
                        class="hasErrorMsgCom">
                        Required !
                    </span>
                  </div>
                </div>
              </div>
            </div>
            

      <div style="margin-top: 5%;">
        <mat-accordion *ngIf="(perList && (perList.includes('TNC_CREATE') && perList.includes('TNC_UPDATE')))">
          <div class="example-button-row text-center" style="margin-top: 2%" >
            <button class="btn1" id="termsNextButton" mat-raised-button color="primary"
              (click)=" postTncDetail()" [disabled]="!fTerms.valid">Continue</button>
          </div>
        </mat-accordion>
      </div>
    </mat-card-content>
  </mat-expansion-panel>
</form>
<!--CLOSING-->
        <!-- Branch code starts here -->
        <mat-expansion-panel *ngIf='(businessType!="ANYWHERE TO ANYWHERE") && (msaCustLevelName != "MSA CLUSTER" && msaCustLevelName != "MSA GLOBAL")'
          id="box-shadow" [expanded]='isExpanded' #six (opened)="openBranch()" (closed)="closeBranch()">
          <mat-expansion-panel-header style="cursor: pointer;" (click)="getAssignBranchdata()">
            Branch
          </mat-expansion-panel-header>
          <form (ngSubmit)="fbranch.form.valid" #fbranch="ngForm" name="fbranch" novalidate *ngxPermissionsOnly="['BRANCH_READ']">
            <mat-card-content>
              <h5 class="zonalheading" style="padding-top: 2rem;">Branch Assignment &nbsp;
                <button type="submit" [disabled]="!fbranch.form.valid" (click)="branchAssignment()" *ngxPermissionsOnly="['BRANCH_CREATE']"
                  [style.color]="fbranch.invalid ? 'gray' : 'green'"
                  style="color: rgb(33, 110, 36),;width: 2.4rem; position: relative; left: -1.5rem; font-size: 3.2rem;cursor: pointer; border: none; background: transparent;top: .8rem;"
                  class="material-icons">add_circle</button>
              </h5>

              <div class="col-lg-12 col-md-12 col-sm-12 col-xl-12" style="padding: 0 !important;">
                <div class="col-lg-2 col-md-2 col-sm-2 col-xl-2 zonalheadingbar">BRANCH<span class="redMark"> *</span></div>
                <div class="col-lg-2 col-md-2 col-sm-2 col-xl-2 zonalheadingbar" style="width: 12%;">EFFECTIVE DATE<span class="redMark"> *</span></div>
                <div class="col-lg-2 col-md-2 col-sm-2 col-xl-2 zonalheadingbar" style="width: 12%;">EXPIRY DATE</div>
                <div class="col-lg-2 col-md-2 col-sm-2 col-xl-2 zonalheadingbar" style="width: 12%;">REASON <span style="color: red;"> </span>
                </div>
              </div>

              <div class="col-lg-12 col-md-12 col-sm-12 col-xl-12" style="margin-top: 1.5rem;padding: 0 !important;"
                *ngFor="let field of branchAssignModel; let i = index">
                <div class="col-lg-2 col-md-2 col-sm-2">
                  <a (click)="openBaseLDialogBr(field,i)" style="cursor: pointer;">
                    <span class="fa fa-search fa-lg" id="defualtBranchSearch5" style="top: .7rem !important;"></span>
                    <input #branch='ngModel' required [ngModel]="field.bkngBranchName" [readonly]="field.bkngBranchName" autocomplete="true" list="brow1" class="inputfield3 backgroundWhite form-control input-md"  name="bkngBranchName-{{i}}" 
                    (change)="onDefaultBranchChanged(priFilter.bkngBranchName)" (keydown.enter)="openBaseLDialogBr(field,i)" placeholder="search" style="height: 2.7rem; padding-left: 2.3rem;cursor: pointer; position: relative;"/>
                    </a>
                    <span *ngIf="(branch.errors?.required && branch.touched)" class="hasErrorMsgTopSide">Required&nbsp;!</span>
                </div>

                <div class="col-lg-2 col-md-2 col-sm-2 col-xl-2" style="width: 12%;">
                  <mat-form-field appearance="outline" id="datepickerwidth">
                    <input matInput  autocomplete="true" #EffDT='ngModel' required  [matDatepicker]="pickereffe2" name="effectiveDt-{{i}}" class="date_picker"
                    [(ngModel)] = "field.effectiveDt" [min]="minDate" [max]="maxDate" (blur)="dateFormatEffective(field)" (dateChange)="dateFormatEffective(field)"
                     placeholder="DD/MM/YYYY">
                    <mat-datepicker panelClass="creditDatepicker" #pickereffe2></mat-datepicker>
                    <mat-datepicker-toggle matSuffix [for]="pickereffe2"></mat-datepicker-toggle>
                  </mat-form-field>
                  <span *ngIf="(EffDT.errors?.required && EffDT.touched)" class="hasErrorMsgCom">
                   Required&nbsp;!
                  </span>
                  <span *ngIf="field.isValidBranchEffectiveDt && !(EffDT.errors?.required)" class="hasErrorMsgCom">
                    Invalid Effective Date!
                  </span>
                </div>
                <div class="col-lg-2 col-md-2 col-sm-2 col-xl-2 " style="width: 12%;">
                  <mat-form-field appearance="outline" id="datepickerwidth">
                    <input matInput  autocomplete="true" #ExpDT='ngModel' [matDatepicker]="pickereffe1" name="expDt-{{i}}" class="date_picker"
                      [(ngModel)]="field.expDt" [min]="field.effectiveDt" [max]="maxDate" (blur)="dateFormatExpiry(field)" (dateChange)="dateFormatExpiry(field)" placeholder="DD/MM/YYYY" >
                    <mat-datepicker panelClass="creditDatepicker" #pickereffe1></mat-datepicker>
                    <mat-datepicker-toggle matSuffix [for]="pickereffe1"></mat-datepicker-toggle>
                  </mat-form-field>
                
                  <span *ngIf="field.isValidBranchExpiryDt" class="hasErrorMsgCom">
                    Invalid Expiry Date!
                  </span>
                </div>

               <div class="col-lg-2 col-md-2 col-sm-2 col-xl-2" style="width: 12%;">
                  <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                    <mat-select panelClass="creditSelect" name="lkpBkngBranchHoldRsn-{{i}}" #lkpBkngBranchHoldRsn='ngModel'[value]="field.expDt ? field.lkpBkngBranchHoldRsn : ''" [(ngModel)]="field.lkpBkngBranchHoldRsn" 
                    [disabled]="!(field.expDt)" (selectionChange)="onchangeReasonBkg(field)" [required]="field.expDt ? true : false">
                      <mat-option *ngFor="let opt of branchAssignModel.referenceList.bkngHoldRsn" [value]="opt.id">
                        {{opt.lookupVal}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                  <span *ngIf="(lkpBkngBranchHoldRsn.errors?.required && lkpBkngBranchHoldRsn.touched)" class="hasErrorMsgCom">
                    Required!
                  </span>
                </div>
                <div class="col-lg-1 col-md-1" style="width: 15%;"> 
                  <div class="col-lg-6 col-md-6" > <span  *ngIf ="i > 0" style="padding-left: 2rem;"  class="text-center" ><em matTooltipPosition="above" class="material-icons" (click)="deleteBranch(field, i)" style="cursor: pointer;color: #27AE60;">delete</em></span></div>               
                </div>
              </div>

              <div class="example-button-row text-center">
                <button style="margin-top: 5%;" id="branchNextButton" class="btn1" mat-raised-button color="primary" *ngxPermissionsOnly="['BRANCH_CREATE','BRANCH_UPDATE']"
                  (click)="postBranch()" [disabled]="!fbranch.form.valid">Continue</button>
              </div>

            </mat-card-content>

          </form>

        </mat-expansion-panel>
          <!-- SLA code starts here -->
         <mat-expansion-panel id="box-shadow" [expanded]='isExpanded' #seven (opened)="openSLA()" (closed)="closeSLA()">
          <mat-expansion-panel-header style="cursor: pointer;" (click)="getSLAById()" >
            <img class="rcIcon" [src]="seven.expanded ? '/assets/images/sla_green.png': '/assets/images/sla_gray.png'" alt="SLA"> SLA
          </mat-expansion-panel-header>
          <mat-card-content>
            <h5 class="zonalheading paddingtopone">SLA Matrix: {{zoneMatrixName}}</h5>
            <form name="slaForm" (ngSubmit)="fSLA.form.valid" #fSLA="ngForm" novalidate>
            <h5 class="zonalheading" style="padding-top: 2rem;">SLA Group Transit Time(Days)</h5>
            <div class="row">
              <div class="col-lg-6 col-md-6  ">
                <div class="col-lg-2 col-md-2 zonalheadingbar">GROUP</div>
                <div class="col-lg-6 col-md-6 zonalheadingbar">RR</div>
                <div class="col-lg-4 col-md-4 zonalheadingbar">SLA DAYS</div>
              </div>
            </div>

            <div class="row" style="padding-top: 1rem;display: grid;">
              <div *ngFor="let sla of slaList; index as i" class="col-lg-6 col-md-6"
              style="display: flex;">
                <div *ngIf="sla.rateGroup" class="col-lg-2 col-md-2">
                  {{sla.rateGroup.name}}
                </div>
                <div class="col-lg-6 col-md-6 ">
                  <mat-radio-group [name]="i" style="padding-left: 1rem !important;" *ngFor="let rr of RRFlagList; index as radio-i" class="example-radio-group"
                   [(value)]="sla.slaRrFlag">
                  <mat-radio-button class="example-radio-button" 
                     (change)="changeRRFlagSLA(i,$event.value)" [value]="rr.id" >
                    {{rr.value}}
                  </mat-radio-button>
                 </mat-radio-group>
                </div>
                <div class="col-lg-4 col-md-4  ">
                  <mat-form-field appearance="outline" style="width: 80%;">
                     <input required #slaDays='ngModel'   autocomplete="true" matInput  autocomplete="true" name="slaDays-{{i}}" [(ngModel)]="sla.slaDays" 
                       [disabled]="sla.safexSlaDisabled"  maxlength="4" pattern="^[0-9][0-9]*$">
                  </mat-form-field>
                  <span *ngIf="(slaDays.errors?.required && (slaDays.touched || fSLA.submitted))"
                      class="hasErrorMsgRight">
                      Required&nbsp;!
                  </span>
                  <span *ngIf="(slaDays.errors?.pattern && slaDays.touched && !slaDays.errors?.required)" style="display: block;"
                      class="hasErrorMsgRight">Only Numbers Allowed !</span> 
                </div>
              </div>
            </div>

            
            <hr id="collapsedivider">
            <!-- Custom SLA Add Icon -->
            <h5 class="zonalheading" >Custom SLA
              <button mat-icon-button [disabled]="!fCustomSla.form.valid" (click)="addCustomSLA()" id="plusicon2" mat-card-avatar aria-label="Example icon" class="mat_icon_moz">
                <mat-icon class="slaAddIcon">add_circle</mat-icon>
              </button>
           </h5>
           <form name="customSla" (ngSubmit)="fCustomSla.form.valid" #fCustomSla="ngForm" novalidate>
            <div class="row" *ngIf="customSlaList.length>0">
              <div class="col-lg-10 col-md-10  ">
                <div class="col-lg-2 col-md-2 zonalheadingbar">FROM TYPE</div>
                <div class="col-lg-2 col-md-2 zonalheadingbar">TO TYPE</div>
                <div class="col-lg-2 col-md-2 zonalheadingbar">FROM</div>
                <div class="col-lg-2 col-md-2 zonalheadingbar">TO</div>
                <div class="col-lg-2 col-md-2 zonalheadingbar">SLA DAYS</div>
              </div>
            </div>
            <!-- Custom SLA Required Fields -->
            <div class="row" style="margin-top: 1.5rem;">
              <div *ngFor="let field of customSlaList; let i = index" class="col-lg-10 col-md-10"  style="margin-bottom: 1rem;">
                <div class="col-lg-2 col-md-2  ">
                  <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                    <mat-select disableOptionCentering panelClass="creditSelect2" required #lkpSrcTypeId='ngModel' name="lkpSrcTypeId-{{i}}" [(ngModel)]="field.lkpSrcTypeId" (selectionChange)='slaAddressByType(field.lkpSrcTypeId,i,"from")'>
                      <mat-option *ngFor="let item of slasrcDestList | sortBy:'asc':'lookupVal'" [value]="item.id" 
                      [matTooltip]="item.lookupVal" [matTooltipDisabled]="item.lookupVal.length<11" matTooltipPosition="below">
                        {{item.lookupVal}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                  <span *ngIf="(lkpSrcTypeId.errors?.required && (lkpSrcTypeId.touched || fSLA.submitted))"
                      class="hasErrorMsgCom">
                      Required&nbsp;!
                  </span>
                </div>
                <div class="col-lg-2 col-md-2  ">
                  <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                    <mat-select disableOptionCentering panelClass="creditSelect2" panelClass="creditSelect2" required #lkpDestTypeId='ngModel' name="lkpDestTypeId-{{i}}" [(ngModel)]="field.lkpDestTypeId" (selectionChange)='slaAddressByType(field.lkpDestTypeId,i, "to")'>
                      <mat-option *ngFor="let item of slasrcDestList | sortBy:'asc':'lookupVal'" [value]="item.id" 
                      [matTooltip]="item.lookupVal" [matTooltipDisabled]="item.lookupVal.length<11" matTooltipPosition="below">
                        {{item.lookupVal}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                  <span *ngIf="(lkpDestTypeId.errors?.required && (lkpDestTypeId.touched || fSLA.submitted))"
                      class="hasErrorMsgCom">
                      Required&nbsp;!
                  </span>
                </div>
                <div class="col-lg-2 col-md-2   " *ngIf="!field.fromTypeSLA && field.defaultFlagFromSla==true">
                 <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                     <mat-select disableOptionCentering panelClass="creditSelect2" name="">
                       </mat-select>
                 </mat-form-field>                   
               </div>
                <div class="col-lg-2 col-md-2   " *ngIf='field.fromTypeSLA==="STATE"'>
                  <a style="cursor: pointer;" (click)="openDialogStateSearch(field,'srcId',false)">
                    <span class="fa fa-search fa-lg" id="search-icon"></span>
                    <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                      <input class="pincode_input" required #srcId='ngModel' name="srcId-{{i}}" matInput  autocomplete="true" [(ngModel)]="field.stateNamesfrom" 
                      (keydown.enter)="openDialogStateSearch(field,'srcId',false)" readonly 
                      [matTooltip]="field.stateNamesfrom" [matTooltipDisabled]="!field || !field.stateNamesfrom || field.stateNamesfrom.length<13" matTooltipPosition="below">
                    </mat-form-field>
                    <span *ngIf="(srcId.errors?.required && (srcId.touched || fSLA.submitted))"
                        class="hasErrorMsgCom">
                        Required&nbsp;!
                    </span>
                  </a>
             </div>
           <div class="col-lg-2 col-md-2   " *ngIf='field.fromTypeSLA==="CITY"'>
              <a style="cursor: pointer;" (click)="openDialogCitySearch(field,'srcId')">
                <span class="fa fa-search fa-lg" id="search-icon"></span>
                <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                  <input class="pincode_input" required #srcId='ngModel' name="srcId-{{i}}" matInput  autocomplete="true" [(ngModel)]="field.cityNamesfrom" 
                  (keydown.enter)="openDialogPincodeSearch(field,'srcId')" readonly
                  [matTooltip]="field.cityNamesfrom" [matTooltipDisabled]="!field || !field.cityNamesfrom || field.cityNamesfrom.length<13" matTooltipPosition="below">
                </mat-form-field>
                <span *ngIf="(srcId.errors?.required && (srcId.touched || fSLA.submitted))"
                    class="hasErrorMsgCom">
                    Required&nbsp;!
                </span>
              </a>
         </div>
         <div class="col-lg-2 col-md-2" *ngIf='field.fromTypeSLA==="PINCODE"'>

             <a style="cursor: pointer;" (click)="openDialogPincodeSearch(field,'srcId',false)">
              <span class="fa fa-search fa-lg" id="search-icon"></span>
              <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                <input class="pincode_input" required #srcId='ngModel' name="srcId-{{i}}" matInput  autocomplete="true" [(ngModel)]="field.srcId" 
                (keydown.enter)="openDialogPincodeSearch(field,'srcId',false)" readonly
                [matTooltip]="field.srcId" [matTooltipDisabled]="!field || !field.srcId || field.srcId.length<13" matTooltipPosition="below">
              </mat-form-field>
              <span *ngIf="(srcId.errors?.required && (srcId.touched || fSLA.submitted))"
                  class="hasErrorMsgCom">
                  Required&nbsp;!
              </span>
            </a>
           </div>

            <div class="col-lg-2 col-md-2   "*ngIf="!field.toTypeSLA && field.defaultFlagToSla==true">
             <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                 <mat-select disableOptionCentering panelClass="creditSelect2" required #destId='ngModel' name="destId-{{i}}" [(ngModel)]="field.destId">
                   </mat-select>
             </mat-form-field>
             <span *ngIf="(destId.errors?.required && (destId.touched || fSLA.submitted))"
                 class="hasErrorMsgCom">
                 Required&nbsp;!
             </span>
            </div>
             <div class="col-lg-2 col-md-2   " *ngIf='field.toTypeSLA==="STATE"'>
              <a style="cursor: pointer;" (click)="openDialogStateSearch(field,'destId',false)">
                <span class="fa fa-search fa-lg" id="search-icon"></span>
                <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                  <input class="pincode_input" required #destId='ngModel' name="destId-{{i}}" matInput  autocomplete="true" [(ngModel)]="field.stateNamesto" 
                  (keydown.enter)="openDialogStateSearch(field,'destId',false)" readonly
                  [matTooltip]="field.stateNamesto" [matTooltipDisabled]="!field || !field.stateNamesto || field.stateNamesto.length<13" matTooltipPosition="below">
                </mat-form-field>
                <span *ngIf="(destId.errors?.required && (destId.touched || fSLA.submitted))"
                    class="hasErrorMsgCom">
                    Required&nbsp;!
                </span>
              </a>
             </div>
           <div class="col-lg-2 col-md-2   "*ngIf='field.toTypeSLA==="CITY"'>
            <a style="cursor: pointer;" (click)="openDialogCitySearch(field,'destId')">
              <span class="fa fa-search fa-lg" id="search-icon"></span>
              <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                <input class="pincode_input" required #destId='ngModel' name="destId-{{i}}" matInput  autocomplete="true" [(ngModel)]="field.cityNamesto" 
                (keydown.enter)="openDialogPincodeSearch(field,'destId')" readonly
                [matTooltip]="field.cityNamesto" [matTooltipDisabled]="!field || !field.cityNamesto || field.cityNamesto.length<13" matTooltipPosition="below">
              </mat-form-field>
              <span *ngIf="(destId.errors?.required && (destId.touched || fSLA.submitted))"
                  class="hasErrorMsgCom">
                  Required&nbsp;!
              </span>
            </a>
         </div>
            
             <div class="col-lg-2 col-md-2   "  *ngIf='field.toTypeSLA==="PINCODE"'>
                   <a style="cursor: pointer;" (click)="openDialogPincodeSearch(field,'destId',false)">
                    <span class="fa fa-search fa-lg" id="search-icon"></span>
                    <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                      <input class="pincode_input" required #destId='ngModel' name="destId-{{i}}" matInput  autocomplete="true" [(ngModel)]="field.destId" 
                      (keydown.enter)="openDialogPincodeSearch(field,'destId',false)" readonly
                      [matTooltip]="field.destId" [matTooltipDisabled]="!field || !field.destId || field.destId.length<13" matTooltipPosition="below">
                    </mat-form-field>
                    <span *ngIf="(destId.errors?.required && (destId.touched || fSLA.submitted))"
                        class="hasErrorMsgCom">
                        Required&nbsp;!
                    </span>
                  </a>
                 </div>
                <div class="col-lg-2 col-md-2  ">
                  <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                    <input required #customSlaDays='ngModel'   autocomplete="true" matInput  name="customSlaDays-{{i}}" [(ngModel)]="field.slaDays"
                    maxlength="4" pattern="^[0-9][0-9]*$">
                  </mat-form-field>
                  <span *ngIf="(customSlaDays.errors?.required && (customSlaDays.touched || fSLA.submitted))"
                      class="hasErrorMsgCom">
                      Required&nbsp;!
                  </span>
                  <span *ngIf="(customSlaDays.errors?.pattern && customSlaDays.touched && !customSlaDays.errors?.required)" style="display: block;" class="hasErrorMsgCom">Only Numbers Allowed !</span>

                </div>
                <mat-icon (click)="removeCustomSLA(i)" *ngIf="field.isNewSla" id="removeSlaIcon" mat-card-avatar aria-label="delete icon" class="material-icons customeRemoveIcon">delete</mat-icon>
              </div>
            </div>
            </form>

            
            <hr id="collapsedivider">
            <div class="row">
              <div class="col-lg-3 col-md-3  label-text">
                <!-- SafeExtension Type Add Icon -->
               <h5 class="zonalheading">SLA Custom Safextension
                  <button mat-icon-button [disabled]="!fSafeExtnType.form.valid" (click)="addSlaListSLA()" id="plusicon2" mat-card-avatar aria-label="Example icon" class="mat_icon_moz">
                    <mat-icon class="slaAddIcon">add_circle</mat-icon>
                  </button>
                </h5> 
              </div>

            
                <div class="col-lg-5 col-md-5" style="padding-top: 1rem !important;">
                   <mat-radio-group  *ngFor="let season of typeList" class="example-radio-group"
                      name="safeextTypeSlaFlag" [(ngModel)]="safextTypeId"><mat-radio-button class="example-radio-button" name="safextTypeFlag" [value]="season.id" (change)="changeSafextType(season.lookupVal,season.id)">
                        {{season.descr}}
                  </mat-radio-button>
                  </mat-radio-group>                
                </div>
                </div>

           <form name="safeExtnType" (ngSubmit)="fSafeExtnType.form.valid" #fSafeExtnType="ngForm" novalidate>
            <div *ngIf="safextCustomSlaList.length>0">
            <div class="row" style="padding-top: 1.5rem;">
              <div class="col-lg-5 col-md-5">
                <div class="col-lg-4 col-md-4 zonalheadingbar">FROM {{safextTypeVal}}</div>
                <div class="col-lg-4 col-md-4 zonalheadingbar">TO {{safextTypeVal}}</div>
                <div class="col-lg-4 col-md-4 zonalheadingbar">SLA DAYS</div>
              </div>
            </div>
            <!-- SafeExtension Type Required Fields -->
            <div *ngFor="let sfx of safextCustomSlaList; let i = index" class="row" style="margin-top: 1.5rem;">
              <div class="col-lg-5 col-md-5">
                <div class="col-lg-4 col-md-4" *ngIf='safextTypeVal == "STATE"'>
                  <a style="cursor: pointer;" (click)="openDialogStateSearch(sfx,'safextSrcId',true)">
                    <span class="fa fa-search fa-lg" id="search-icon"></span>
                    <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                      <input class="pincode_input" required #safextSrcId='ngModel' name="safextSrcId-{{i}}" matInput  autocomplete="true" [(ngModel)]="sfx.stateNamesfrom" (keydown.enter)="openDialogStateSearch(sfx,'safextSrcId',true)" readonly
                      [matTooltip]="sfx.stateNamesfrom" [matTooltipDisabled]="!sfx || !sfx.stateNamesfrom || sfx.stateNamesfrom.length<13" matTooltipPosition="below">
                    </mat-form-field>
                    <span *ngIf="(safextSrcId.errors?.required && (safextSrcId.touched || fSLA.submitted))" class="hasErrorMsgCom">Required&nbsp;!</span></a>
                </div>
                <div class="col-lg-4 col-md-4  " *ngIf='safextTypeVal == "PINCODE"'>
                  <a style="cursor: pointer;" (click)="openDialogPincodeSearch(sfx,'safextSrcId',true)">
                    <span class="fa fa-search fa-lg" id="search-icon"></span>
                    <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                      <input class="pincode_input" required #safextSrcId='ngModel' name="safextSrcId-{{i}}" matInput  autocomplete="true" [(ngModel)]="sfx.safextSrcId" 
                      (keydown.enter)="openDialogPincodeSearch(sfx,'safextSrcId',true)" readonly
                      [matTooltip]="sfx.safextSrcId" [matTooltipDisabled]="!sfx || !sfx.safextSrcId || sfx.safextSrcId.length<13" matTooltipPosition="below">
                    </mat-form-field>
                    <span *ngIf="(safextSrcId.errors?.required && (safextSrcId.touched || fSLA.submitted))"
                        class="hasErrorMsgCom">
                        Required&nbsp;!
                    </span>
                  </a>
                 <div *ngIf="sfx.fromValidation" class="invalid-feedback">
                  <div *ngIf="sfx.fromValidation" class="error">Please select From !</div>
                 </div>
               </div>
               <div class="col-lg-4 col-md-4  " *ngIf='safextTypeVal == "STATE"'>
                <a style="cursor: pointer;" (click)="openDialogStateSearch(sfx,'safextDestId',true)">
                  <span class="fa fa-search fa-lg" id="search-icon"></span>
                  <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                    <input class="pincode_input" required #safextDestId='ngModel' name="safextDestId-{{i}}" matInput  autocomplete="true" [(ngModel)]="sfx.stateNamesto" 
                    (keydown.enter)="openDialogStateSearch(sfx,'safextDestId',true)" readonly
                    [matTooltip]="sfx.stateNamesto" [matTooltipDisabled]="!sfx || !sfx.stateNamesto || sfx.stateNamesto.length<13" matTooltipPosition="below">
                  </mat-form-field>
                  <span *ngIf="(safextDestId.errors?.required && (safextDestId.touched || fSLA.submitted))"
                      class="hasErrorMsgCom">
                      Required&nbsp;!
                  </span>
                </a>
               </div>
               <div class="col-lg-4 col-md-4  " *ngIf='safextTypeVal == "PINCODE"'>
                <a style="cursor: pointer;" (click)="openDialogPincodeSearch(sfx,'safextDestId',true)">
                  <span class="fa fa-search fa-lg" id="search-icon"></span>
                  <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                    <input class="pincode_input" required #safextDestId='ngModel' name="safextDestId-{{i}}" matInput  autocomplete="true" [(ngModel)]="sfx.safextDestId" 
                    (keydown.enter)="openDialogPincodeSearch(sfx,'safextDestId',true)" readonly
                    [matTooltip]="sfx.safextDestId" [matTooltipDisabled]="!sfx || !sfx.safextDestId || sfx.safextDestId.length<13" matTooltipPosition="below">
                  </mat-form-field>
                  <span *ngIf="(safextDestId.errors?.required && (safextDestId.touched || fSLA.submitted))"
                      class="hasErrorMsgCom">
                      Required&nbsp;!
                  </span>
                </a>
                <div *ngIf="sfx.toValidation" class="invalid-feedback">
                  <div *ngIf="sfx.toValidation" class="error">Please select To !</div>
                 </div>
              </div>
                <div class="col-lg-4 col-md-4  ">
                  <mat-form-field appearance="outline" style="height: 2.7rem; width: 100%;">
                    <input required #slaDays='ngModel'  name="slaDays-{{i}}" matInput  autocomplete="true" autocomplete="number"  autocomplete="true" [(ngModel)]="sfx.slaDays"
                   maxlength="4" pattern="^[0-9][0-9]*$">
                  </mat-form-field>
                  <span *ngIf="(slaDays.errors?.required && (slaDays.touched || fSLA.submitted))"
                      class="hasErrorMsgCom">
                      Required&nbsp;!
                  </span>					  
                   <span *ngIf="(slaDays.errors?.pattern && slaDays.touched  && !slaDays.errors?.required)" style="display: block;" class="hasErrorMsgCom">Only Numbers Allowed !</span>

                </div>
              </div>
              <mat-icon (click)="removeSafexTypeSLA(i)" *ngIf="sfx.isNewSla" id="removeSlaIcon" mat-card-avatar aria-label="delete icon" class="material-icons customeRemoveIcon">delete</mat-icon>
             </div>
            </div>
            </form>

            <div>
            <h5 class="zonalheading" style="padding-top: 20px;">Safextension SLA Days</h5>
            <div class="row">
              <div class="col-lg-6 col-md-6  ">
                <div class="col-lg-2 col-md-2   zonalheadingbar">GROUP</div>
                <div class="col-lg-4 col-md-4   zonalheadingbar">SLA DAYS</div>
              </div>
            </div>

            <div class="row" style="padding-top: 10px;display: grid;">
              <div *ngFor="let sfxType of safextSlaList | sortBy:'asc':'groupName' ; let i = index" class="col-lg-6 col-md-6  "
              style="display: flex;margin-bottom: 2rem;">
                <div class="col-lg-2 col-md-2  ">
                  {{sfxType.groupName}}
                </div>
                <div class="col-lg-4 col-md-4  ">
                  <mat-form-field appearance="outline" style="width: 80%;">
                     <input required #safeExtnslaDays='ngModel'  autocomplete="number"  autocomplete="true" matInput  autocomplete="true" name="safeExtnslaDays-{{i}}" [(ngModel)]="sfxType.slaDays"
                    maxlength="4" pattern="^[0-9][0-9]*$">
                  </mat-form-field>
                  <span *ngIf="(safeExtnslaDays.errors?.required && (safeExtnslaDays.touched || fSLA.submitted))"
                  class="hasErrorMsgRight">
                      Required&nbsp;!
                  </span>
                  <span *ngIf="(safeExtnslaDays.errors?.pattern && safeExtnslaDays.touched && !safeExtnslaDays.errors?.required)" 
                  class="hasErrorMsgRight">
                    Only Numbers Allowed !
                  </span>
                </div>
              </div>
            </div>
            </div>
            <div style="margin-top: 2%;">
              <mat-accordion>
                <div class="example-button-row text-center" style="margin-top: 2%">
                  <button id="slaSaveButton" class="btn1" mat-raised-button
                    (click)="isValidSLA('save')" color="primary" *ngxPermissionsOnly="['SLA GROUP_CREATE','SLA GROUP_UPDATE']">Save</button>
                
                </div>
              </mat-accordion>
            </div>
          </form>
          </mat-card-content>
        </mat-expansion-panel>
        <!-- SLA code ends here -->

      </mat-accordion>
    </div>
    <div class="example-button-row text-center" style="margin-top: 5%" *ngIf='(msaCustLevelName == "MSA CLUSTER")'>
      <button class="btn1" id="rateSubmitButton" style="text-align: center" mat-raised-button color="primary" *ngxPermissionsOnly="['BRANCH_CREATE', 'BRANCH_READ']"
        (click)="openClusterBranch()">Next</button>
    </div>
   

  </mat-card>
  <div class="example-button-row text-center" style="margin-top: 2%"  class="row" *ngIf="msaCustLevelName !== 'MSA CLUSTER'">
    <div class="col-md-12">
    <button  (click)="previewData()" *ngIf="(perList && (perList.includes('CONTRACT_READ')))"
     class="btn1" style="text-align: center" mat-raised-button color="primary">Preview</button>
  </div>
</div>
</div>

