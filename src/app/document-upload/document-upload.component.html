<div class="container upload" *ngIf="!otpScreen">
  <br><br>
  <form name="docform" (ngSubmit)="docform.form.valid" #docform="ngForm" novalidate>
    <mat-card style="box-shadow: none;">
      <div class="row">
        <div class="col-lg-12 col-md-12 ">
          <div class="col-lg-6 col-md-6  paddingzero">
            <div class="col-lg-6 col-md-6  paddingzero">
              <div class="col-lg-6 col-md-6  paddingtopzero paddingleftzero label-text">Document Type<span
                  style="color: red;"> *</span>
              </div>
              <div class="col-lg-6 col-md-6 ">
                <mat-form-field appearance="outline" style="width: 100%;">
                  <mat-select disableOptionCentering panelClass="uploadDocument" #doctype='ngModel' required
                    name="docTypeId" [(ngModel)]="docTypeId"
                    (selectionChange)="subDocTypeData(); getDocumentDetailbyId(); clearDate()"
                    placeholder="Select Option">
                    <mat-option [value]="">Select Option</mat-option>
                    <mat-option *ngFor="let item of docTypeList | sortBy:'asc':'lookupVal'" [value]="item.id"
                      [matTooltip]="item.lookupVal" [matTooltipDisabled]="item.lookupVal.length<15"
                      matTooltipPosition="above"> {{item.lookupVal}} </mat-option>
                  </mat-select>
                </mat-form-field>
                <p *ngIf="(doctype.errors?.required && doctype.touched)" class="hasErrorMsgRight paddingtopone">
                  <em>Required&nbsp;!</em></p>
              </div>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 paddingzero">
              <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 paddingtopzero label-text"
                style="text-align: left !important">Sub Type<span style="color: red;"> *</span></div>
              <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                <mat-form-field appearance="outline" style="width: 100%;">
                  <mat-select (selectionChange)="getDocumentDetailbyId()" disableOptionCentering
                    panelClass="uploadDocument" #Subdoctype='ngModel' required name="subTypeId" [(ngModel)]="subTypeId"
                    placeholder="Select Option">
                    <mat-option [value]="">Select Option</mat-option>
                    <mat-option *ngFor="let item of subTypeList | sortBy:'asc':'lookupVal'" [value]="item.id"
                      [matTooltip]="item.lookupVal" [matTooltipDisabled]="item.lookupVal.length<15"
                      matTooltipPosition="above"> {{item.lookupVal}} </mat-option>
                  </mat-select>
                </mat-form-field>
                <p *ngIf="(Subdoctype.errors?.required && Subdoctype.touched)" class="hasErrorMsgRight paddingtopone">
                  <em>Required&nbsp;!</em></p>
              </div>
            </div>
          </div>
          <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 paddingrightzero paddingleftzero">
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 paddingleftzero">
              <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12 paddingtopzero label-text" *ngIf="(isToggle) == true"
                style="text-align: left">Expiry<span style="color: red;">*</span></div>
              <div class="col-lg-8 col-md-8 col-sm-8 col-xs-12" *ngIf="(isToggle) == true">
                <mat-form-field appearance="outline" id="datepick" class="exprity">
                  <input #dtpicr='ngModel' required matInput [matDatepicker]="picker2" name="rateCardSignDt"
                    (dateChange)="docExpiryDt()" class="date_picker" (blur)="docExpiryDt()" placeholder="DD/MM/YYYY"
                    [(ngModel)]="docExpiryDate">
                  <mat-datepicker panelClass="docUpload" #picker2></mat-datepicker>
                  <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                </mat-form-field>
                <span *ngIf="(dtpicr.errors?.required && dtpicr.touched)" class="hasErrorMsgRight paddingtopone">
                  <em>Required&nbsp;!</em>
                </span>
                <span *ngIf="isValidDocExpiryDate && !(dtpicr.errors?.required)" class="hasErrorMsgRight paddingtopone">
                  Invalid Expiry Date! </span>
              </div>
              <div class="col-lg-8 col-md-8 col-sm-8 col-xs-12" *ngIf="(isToggle) == false">
                <button class="btn1 docUpload" id="secondry-button" mat-raised-button color="primary"
                  [disabled]="!docform.form.valid" (click)="searchDoc()">Search</button>
              </div>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
              <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 label-text paddingtopzero relative"
                *ngIf="(isToggle) == true" style="margin-bottom: 1rem !important;">
                <input type="file" #browseFile id="file" (click)="browseFile.value = null"
                  (change)="handleFileInput($event)" style="display:none">
                <span style="position: relative;right: 1.3rem;">File<span style="color: red;">*
                    &nbsp;&nbsp;</span></span>
                <button id="secondry-button" mat-raised-button color="primary" (click)="browseFile.click()"
                  class="docUpload"> Browse</button>
                <p class="file_name" [matTooltip]="uploadedFileName | uppercase" matTooltipPosition="left">
                  {{uploadedFileName}}</p>
              </div>
              <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4" *ngIf="(isToggle) == true">
                <button class="btn1 docUpload" id="secondry-button" mat-raised-button color="primary"
                  [disabled]="!docform.form.valid" (click)="postDocumentUploadDetail()">Upload</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row paddingleftzero">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
          <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 paddingzero">
            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 paddingzero">
              <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 paddingtopzero paddingleftzero label-text"></div>
            </div>
          </div>
          <div class="col-lg-3 col-md-3 col-sm-3 col-xs-6 label-text"> Search<mat-slide-toggle
              class="docToggle tp-margin" (click)="swapOffToggleButton()">Upload</mat-slide-toggle>
          </div>
          <div *ngIf="(isToggle) == true" class="label-text"> Note : {{validFormatsMgs}}</div>
        </div>
      </div>
      <!-- show init docs and search -->
      <div class="row background" style="margin-top: 2rem !important" *ngIf="docList.length > 0">
        <h4 style="color: #27AE60; text-align:center">Uploaded Document </h4>
      </div>
      <div class="row background" style="margin-top: 2rem !important" *ngIf="docList.length > 0">
        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
          <div class="col-lg-9 col-md-9 col-sm-9 col-xs-9 label-text paddingtop">Name</div>
          <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 label-text paddingtop">Document Type</div>
        </div>
        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
          <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 label-text paddingtop">Document Sub Type</div>
          <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 label-text paddingtop">Expiry</div>
        </div>
      </div>
      <div class="row fonts bottom-border" style="margin-top: 1.5rem !important;" *ngFor="let item of docList">
        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 fonts">
          <div class="col-lg-9 col-md-9 col-sm-9 col-xs-9 wordBreakall">{{item.docRef}}</div>
          <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 ">{{item.docType}}</div>
        </div>
        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
          <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">{{item.docSubtype}}</div>
          <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">&nbsp;{{item.expDt}}</div>
          <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5 text-right">
            <em class="material-icons fontSizeforview" (click)="downloadDocument(item.docPathRef)">remove_red_eye</em>
          </div>
        </div>
      </div>
      <!-- no record found -->
      <div class="row" style="margin-top: 4rem !important; margin-left: 4rem !important; color:red"
        *ngIf="noRecdFundMsg">
        <div class="col">
          <p class="danger">Oops! No Record Found</p>
        </div>
      </div>
      <!-- pending docs upload -->
      <div *ngIf="pendingDocsUplod.length > 0">
        <div class="row background" style="margin-top: 2rem !important">
          <h6 style="color:red; text-align: center;">Pending Document Upload</h6>
        </div>
        <div class="row background" style="margin-top: 2rem !important" *ngIf="docList.length > 0">
          <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
            <div class="col-lg-9 col-md-9 col-sm-9 col-xs-9 label-text paddingtop">Name</div>
            <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 label-text paddingtop">Document Type</div>
          </div>
        </div>
        <div class="row fonts bottom-border" style="margin-top: 1.5rem !important;"
          *ngFor="let item of pendingDocsUplod">
          <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 fonts">
            <div class="col-lg-9 col-md-9 col-sm-9 col-xs-9 wordBreakall">{{item.lookupVal}}</div>
            <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 ">{{item.descr}}</div>
          </div>
        </div>
      </div>
    </mat-card>
    <div>
    </div>
  </form>
</div>



<!-- validate otp -->
<div class="container" *ngIf="otpScreen">
  <div class="otpBack"></div>
        
    <!-- if otp send success ful -->
      <div class="otp" *ngIf="otpStatus">
        <h1>Please enter the One-Time Password to verify your account</h1>
        <h5>A One-Time Password has been send to {{otp?.mobileNumber}}</h5>
        <br>
        <input type="text" class="form-control optEnter" (keyup)="enterOtp()" [(ngModel)]="enteredOtp" maxlength="6"  OnlyNumber="true">
        <p *ngIf="wrongOtpMsg" style="color: red; font-size: 1.5rem; margin-bottom: 3rem;">The OTP you've entered is incorrect. Please try again.</p>
        <button class="btn btnOtp"  placeholder= "Enter OTP" (click)="runValidateOtp()" [disabled]="validatBtnFlg">
          Validate
        </button>
        <button class="btnReset btnOtp" (click)="runGenerateOtp()">
          Resent One-Time Password
        </button>
      </div>

      <!-- if otp send failed -->
      <div class="otp" *ngIf="!otpStatus" style="height: 12rem;">
        <h1 style="color:red!important">Server error. Please try again later.</h1>       
      </div>
</div>
